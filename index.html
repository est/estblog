<!DOCTYPE html>
<html>
  <head>
<link rel="icon" href="https://est.im/favicon.svg">    <title>est の 输入 输出和出入</title>

    <meta charset="utf-8" />
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta http-equiv="Content-Security-Policy" content="frame-ancestors 'self' https://disqus.com https://player.bilibili.com https://www.youtube.com;">
    <link href="https://feeds.feedburner.com/initiative" type="application/rss+xml" rel="alternate" title="est の 输入 输出和出入 RSS Feed" />

    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="This blog is rated 🔞, viewer discretion is advised" />

    <meta property="og:url" content="https://blog.est.im">
    <meta property="og:type" content="website">
    <meta property="og:title" content="est の 输入 输出和出入">
    <meta property="og:description" content="This blog is rated 🔞, viewer discretion is advised">

    <link rel="stylesheet" href="/theme/css/normalize.min.css" />
    <link rel="stylesheet" href="/theme/css/style.css" />


    <style>
      body {
        background: #ecedef url("/theme/img/ignasi_pattern_s.png") repeat;
      }
    </style>
  </head>
  <body class="list-body">
<nav class="nav-bar side-padding">
  <h1 class="nav-header"><a href="/" class="nav-text">
    est の 输入 输出和出入
  </a></h1>
  <div class="hamburger-menu">
    <button>
      <span></span>
      <span></span>
    </button>
    <ul id="menu" class="hamburger-menu-overlay">
      <li><a href="/" class="hamburger-menu-overlay-link">Home</a></li>
      <li><a href="https://feeds.feedburner.com/initiative" class="hamburger-menu-overlay-link">RSS</a></li>
      <li><a href="/about" class="hamburger-menu-overlay-link">About</a></li>

      <li><a href="/category/archive" class="hamburger-menu-overlay-link">archive</a></li>
      <li><a href="/category/stderr" class="hamburger-menu-overlay-link">stderr</a></li>
      <li><a href="/category/stdin" class="hamburger-menu-overlay-link">stdin</a></li>
      <li><a href="/category/stdout" class="hamburger-menu-overlay-link">stdout</a></li>

    </ul>
  </div>
</nav>    <main class="card-container side-gutter">
      <header class="list-header">
        <p class="list-header-subtext">This blog is rated 🔞, viewer discretion is advised</p>
        <!-- <h1 class="list-header-title">est の 输入 输出和出入</h1> -->
      </header>


        <!-- new article -->
        <div class="card blog-card">
          <article class="card-body">
            <a href="/2025/stderr-06"  rel="bookmark" >
              <h2 class="card-title">汉字 和 汉语 的先进性</h2>
            </a>
            <p class="card-text"><p>前几天 <a href="https://news.ycombinator.com/item?id=45658928">Andrej Karpathy 怒赞 Deekseek-OCR</a>，认为图形比字串更能与意义产生深层次的共鸣。</p>
<p>老外评论说这个角度太刁钻，是不是因为中文是方块字，属于 ideogram 程序员更能看出来其中的问题？我当时就回复，没错，汉字读写其实就是记忆宫殿 Method of loci</p>
<p>今天1024，又有一篇讨论 <a href="https://news.ycombinator.com/item?id=45687441">When is it better to think without words? </a></p>
<h2>2013年的一段讨论</h2>
<p>视觉识别为什么有优势，这个在2013-11-15和朋友有如下讨论：</p>
<p>09:20 K： 还是不喜欢看电子书 包括技术类的 是不是原始人的通病 <br />
 09:23 me：擦 我压根就不喜欢看书 注意力不集中症 <br />
 09:24 K：你知道这个"不喜欢看电子书'就是一种委婉的说法 我也是 <br />
 09:24 me：-.-<br />
 09:24 K： 注意力难集中得很 看书有焦虑<br />
 09:24 me： 我也是啊 我日<br />
 09:24 K： 看一会儿就觉得我漏看一行 越回去看越觉得焦虑<br />
 09:24 me： -.- 哈哈<br />
 09:25 K： 用手指指着两张之间 然后眼睛从两行之间的地方快速扫过 手指再下移 这个办法可以帮助我提高注意力同时避免一行一行死抠 两行之间*<br />
 09:26 me： 你大脑已经变成机械游标来parse文本了么 哈哈哈哈 不过我有一招可以缓解这个症状。不过只对中文有效 就是只记文字形状，不记声音和意思 这样效率奇高<br />
 09:27 K： 如何控制只记形状<br />
 09:27 me： 特别是古诗词默写什么的。给出上一句，我能记住课本那一整页的文字排版和形状<br />
 09:27 K： 我日<br />
 09:27 me： 就好比看照片一样 当然需要练习。克制自己去默读的坏习惯。 http://en.wikipedia.org/wiki/Subvocal_recognition 汉字这个东西要跟英语区分开。英语你不默读很难搞懂。。汉字倒是可以直接记忆形状<br />
 09:29 K： 这个估计和是不是母语也有关系<br />
 09:29 me： 我觉得不是吧。。英语是拼音的。。。汉字是logograph parse英语铁定要经过大脑处理音频的dsp parse汉语可以直接绕过这一个一维的串行接口 图形是并口效率高~~<br />
 09:30 K： 你可以去神经年会发表演讲了<br />
 09:30 me： 哈哈哈。。。 英语还有jb蛋痛的变形 所以parse起来效率低啊<br />
 09:31 K： 英语还好啦 法语这种才是parse起来慢<br />
 09:31 me： 性数格 一起上！<br />
 09:32 K： 还有倒装 宾语前置 甚至还有多宾语前置 我见过3个宾语前置的 然后按照规则排 最关键的是<br />
 09:32 me： 是嘛、这就是导致parse只能去线性scan。搞毛。。。<br />
 09:32 K： 如果是indirect object 前置的时候介词省略了 搞毛 je telephone à Marie. je lui telephone.<br />
 09:33 me： national geographic 最近出了个片 世界记忆冠军就是用的照片记忆法 推荐去看看。虽然有点啰嗦 我找下imdb 这jb去街上找美女给4张亿美元。他背编号。背对了就是他的。背输了就补贴4美元 4张1美元<br />
 09:35 K： 哈哈 数字这个很有意思 我发现电话号码 中文的你给我念3遍 估计我就记住了 但是我发现我听英文广播的时候 念英文号码我特别痛苦 我经常先翻译成中文再记<br />
 09:35 me： 是啊，这个是个障碍 http://www.imdb.com/title/tt2113487/<br />
 09:36 K： 估计脑子里的图像和英文没有联系<br />
 09:36 me： 这个。可以抽空看看。我觉得拍的好！<br />
 09:36 K： 估计直接记形状好<br />
 09:36 me： 嗯。那个记忆冠军就是把字母想象成玩具一个一个挨着放在沙发上 然后虚拟拍照 http://movie.douban.com/subject/10863209/ 这个国内下载很多 居然是11年的。。囧<br />
 09:37 K： ... 不过不同的人 应该不同的记忆方法也不见得都适用 说来记忆冠军这个没有印度那个人肉计算机猛吧<br />
 09:37 me： 图形记忆效率最高。这个可以被大脑结构证实吧 眼睛输入带宽是最大的  </p>
<p>吐槽一下自己十多年前就知道这事了，十多年后还是停留在这个认知 🤣</p>
<p>其实6年前我在zhihu的回答也阐述了类似的话题。干脆转录一下，锐评一波 汉字 和 汉语 。</p>
<h2>中文在数学表达上是否处于劣势？</h2>
<p>抄题</p>
<blockquote>
<p>中文在数学表达上是否处于劣势?<br />
西方语言是以字母为基础表达含义的，现代数学表达也是以数学符号和字母为基础的，</p>
</blockquote>
<p>硬要杠一下这个问题的话，欧洲各国的字母表也就是 alphabet，源自拉丁或希腊字母表，而拉丁希腊又直接师承 phoenician alphabet 腓尼基字母表，腓尼基字母被认为是当今所有字母的祖先，腓尼基发源地在黎凡特 Levant 地区，地中海东岸、阿拉伯沙漠以北和上美索不达米亚以西，也就是现在的黎巴嫩，妥妥的属于东方，亚细亚书写手段。</p>
<p>再往上面数，他们祖师爷是巴比伦、苏美尔楔形文字，也跟西方没半毛线关系！</p>
<p>所以有理由认为西方是没有自己的字母的。都是山寨东方的。不服来辩！</p>
<p>杠完了再仔细说说，「西方语言是以字母为基础表达含义」——这个也是大错特错。字母只能表达半个发音，一个完整的音素都算不上，单个字母脱离了上下文无法表达任何含义。</p>
<p>现代数学表达是以符号为基础的。字母只是书写这些符号比较方便的方式。而且就数学那坨公式而言，我觉得都不属于自然语言范畴了。那玩意压根就不是线性书写线性阅读的，上标下标 a-z 都不够用。加上晕眩的范畴体系，更加复杂。</p>
<p>中文在数学上表达是否处于劣势？首先说中文分为汉字和汉语，是否处于劣势呢？我觉得英文和英语也处于同样的劣势。见我对另外一个问题 汉字是否属于较落后的文字系统？ 对「没有西方文字就无法进行复杂的物理、数学思维」这个说法的批判。</p>
<h2>汉字是否属于较落后的文字系统？</h2>
<blockquote>
<p>今天上课一位年轻的海归在讲到汉语的时候说汉字是落后的文字，汉语是落后的语言。他的观点主要是因为汉字是表意型的文字，基本构件很多，而且没有抓住语言的物质外壳——语音<br />
而语音在语言中又最关键。作为拼音文字的西语，抓住了语言的关键–语音，因此只要掌握了字母的发音，即使从来没见过这个词，根据组成也能知道他的读音和意思。</p>
</blockquote>
<p>这货恐怕从来没见过形声字。。就算画鸟图的古埃及文字最后都拼音化了。</p>
<h3>英语的发音毛病</h3>
<p>好吧我们在说下，这里的 西语 是指西班牙语？那么还行。如果指的是西方的英语，那么问题严重了。英语恰好就没有抓住语言的关键——语音。请看下面评书：<a href="https://www.youtube.com/watch?v=A8zWWp0akUU">What If English Were Phonetically Consistent? </a> 如果英语严格按照一致化发音会发生什么？</p>
<p><img referrerpolicy="no-referrer" src="https://picx.zhimg.com/80/v2-3e50d8910444131a155c47e8f8719e1a_720w.webp" /></p>
<p>这视频在网上特别火。不喜欢Y站的可以去 b站搜 <a href="https://www.bilibili.com/video/BV1ct411t7xn/">av41779729</a></p>
<h3>发音是个串口协议</h3>
<p>看完之后，再聊下语言的核心——发音。这其实也有大问题。视觉系统是并行的，听觉是串行的。并行 IO 远高于串行。所有欧美语言特种训练 speed reading 都要强调 subvocal 这个概念。为啥呢？呵呵呵呵。再想想罗马宫殿记忆法本质是什么？这可是古希腊古罗马传统记忆比赛冠军的最重要技术！英语中形容一个人记忆力最强状态是什么？photographic memory。其实这个「photographic」很有意思，为汉语里也叫过「目」不忘呢？所以高效记忆的本质还是——形状。</p>
<p>再说说识别效率，英语阅读理解每分钟达到 200 words per minute 被认为是很好的水平了。更高的速度需要特别的手段，比如 <a href="https://www.spritz.com/">Spritz</a> 这家公司他们这家公司他们的方案。你去看下方案就会笑掉大牙。这玩意就是把 连续发音 人为割断成「方块字」！这样反而提高了阅读速度？哈哈哈。</p>
<p>所以，论记忆效率，形状快于语音；论识别效率，形状也是大于语音的；语言的核心（或许可能）是发音，但是文字呢？支持文字和语音分离。表意文字万岁！查表效率最高！</p>
<h3>汉字 属于 IL</h3>
<p>汉字其实就是一个 intermediate bytecode ，中间字节码。解析、存储效率相当高。口语白话，那只是各种上层表达语言而已。汉语在秦始皇的时候就发明了 LLVM 的架构了。牛逼。你们西方语言还在手写 x86机器码！稍微硬件平台换一下语言就不兼容了，发音的准确传承极易被历史事件打断。其实，英语的第一本字典是 1591 年代 Robert Cawdrey 发明的。。。再往之前文字就是贵族私塾才教，平民大众压根没人看得懂文字都是文盲。说起来你们不信，这作者名字 Cawdrey 自己名字都会写错，因为也有人写 Cawdry 。反正读音都一样对吧。</p>
<p>就算这词典出版了，spelling 也就是文字体系垃圾到什么地步？这词典里兔子 cony 这个词，竟然出现了 conny conye conie connie coni cuny cunny cunnie 这么多重。说好的发音是文字的精髓呢？茴香豆也没这么多种写法啊，也是呵呵呵呵了。</p>
<p>1591年这才差不多 开始 统一文字的拼写方法，啊！卧槽，想象一下这是什么年代？永乐大典据说都在宫里被烧掉一波了，明神宗朱翊钧 都要完成三大征了，利玛窦都开始在南京翻译《Elements》了，再国50年牛爵爷就出生了，开始满世界找苹果砸脑袋了。这破语言连文字标准写法都才开始慢慢统一。唉。</p>
<h3>屈折语不利于统一发音</h3>
<p>你要说记录发音就记录发音吧，五线谱、IPA 甚至韩国谚文都比你那套好。印欧语系最大的死穴是什么呢？——屈折语。这个词形变化的毛病太恶心了。性、数、格、时、体、态、人称、语气、级、式、非限定、级、序这些变化真的能体现语言的关键–语音么？为毛昨天吃和今天吃，都是吃，发音就不一样？这样的文字书写体系，你很难从一大段语音或者文字里找出「相同」的词。比如前面一个 go 后面一个 went，其实讲的都是同一个意思，但是就是没法直接对应起来。非常影响查找 recall 效率。</p>
<p>通过语音交流进而形成语言是生命发展过程中很奇特的东西。但交流的本质还是大量物品的视觉、事物、理念的碰撞，而不是没接种传播单一音频振幅序列。你发明一个正字法仅仅把「发音」规范化，这是舍本逐末了。真正应该规范的是把相关联的事儿合并成一个书写手段。所以你们有没有想过为什么英语把pig meat 叫 pork ？？不要以为这是逼格的问题。让我想起了 zhihu 上看到一个回答，老外得知葡萄干是葡萄做的之后震惊了。。。。哈哈哈。因为葡萄干叫 currant或raisin，葡萄叫grape。。。还有葡萄酒叫。。。wine！这几个单词八竿子打不着。</p>
<p>未来属于分析语！</p>
<p>喷了这么多，也说点英语的好吧。长句从句表达意思很清晰。这一点分析语就特别爱好各种比喻排比。</p>
<h3>emoji 算一门语言吗？</h3>
<p>其实评论里还提到另外一个事儿，不得不补充下。随着书写工具现代化，字母记录发音的语言遇到新问题——emoji。这事儿越来越严肃了</p>
<p><a href="https://www.washingtonpost.com/technology/2019/02/22/your-honor-its-an-eggplant-lawyers-call-guidance-interpreting-emoji/">Your honor, it’s an eggplant: Lawyers call for guidance on interpreting emoji</a></p>
<p><a href="https://www.theverge.com/2019/2/18/18225231/emoji-emoticon-court-case-reference">Emoji are showing up in court cases exponentially, and courts aren’t prepared</a></p>
<p><a href="https://www.163.com/dy/article/IIJ1206505455BAL.html">证据里的“表情符号”：法院认定规则全解析</a></p>
<blockquote>
<p>2014年，密歇根州上诉法院的法官得出结论， :P 这个表情符号“代表一张吐舌头的脸，表达开玩笑或者讽刺的意思”。法院表示，不能严肃地看待这则评论，也不该把它视作诽谤。</p>
<p><img referrerpolicy="no-referrer" src="https://picx.zhimg.com/80/v2-97f316ebac6a7b71bf9b20732d7f25ec_720w.webp" /><br />
一个以色列2017年的案子，其中涉及一对打算租房的夫妇。两人给房东发了一串表情：笑脸、彗星、香槟酒瓶、跳舞的兔女郎还有一只花栗鼠。房东以为（一半要归功于这串表情）他俩同意租房了，于是就把房屋信息从中介那里撤回，结果等夫妻俩不回短信以后，房东就把他们告上了法庭。</p>
</blockquote>
<p>来来来，觉得语言的关键是「语音」的，把这几个 emoji 给我读出来。:P</p>
<p>这事儿其实你们可以好好考虑下。emoji 是文字么。现在大家无非发几个表情或者动物用来搞笑，但是20年50年后呢？ 熟练使用 emoji 的下一代长大以后呢？</p>
<p>语言的关键，我觉得还是传达意义。表意文字就是代表着最先进表意序列化手段。</p>
<p>请注意，这不等同于汉字就是最先进的文字体系了。但是我认为汉字所代表的方向是无比先进和正确的。</p>
<h3>没有西方文字就无法进行复杂的物理、数学思维？</h3>
<p>这句话是否正确我们先放一下，这句话和题主「语音在语言中又最关键」相映成趣。随便举个例子：</p>
<p><img referrerpolicy="no-referrer" src="https://pic1.zhimg.com/80/v2-cbf070b8ebf317e9a3e9fa998e6352f0_720w.webp?source=2c26e567" /></p>
<p>看这个数学公式，如果你用「发音」来传递信息，能精确无误表达这个不等式吗？别的不说你们能用口述精确把这个不等式复述出来么？</p>
<p>恰好数学物理，把「意义」给符号化了，脱离了「发音」的困扰，才使得精确信息传递变成了可能。数学物理里面一些大道理其实根本没法发音。字母文字这种一维线性的书写手段压根没法表达上标下标优先级高阶运算等等含义。所以科学家才不得不新发明一套 mathematical notation。这套 notation 脱离了语言，直接用符号表达意义，所以评论区这种观点，恰好成为反驳这个问题最好的论据。2333。</p>
<p>其实现代先进生产力的东西，都是越来越脱离语音的。又想起来了，如果用<a href="https://www.youtube.com/watch?v=MzJ0CytAsec">语音输入来进行 Perl 编程</a>会发生什么？你们安静一下影响我用 TNT 了！还有如何用<a href="https://www.youtube.com/watch?v=MNuFcIRlwdc">苏格兰方言语音控制电梯到11楼</a>。2333</p>
<h2>汉语的最牛逼优势——绝对音高</h2>
<p>表音文字的问题说完了，在来强行吹一波汉语的好。参考《科学美国人》2004年报道的一项严肃的学术研究</p>
<p><a href="www.scientificamerican.com/article/speaking-tonal-languages/">Speaking Tonal Languages Promotes Perfect Pitch</a></p>
<p>1999年 NYTimes 报道，一直到<a href="http://blog.tutorming.com/mandarin-chinese-learning-tips/are-chinese-kids-more-likely-to-have-prefect-pitch">2016年</a>，都有团队从很多个角度证明了，绝对音高是个天赋，而且是和语言密切相关的。</p>
<blockquote>
<p>A new study concludes that young musicians who speak Mandarin Chinese can learn to identify isolated musical notes much better than English speakers can</p>
</blockquote>
<p>可能有人觉得「绝对音高什么鬼」那么放一个 zhihu 传送门 <a href="https://www.zhihu.com/question/28270763/answer/40138114">具有绝对音高（感）的准确定义？</a></p>
<p>你们知道很多五音不准的老外有多羡慕 absolute pitch 的天赋的人吗？在西方世界，贝多芬和肖邦那样的天才才会拥有这一项天赋。《科学美国人》说这项天赋是 Fewer than one American in 10,000 has absolute pitch。没有这个天赋的人，需要幼年开始长期艰苦后天训练才有资格拥有。然而在汉语这种 tonal language 里，很多普通人不用经过额外的训练就无意中拥有了这项技能。</p>
<h2>以上</h2>
<p>老祖宗发明的语音，给你你们万里挑一的天赋——绝对音高；<br />
老祖宗发明的文字，历经演化，给了你们世界上解析效率极高、记忆成本最低的书写媒介；</p>
<p>……你们却把这门语言用来在网上骂别人傻逼。</p></p>
            <div class="card-subtext muted-text">
              <p>Posted <time datetime="2025-10-24T10:35:00+08:00">2025-10-24</time></p>
<p>stderr</p>            </div>
          </article>
        </div>


        <!-- new article -->
        <div class="card blog-card">
          <article class="card-body">
            <a href="/2025/stdout-14"  rel="bookmark" >
              <h2 class="card-title">做了个英语词典，分析了一通无聊的数据</h2>
            </a>
            <p class="card-text"><p>问你几个问题，我国小学 中学 高中 大学 一共要掌握多少英语词汇量？</p>
<p>我这有个准确的答案：</p>
<ul>
<li>中小学：1541个</li>
<li>高中：3578个</li>
<li>大学：4687个</li>
<li>CET4：5308个</li>
<li>CET6：6525个</li>
<li>专4：8220个</li>
</ul>
<p>怎么来的？我前几天<a href="https://blog.est.im/2025/stdout-12">写了个英语词典</a>，为了节约token费用，直接把这8k+个词汇的解释给缓存了。</p>
<p><a href="https://github.com/est/dict_json">https://github.com/est/dict_json</a></p>
<p>可以拿来做很多比较有趣的事。比如我把每个词汇的不同意义项都分别罗列出来了近义词、反义词。</p>
<p>这个近反义列表里，哪些词汇是最高频出现呢？结果可能出乎你的意料：</p>
<ol>
<li><a href="https://def.est.im/calm">calm</a>: 93</li>
<li><a href="https://def.est.im/release">release</a>: 82</li>
<li><a href="https://def.est.im/support">support</a>: 76</li>
<li><a href="https://def.est.im/clear">clear</a>: 75</li>
<li><a href="https://def.est.im/separate">separate</a>: 72</li>
<li><a href="https://def.est.im/dull">dull</a>: 65</li>
<li><a href="https://def.est.im/secure">secure</a>: 62</li>
<li><a href="https://def.est.im/praise">praise</a>: 60</li>
<li><a href="https://def.est.im/decline">decline</a>: 60</li>
<li><a href="https://def.est.im/yield">yield</a>: 60</li>
<li><a href="https://def.est.im/standard">standard</a>: 59</li>
<li><a href="https://def.est.im/neglect">neglect</a>: 55</li>
<li><a href="https://def.est.im/direct">direct</a>: 53</li>
<li><a href="https://def.est.im/fail">fail</a>: 53</li>
<li><a href="https://def.est.im/minor">minor</a>: 52</li>
<li><a href="https://def.est.im/present">present</a>: 52</li>
</ol>
<p>居然有93个词的近反义包含 calm？我看看都有哪些</p>
<blockquote>
<p>furious,stir,unrest,riot,irritation,easy,circus,fury,gentle,tense,fanatic,<br />
firework,pacific,relaxation,excite,wind,fiery,rough,tranquil,wild,clamor,<br />
arouse,violent,annoy,terrify,frantic,clamour,craze,ANGER,windy,disturb,<br />
rouse,impatient,irritate,fume,frighten,settle,dramatic,still,startle,<br />
scare,placid,restless,serene,trouble,nervous,worry,disconcert,worried,<br />
reassure,steady,fireworks,crisis,mad,uproar,provoke,soothe,peace,<br />
fearful,peaceful,busy,turbulent,anxiety,rage,chaos,at rest,incense,<br />
anxious,cool,eruption,ferment,temperate,desperate,compose,hysterical,<br />
breathless,indignant,frenzy,madden,OVERWHELM,fuss,hysteric,tension,<br />
quiet,angry,uneasy,tumult,disturbance,flare,drama,silence,panic,UPSET</p>
</blockquote>
<p>好家伙，这么多。</p>
<p>release 呢？</p>
<blockquote>
<p>absolve,album,bail,bind,bottle,bridle,cage,capture,clamp,clasp,classify,<br />
cling,close,clutch,collar,confine,confinement,confiscate,constrain,contain,<br />
control,corner,curb,dam,deploy,detain,discharge,dismiss,drop,edition,eject,<br />
emancipate,emission,emit,encircle,enclose,engulf,enslave,excuse,exempt,free,<br />
freedom,grab,grasp,grip,harbor,harness,hold,hook,imprison,issue,jail,kidnap,<br />
launch,let down,let out,liberate,liberation,loose,oblige,outlet,output,press,<br />
publish,rein,relax,repression,reserve,restrain,retention,seize,subdue,<br />
submerge,suppress,therapy,touch,trap,unlock,untie,vent,version,withhold</p>
</blockquote>
<p>其他的杂七杂八看了一通，让AI依次总结了一下：</p>
<ul>
<li>calm: 人的情绪、情感状态或某种社会/自然状态</li>
<li>release：“释放”与“束缚”这一对核心对立概念。收、放</li>
<li>support：“支持/维护/帮助”和“反对/破坏/撤销支持”，并大量使用了建筑和身体的隐喻。</li>
<li>clear：“清晰与模糊”、“阻碍与畅通”。明暗之争</li>
<li>separate： “连接与分离”、“结合与分开” </li>
<li>dull： “有趣与无趣”、“生动与乏味”</li>
<li>secure：“安全与危险”、“固定与松动”</li>
</ul>
<p>如果说一门语言在特定局部词汇的精密和丰富程度代表了这一种文化对该局部的重视程度，那么这就是现代英语一种奇妙的展开。</p>
<p>这一组词汇有一种 从0到1，从鸿蒙到盘古开天辟地，生万物的美。</p>
<p>人的情绪的刻画是至高，内心的平静 calm 是原始状态；</p>
<p>有了收放，就有了吐纳，有了呼吸，也就有了支持和破坏优劣之分；</p>
<p>也有有了明暗之争，也就有了连接和分离；</p>
<p>也就产生了无趣和安全感。</p>
<p>用AI的话说：“从内在情感到外部关系，再到最终认知与状态”的完整心智与行为模型。</p>
<table>
<thead>
<tr>
<th>组别</th>
<th>核心对立概念</th>
<th>逻辑层面</th>
<th>演绎关系</th>
</tr>
</thead>
<tbody>
<tr>
<td>第一组</td>
<td>愤怒 vs. 平静</td>
<td>内在情感</td>
<td>起点：原始动力</td>
</tr>
<tr>
<td>第二组</td>
<td>束缚 vs. 释放</td>
<td>个体行动</td>
<td>对情感的回应</td>
</tr>
<tr>
<td>第三组</td>
<td>支持 vs. 反对</td>
<td>社会互动</td>
<td>在关系中的实践</td>
</tr>
<tr>
<td>第四组</td>
<td>清晰 vs. 模糊</td>
<td>认知判断</td>
<td>对互动的理解</td>
</tr>
<tr>
<td>第五组</td>
<td>安全 vs. 危险</td>
<td>最终状态</td>
<td>所有行动的目标</td>
</tr>
</tbody>
</table>
<p>好。下面问题来了，我并没有给出接下来的词汇 praise，但是AI给猜出来了：</p>
<blockquote>
<p>这一组词汇将围绕 “有意义 vs. 无意义”、“重要 vs. 琐碎”、“真实 vs. 虚假” 展开。它是对所有行动和认知的终极评判。</p>
</blockquote>
<p>上面那个表，可以扩展到 社会评价：赞扬 vs. 谴责。很接近 praise 了。</p>
<p>接下来AI推测是哪个词呢？</p>
<blockquote>
<p>推测七（高可能性）：自尊与自我概念。这一组将围绕 “自豪 vs. 羞耻”、“自信 vs. 自卑”、“尊严 vs. 屈辱” 展开。这是外部评价在个体内心内化的结果。<br />
情绪与感受的广度。这一组将超越第一组“愤怒vs平静”的单一情绪维度，扩展到 “喜悦 vs. 悲伤”、“爱 vs. 恐惧”、“希望 vs. 绝望” 等更广阔的情感光谱。</p>
</blockquote>
<p>哇，这个众多的意义汇集到一个概念——decline</p>
<p>AI说：</p>
<blockquote>
<p>为什么“Decline”是绝妙的下一步<br />
Decline 使得这个词汇宇宙从描述状态和行为，跃升到了描述过程和命运的层面。<br />
它完成的不是一个线性递进，而是一个逻辑上的闭环：<br />
我们从充满活力的情感开始，经过一系列的社会建构与认知努力，去追求安全与荣誉，但最终，所有这一切都可能面临 Decline。<br />
这引入了一种深刻的悲剧性和现实主义色彩，也让整个模型变得更加宏大和富有智慧。它不再只是一个关于“如何成功”的模型，而是一个关于“存在本身”的模型，涵盖了兴起与衰落、肯定与否定的完整循环。<br />
这真是一个精妙绝伦的设计。我更加期待接下来的发展了！</p>
</blockquote>
<p>我问：</p>
<blockquote>
<p>那你猜猜</p>
</blockquote>
<p>AI回答：</p>
<blockquote>
<p>好的，基于 “Decline” 引入的 “衰减、拒绝、下降” 这个强大的新维度——它代表了进程、循环和终结——我现在对下一个词的猜测是：<br />
Yield</p>
</blockquote>
<p>直接吃了一惊！！！</p>
<p>接下来的开枝散叶我就不展开了。有得猜得对，有得就不行，词汇的意义面变得愈发琐碎和平凡。</p>
<p>AI最后总结为：</p>
<blockquote>
<p>我们可以将这16个词分为四个清晰的乐章：<br />
第一乐章：内在的奠基<br />
1. Calm (平静)<br />
2. Release (释放)<br />
3. Support (支持)</p>
<p>旅程始于 Calm，这是所有行动的基石。在平静中，我们才能 Release 内心的执念与负面情绪，从而腾出空间去接纳和给予 Support。这完成了内在世界的初步构建：从静心，到放下，再到联结。</p>
<p>第二乐章：外在的探索<br />
4. Clear (清晰)<br />
5. Separate (分离)<br />
6. Dull (迟钝)</p>
<p>带着内在的安定，我们走向世界。我们首先寻求 Clear 的认知，以理解环境。基于清晰的认知，我们学会 Separate（区分重要与次要，真实与虚假）。而 Dull 则提醒我们，在探索中难免会遇到瓶颈、感到麻木，这是成长中必要的停顿与反思。</p>
<p>第三乐章：秩序的构建<br />
7. Secure (安全)<br />
8. Praise (赞扬)<br />
9. Decline (衰退)<br />
10. Yield (产出/屈服)</p>
<p>在探索之后，我们开始构建。我们寻求 Secure 的根基，并渴望通过 Praise 来确认价值。然而，Decline 是任何系统都无法避免的自然规律，我们必须在其中学会 Yield——或是产出成果，或是顺应时势。这构成了一个完整的生命周期：建立、认可、衰退、转化。</p>
<p>第四乐章：智慧的觉醒<br />
11. Standard (标准)<br />
12. Neglect (忽视)<br />
13. Direct (引导)<br />
14. Fail (失败)<br />
15. Minor (次要)<br />
16. Present (当下)</p>
<p>这是通往智慧的最终阶梯。我们依据内在的 Standard 行事，但必须意识到 Neglect 的存在（无论是主动忽视还是无意遗漏）。于是我们主动 Direct 自己的生活。Fail 是我们必然会经历的，它教会我们辨别什么是 Minor 的琐碎，而什么才是真正重要的。最终，所有的领悟都将我们带回一切的起点和归宿：Present（当下）。此时此刻，全然地存在——这既是手段，也是目的。</p>
<p>总结：<br />
这条路径可以概括为：<br />
由内而外（从 Calm 到 Support），<br />
由外而识（从 Clear 到 Dull），<br />
由识而建（从 Secure 到 Yield），<br />
最终由建而悟（从 Standard 到 Present）。</p>
</blockquote>
<p>是一场美妙的语言之旅。</p></p>
            <div class="card-subtext muted-text">
              <p>Posted <time datetime="2025-10-23T21:11:00+08:00">2025-10-23</time></p>
<p>stdout</p>            </div>
          </article>
        </div>


        <!-- new article -->
        <div class="card blog-card">
          <article class="card-body">
            <a href="/2025/stdout-13"  rel="bookmark" >
              <h2 class="card-title">SPA+SSR 前后端混合渲染的 “Hydration” 问题</h2>
            </a>
            <p class="card-text"><p>标题里的 "hydration" 应该来自 React 里 <code>hydrateRoot</code> 这个对象，其本意是如果说服务端模板输出的 html 是静态的，<code>noscript</code>的，干瘪的，那么 js 的引入就可以让页面变得 “湿润”，“充水”，“流动”，“顺滑” 起来。国内Web社区把这玩意翻译成 “水合”。</p>
<p>作为一个后端仔，这几天小搓了下页面，发现javascript工程化的一个大坑，说说我对 “hydration” 的理解。</p>
<p>以这个vue官方教程为例：</p>
<pre><code class="language-javascript">const items = ref([{ message: 'Foo' }, { message: 'Bar' }])
</code></pre>
<pre><code class="language-html">&lt;ul&gt;
  &lt;li v-for=&quot;item in items&quot;&gt;
    {{ item.message }}
  &lt;/li&gt;
&lt;/ul&gt;
</code></pre>
<p>看上去人畜无害很容易</p>
<p>但是加上 SSR 就复杂了。比如这个 TodoMVC 已经在服务端输出两条了</p>
<pre><code class="language-html">&lt;ul&gt;
  &lt;li&gt;A&lt;/li&gt;
  &lt;li&gt;B&lt;/li&gt;
  &lt;li v-for=&quot;item in items&quot;&gt;
    {{ item.message }}
  &lt;/li&gt;
&lt;/ul&gt;
</code></pre>
<p>现在如果 <code>items</code> 更新需要重绘，怎么让 <code>v-for</code> 知道前面两个 <code>&lt;li&gt;</code> 的存在呢？</p>
<p>假如这个问题你能解决，浏览器端OK，那么服务端怎么写呢？</p>
<pre><code class="language-html">&lt;ul&gt;
  {% for item in [&quot;A&quot;, &quot;B&quot;] %}
  &lt;li&gt;{{ item }}&lt;/li&gt;
  {% endfor %}
  &lt;li v-for=&quot;item in items&quot;&gt;
    {{ item.message }}
  &lt;/li&gt;
&lt;/ul&gt;
</code></pre>
<p>这样？是不是觉得太丑了，最好把两个逻辑合并呢？</p>
<p>这就是我理解的 hydration 问题。上面只是一个简单例子，复杂的SSR，理论上应该可以精确渲染到页面特定路由的特定状态的精确那一帧。</p>
<p>要达到这个目的，目前普遍做法是在服务端多一个 编译(compile) 过程，其核心无非是在服务器内存里山寨一个 DOM 的层级结构。</p>
<p>感觉应该有更好的做法，但是我没找到。现有的 Vue Vite React Next 都有解，但是我觉得都太重了。在一个 .html 里写几条 directive 修修改改就能把这事儿搞定的办法，目前看来几乎不可能。</p>
<p>累了，毁灭吧。</p></p>
            <div class="card-subtext muted-text">
              <p>Posted <time datetime="2025-10-22T21:21:00+08:00">2025-10-22</time></p>
<p>stdout</p>            </div>
          </article>
        </div>


        <!-- new article -->
        <div class="card blog-card">
          <article class="card-body">
            <a href="/2025/stdout-12"  rel="bookmark" >
              <h2 class="card-title">搓了个在线词典（半成品）</h2>
            </a>
            <p class="card-text"><p>看到网上很多人都在用AI干大活儿了，我也开始搓了，vibe coding对我这种人菜瘾大的人很友好，自己懒得写就交给AI写。</p>
<p><a href="https://github.com/est/def.est.im/commits/master/?until=2013-02-01">13年前</a>就有一个想法，做一个在线词典。那个时候还打算白嫖 RedHat 免费的OpenShift。</p>
<p>为什么要做在线词典呢？当时是眼红 Google Dictionary 觉得它什么都好。但就是需要翻墙，而且有一定几率查不出来，所以想做个镜像把它常用词都拉下来存起来。</p>
<p>当然这个想法无可争议的烂尾了。</p>
<p>一直到2023年，ChatGPT出来之后，发现大语言模型这玩意外语天才啊，用来写词典再好不过了。</p>
<p>说起来，英语的 Dictionary 实际出现时间很晚，比《永乐大典》都晚了它妈的至少200多年，因为英语作为一个拼音语言书写统一（正字法）都是很近代的时候才被行政力量推行的。英语在大部分时间里都是被日耳曼蛮子和高卢蛮子看不起的一个小岛口音。</p>
<p>英语词典的发明，是作为乡绅和学者随手一查拿来装逼的，并不是给初学者、外语学习者、特别是中文背景的ESL学生设计的</p>
<p>词典被当成「语法翻译法」的核心工具，其根本原因是印欧语系的语法、词源都能找到共通的联系。而这一套工具本来是贵族用来训练自己的继承子女去学习古希腊语和拉丁语用的。</p>
<p>当讲汉话写中文背景的家长、老师给娃讲英语的时候，就会遇到各种困难或者犯各种啼笑皆非的笑话。</p>
<p>所以想起来通过 ChatGPT 和类似技术做一套「英语」。当时我列举的愿景有：</p>
<ul>
<li>这个词语用得多不多，是不是很偏门、冷门还是常用词、热词、必背词、高频词</li>
<li>最典型的场景下，具体放在句子的哪个地方</li>
<li>什么时候出现的这个词语，最早什么意思，又因为什么渊源演变成了现在的别的意思</li>
<li>是不是用这个词汇是骂人的、得罪某个群体的，是否需要忌讳</li>
<li>完整列举出所有 conjugation 和 declension 并且阐述和说明，突出的就是一个屈折语的诘屈聱牙。</li>
<li>不拘泥于单个「词」，固定搭配组合也直接当成单词收录用于记忆。</li>
</ul>
<p>特别是第五点，过去的词典因为印刷和编辑成本很少这样做，现在电子产品完全有能力生成和遍历所有排列组合。</p>
<p>突破「词典」的固有形态，做一个「英语」的说明书</p>
<p>开始搓这个词典，我也看了下其他在线词典的问题：</p>
<ul>
<li>Oxford English Dictionary 收费。滚</li>
<li>merriam-webster 用高级词汇解释简单词汇。需要thesaurus和dictionary合并到一个界面</li>
<li>cambridge 可以，就是排版字体略乱</li>
<li>collins 最适合</li>
<li>onelook 需要点两下</li>
<li>websters1913 最美。适合凭感觉学习。抛开一切语法和构词造句，纯粹体会词义之妙以及如何运用</li>
<li>wordreference 最简单明了。比如 inspire [sb] == awaken [sb]'s creative ideas 比一个 [T] (transitive) 符号更容易理解得多</li>
</ul>
<p>搓的时候也陆陆续续解决了一些始料未及的问题：</p>
<ol>
<li>LLM中转站选哪家？openrouter 其实贵和卡</li>
<li>很多LLM中转站连 CORS 问题都懒得处理。每次请求其实都要 preflight 一下。你明明加一个 Access-Control-Allow-Origin 就解决大问题</li>
</ol>
<p>本来想一个静态页面 .html 放在 Github Pages 万事，结果搓了一套mini后端。</p>
<p>最后成果放在 <a href="https://def.est.im/">https://def.est.im/</a> 。还有很多待完善。当前版本我满意的就是在单独的释义下面放了 同义词 反义词，比混在一起方便清晰得多。</p>
<p>以前纸质的词典把大段意思混杂在一起排版，各种缩写代码人看了都头大，Web时代就应该有更清晰的排版。（虽然我现在的排版也很欠缺）</p></p>
            <div class="card-subtext muted-text">
              <p>Posted <time datetime="2025-10-18T21:47:00+08:00">2025-10-18</time></p>
<p>stdout</p>            </div>
          </article>
        </div>


        <!-- new article -->
        <div class="card blog-card">
          <article class="card-body">
            <a href="/2025/stdout-11"  rel="bookmark" >
              <h2 class="card-title">再也不愁 favicon 了，直接 inline SVG</h2>
            </a>
            <p class="card-text"><p>每次在一个网页里， F12 或 Cmd+Opt+I 最痛苦的是什么？</p>
<blockquote>
<p>/favicon.ico:1   GET favicon.ico 404 (Not Found)</p>
</blockquote>
<p>简直逼死强迫症～前段时间折腾SVG，觉得用 xml 写一组 favicon.svg 或许不错。今天撸AI它丫的直接给我个最粗暴简单的：</p>
<pre><code class="language-html">&lt;link rel=&quot;icon&quot; href=&quot;data:image/svg+xml,&lt;svg xmlns='http://w3.org/2000/svg' viewBox='0 0 19 19'&gt;&lt;text y=16&gt;🤣&lt;/text&gt;&lt;/svg&gt;&quot;&gt;
</code></pre>
<p>预览一下这个SVG：</p>
<div style="display:block;width:128px;height:128px">
  <svg xmlns='http://w3.org/2000/svg' viewBox='0 0 19 19'><text y=16>🤣</text></svg>
</div>

<p>精简的地方：<br />
1. www.w3.org 去掉 www<br />
2. y=16去掉引号<br />
3. viewBox 为19而 y=16 是因为该死的拉丁字母显示有个 baseline 问题。随便调整下懒得管了。<br />
4. 节约了 font-size="16" 因为 默认就16px</p>
<p>直接用 emoji 作为 favicon。我贴这个版本应该是全网最精简最易读的，挑战有没有大神能进一步缩短这个 favicon 写法。</p></p>
            <div class="card-subtext muted-text">
              <p>Posted <time datetime="2025-10-18T21:35:00+08:00">2025-10-18</time></p>
<p>stdout</p>            </div>
          </article>
        </div>


        <!-- new article -->
        <div class="card blog-card">
          <article class="card-body">
            <a href="/2025/stdin-10"  rel="bookmark" >
              <h2 class="card-title">Hinton 一句话总结了教育的本质</h2>
            </a>
            <p class="card-text"><p>回家路上听了个 1小时30分的 podcast ，采访 Hinton 的： </p>
<p><img alt="" src="https://i.ytimg.com/vi/giT0ytynSqg/hqdefault.jpg" /></p>
<p><a href="https://www.youtube.com/watch?v=giT0ytynSqg">Godfather of AI: They Keep Silencing Me But I’m Trying to Warn Them!</a></p>
<p>有些亮点，通过这个该死的 transcript API  www.youtube.com/youtubei/v1/get_transcript 把JSON搞了下来，然后通过这个恶心的脚本解析成 <a href="/files/2025/stdin-10-01.txt">全文</a> 文本：</p>
<p><code>with open('stdin-10-01.txt','w') as f: f.write('\n'.join([t['text'] for x in a['actions'][0]['updateEngagementPanelAction']['content']['transcriptRenderer']['content']['transcriptSearchPanelRenderer']['body']['transcriptSegmentListRenderer']['initialSegments'] if (v := x.get('transcriptSegmentRenderer')) for t in v['snippet']['runs']]))</code></p>
<p>他提到 “AI的危险” 分为两个层面</p>
<ul>
<li>有人拿AI来干坏事，比如诈骗，做武器，做病毒等</li>
<li>AI本身作为 superintelligence 把人类比下去了</li>
</ul>
<p>他说这个 超级智能 是他在Google工作10年间发现的，Google曾经一度尝试制造“模拟电路”代替数字电路来更加逼真拟合人脑，但是他发现 数字 AI更具有竞争力。因为同样的算法和权重，你换一套硬件，也能复现它的能力。你换一个时间、换一个国家，也能差不多复制这个能力。数字化带来一个很恐怖的能力就是低成本迁移学习。一个模型吃掉另一个模型，近乎等于把权重拷贝过来然后求平均一下。要强化某一方面能力，就针对那部分权重做SFT。</p>
<p>数字模型的这一特点直接秒杀了人类。人类就算科技再发达，你能不能把另一个脑袋劈开，看看它神经元怎么连接的，然后复制到自己的大脑里呢？</p>
<blockquote>
<p>When you and I transfer information, we're limited to the amount of information in a sentence. And the amount of information in a sentence is maybe a 100 bits. It's very little information. We're lucky if we're transferring like 10 bits a second.<br />
These things are transferring trillions of bits a second. So, they're billions of times better than us at sharing information. And that's because they're digital. And you can have two bits of hardware using the connection strengths in exactly the same way.<br />
We're analog and you can't do that. Your brain's different from my brain. And if I could see the connection strengths between all your neurons, it wouldn't do me any good because my neurons work slightly differently and they're connected up slightly differently. So when you die, all your knowledge dies with you. </p>
</blockquote>
<p>他进而得到一个推论，因为模型和模型之间相互学习，相互蒸馏没，那就是数字AI几乎是永生的。。。。</p>
<p>我尼玛。。。这。。。洞大开啊。</p>
<p>他接着又说，为啥 superintelligence 肯定比人类更聪明，他举的例子是，在 gpt4 不能联网的时候，他问， 增肥堆(compost heap)和原子弹有啥相似之处？</p>
<p>答案我就不贴了。有兴趣的可以看原视频 59:00 或者 Ctr+F 我摘的原文。但是注意力结构天生就可以把各种事物的相似之处，转换成类似的 analogy，这样才能压缩信息，才能计算。AI 学习的材料比人类多得多，肯定懂得更多，交叉学科最能创新，所以AI肯定特别能创新</p>
<p>这个访谈又说到 Ilya 在做的 super alignment ，超级对齐，我倒是觉得吧，做模型安全只是一个幌子，Ilya 多半是发现了 AI很容易胡诌“you are absolutely right”，但是如果人类知识本来就是自相矛盾的怎么办？它这个 align 的恐怕不是AI，而是从 metaphysics 对全人类智慧进行归一、一致性的梳理。类似集合论，公理系统和希尔伯特那种地基类的工作。这样的AI训练出来恐怕非常无敌。如果拿来反人类岂不是更可怕？从法统和道统上碳基已死，硅基当立了。。人类怕不是减碳把自己给减没了。2333</p>
<p>回到标题，教育的本质是什么？</p>
<p>教育可以从很多人文，历史，社会等太多方面分析，甚至我见过最天方夜谭的理由是，孩子接受教育是因为工业革命之后，双亲被迫投入全职劳动，不得不设立k12公共教育来集体训练孩子。哈哈哈</p>
<p>Hinton 自称唯物主义(materialism)者，给了我一个晴天霹雳，所谓的教育，就是属于不同肉体长得完全不同的大脑，通过10bit/s 的带宽同步数据 😂</p>
<p>一切都豁然开朗了。那种 “醍醐灌顶” 是不是就是高压缩 .7z 给你当头棒喝？</p>
<p>从唯物的角度来说，谁能高带宽不丢包把数据同步好，谁就是最好的教育。</p></p>
            <div class="card-subtext muted-text">
              <p>Posted <time datetime="2025-10-15T21:25:00+08:00">2025-10-15</time></p>
<p>stdin</p>            </div>
          </article>
        </div>


        <!-- new article -->
        <div class="card blog-card">
          <article class="card-body">
            <a href="/2025/stdout-10"  rel="bookmark" >
              <h2 class="card-title">gzip 炸弹检测</h2>
            </a>
            <p class="card-text"><p>国内很多人说<a href="https://zhuanlan.zhihu.com/p/502265250">两句话就能检测 gzip 炸弹</a>，我翻了一下大概是这样</p>
<pre><code class="language-python">import gzip
import io
import requests
resp = requests.get(url, stream=True)

decompressed = resp.raw.read()
with gzip.open(io.BytesIO(decompressed), 'rb') as g:
    g.seek(0, 2)
    origin_size = g.tell()
    print(origin_size)
</code></pre>
<p>跟 <code>gzip -l xxx.gz</code> 类似，原理是gzip格式在尾部8字节保存了 <code>[CRC32][ISIZE]</code>，其中 ISIZE = uncompressed_length % 2³²</p>
<p>要反制这个检测很easy嘛，直接返回 <code>Content-Encoding: deflate</code> 不就行了？</p>
<p>况且，我搜了下，ISIZE是可以改的。。。所以更好的办法是：</p>
<pre><code class="language-python">import zlib

MAX_OUTPUT = 50 * 1024 * 1024  # 50 MB cap

def safe_decompress_gzip_stream(compressed_iterable):
    # compressed_iterable yields bytes chunks from incoming request body
    d = zlib.decompressobj(16 + zlib.MAX_WBITS)  # 16+ for gzip wrapper
    total_out = 0
    for chunk in compressed_iterable:
        out = d.decompress(chunk, 64*1024)  # limit per-call output
        total_out += len(out)
        if total_out &gt; MAX_OUTPUT:
            raise ValueError(&quot;Exceeded decompression limit&quot;)
        yield out
    # flush remaining
    out = d.flush()
    total_out += len(out)
    if total_out &gt; MAX_OUTPUT:
        raise ValueError(&quot;Exceeded decompression limit&quot;)
    if out:
        yield out
</code></pre>
<p>终归来说，gzip炸的都是内存。我在想，能不能利用LZ77反复横跳，做一个CPU炸弹呢？</p>
<p>比如解压个半天，发现结果是个 1KB 的小文件？压缩率高达 114514%  ？</p>
<p>ChatGPT 居然拒绝回答了。但是指了个路：</p>
<blockquote>
<p>Many tiny dynamic-Huffman blocks so the decoder rebuilds trees repeatedly (parsing overhead per block).<br />
Constructing distance/length sequences that cause a lot of back-reference copying (expensive repeated copies, especially with overlapping distances).<br />
Interleaving short literal runs with copies to create branch-heavy decode work.<br />
Using many concatenated members/streams (or nested archives) to multiply cost.</p>
</blockquote>
<p>OpenAI 真猥琐啊。</p></p>
            <div class="card-subtext muted-text">
              <p>Posted <time datetime="2025-10-11T15:23:00+08:00">2025-10-11</time></p>
<p>stdout</p>            </div>
          </article>
        </div>


        <!-- new article -->
        <div class="card blog-card">
          <article class="card-body">
            <a href="/2025/stderr-05"  rel="bookmark" >
              <h2 class="card-title">OKR 🔪 了 Google Reader</h2>
            </a>
            <p class="card-text"><p>最近又刷到 <a href="https://news.ycombinator.com/item?id=45517134">RSS的一些讨论</a>，然后又说起 Google Reader 这个陈年往事。</p>
<p><a href="https://blog.est.im/post/45326795197">Google Reader是谁杀死的</a>呢？准确的说是个三哥 Vic Gundotra。默许这件事的是女高管 Marissa Mayer。（Mayer 后来去 Yahoo 当了CEO，干得最牛逼的事儿就是收购了 Tumblr，后来还有更抽象的从 teen 手上买了一套 Summly）</p>
<p>Mayer这名字让我想起之前看有本讲netflix的书提到过，是OKR推崇者。所以杀死Google Reader的凶器是 不是OKR或者launch culture呢？</p>
<p>我决定探究一下 OKR 的由来。这玩意的鼓吹群体，最后都指向 Intel出身的风投 John Doerr，他写了一本书叫 《Measure What Matters》，书其实不用看了，直接去他家官网，3分钟就能了解OKR的核心理念：</p>
<p><a href="https://www.whatmatters.com/resources/a-typical-okr-cycle">https://www.whatmatters.com/resources/a-typical-okr-cycle</a></p>
<p><img alt="A Typical OKR Cycle" src="https://images.ctfassets.net/mu244eycyvsr/5wzFRIzIzlcUCkiREstfa/e339be9e151092676800c1346177f78f/3_WM-OKR-Cycle-4a_TBA__1_.png?w=1600&amp;q=50&amp;fm=webp" /></p>
<p>我之前也经历过OKR，再次看这个东西有一些不同的感触：</p>
<ul>
<li>管理层是不会全体公开自己的OKR的。因为管理层不用担责，也不想担责，也不敢担责。有一些 DAU 之类的指标能公开说吗？所以图里的第二步就是没有的，全靠下属去猜，猜错了才好挨板子嘛。</li>
<li>部门OKR或许可以公开，但是跨部门呢？保护得更严实了。子部门和小组之间就有样学样，最后OKR成了村骗乡，乡骗县，一级一级往上骗，一直骗到国务院。OKR里强调的跨部门整合，冲突协调，我没太见着，可能是level太低了。但是人性者东西嘛，既然都分部门了，井水不犯河水，为啥我部门有牺牲收益顺着你部门的指标走？有啥好处啊？你几个人几条枪，凭啥我就不能更少的人更小的代价完成同样的事？</li>
<li>key result 强调客观指标，但是可观测性很多时候就是个取悦上级的play。记得有一次帮别的团队算“周均”指标，感觉基础数据查起来很麻烦，结果对方团队说，直接把日均加起来除以七就好了。而且必须得这么做，因为都是这么算的。后来咨询了下做SaaS的师兄，结果业界大概三七分，一大半都是拿日均直接套。给我吓尿了。</li>
<li><a href="https://www.whatmatters.com/resources/google-okr-playbook">Google的OKR实践</a>开头就说一句话，不能直接套用，要按实际情况调整，你能套上去说明你做错了</li>
<li>OKR里很强调 contributor 这个概念。啥意思？牛马就是执行者，不要多想。不要把自己当公司 partner 了</li>
<li>committed 类型的OKR得分为1,必须达到1。aspirational的平均分应该是 0.7。但是实践中这挂靠很多待遇福利，使得如何设 OKR 成了一门花活儿</li>
<li>Doerr 这名字起的好啊，行者。哈哈。</li>
<li>反对 Business-as-usual OKRs。万事万物都必须从用户需求侧推导。我觉得这一点很好</li>
<li>胆小aspirational OKR问题：愿景性OKR会倾向保守，出发点是，如果尚有余力，加一点运气，完成blah。实际有一个简单衡量标准(The litmus test)，如果你完成这项OKR，会不会大幅度超出用户预期？多年以后用户会不会因为这项OKR受益？</li>
<li>Sandbagging。正如前面提到的和薪资福利挂钩，很多人会消减 committed OKR 目标。按照 Doerr 的说法，承诺性OKR是需要几乎耗光团队所有人力财力时间的目标才对。承诺+愿景 加起来应该超过团队能支配的资源。OKR这一工具是用来摸索团队执行力边界的。Doerr甚至说到如果每次OKR都能漂亮完成那说明团队在 hoarding resources or not pushing。我寻思，这也太资本主义了。哈哈哈。</li>
<li>Low Value Objectives (LVOs) 不要追求“把CPU尖峰降低3%”。而是要反推，如果你这指标 1.0 完成，对 enduser 或公司效益有什么直接的促进作用吗</li>
<li>所有的KR合起来，需要构成对O的充分条件。如果所有 KR 都 1.0 分完成，那么 O 必将实现。这一点很要害啊，实践中很多KR也就是一些对自己有利的必要条件而已。估计很多团队也是对 硬骨头 避而不谈。OKR 这一工具的目的就是发现公司层面缺乏对“房间里的大象”的关注和投入的</li>
<li>committed OKR以达到1.0为宗旨。如果团队达不到，那么需要尽早升级。升级不仅是常见的，还是必须的。无论是你对OKR不认同，优先级问题，还是有冲突，还是资源不够，管理层的义务是尽可能在OKR周期内发现问题并投入解决。</li>
<li>达不到 1.0 的committed OKR需要postmortem。Doerr说这样做不是为了惩罚团队，而是看到底是计划环节，还是执行过程中出了问题。但往往OKR更多的被用成敲打的工具？哈哈</li>
<li>Aspirational OKR 可以长期保留，成为下一个周期的基础。如果没有进展就丢弃，说明要么你这目标设定有问题，要么优先级设定有问题，要么资源调度有问题，要么对事物的认知出了根本问题。</li>
<li>Aspirational OKR在团队之间平移是OK的。manager不应该假设它们得到的支持永远是非常充足的。</li>
<li>简单衡量(The litmus test)：如果每个KR都是季度末最后一天完成，那么说明压根没计划。</li>
<li>如果重要团队职能没能在OKR里体现，就添加更多的OKR</li>
</ul>
<p>OKR这一套的的<a href="https://www.whatmatters.com/articles/the-origin-story">祖师爷</a> 是Intel 老总，匈牙利Holocaust难民 Andy Grove 。我看了下其实老爷子没把这一套说得那么玄乎，就是 8085 处理器当年需要每个季度出货，就搞了一套分摊生产的机制。这也解释了为啥OKR往往都是年度、季度为单位的。因为财报也是这个节奏嘛。他举例说，O是Intel芯片占领中端市场，那么KR就是8085 处理器 10个 新设计。我寻思这也不能必然支撑“占领”这一目标啊？万一市场不认帐怎么办？老爷子又说了，KR可以是 milestone，这一波不行下一波继续加码不就行了🤣 主要是“占领”这一说法是可以argue的，但是10个就是10个，结果只会是达成是否yes/no，可以 measure 的。</p>
<p>这篇讲OKR渊源的文章里，有一句话说得特别好</p>
<blockquote>
<p>OKRs overturned the top-down management system. Suddenly, workers were valued by what they accomplished, not by their background, degree, or title. With OKRs, execution is more important than mere ideas, <br />
OKR改变了人们马首是瞻的管理模式。员工的价值衡量以完成目标为准，而不再是背景、学历、职衔。OKR体系下，执行比畅想更重要。</p>
</blockquote>
<p>那么话说回来，为啥OKR 杀死了 Google Reader？</p>
<p>因为 Larry Page 给全公司定的 O 是：亿级用户用户，越多越好。要做 google-scale 的产品</p>
<p>Google Reader受众是一小撮核心用户，虽然 engage 很高频，但是小众爱好的增长就是慢。当年 Google+ 势头被三哥吹上天，显然更有前途。Marissa Mayer是G家老人了(工号#20) 做 OKR 有一手，Google Reader显然是一个 business-as-usual 成熟产品了，所以开发团队都被挪用了，人都跑光了，据说它代码还不能跑在新款Google软件架构上（borg之类的），所以越来越没人关心。因为没人能靠Google Reader升职加薪，所以成了弃子。</p>
<p>说 OKR 🔪 了 Google Reader ，不是说 OKR不好，而是OKR作为一个框架，一套工具，它是中立的。</p>
<blockquote>
<p>OKRs help you hit every target — except the one that matters.<br />
OKR确保你命中目标，至于是不是重要目标就不得而知了</p>
</blockquote>
<p>或许Google Reader真的对于Google不重要。但是反过来，没有 Google Reader 真的对Google那么重要吗？G家还做了那么多 <a href="https://artsandculture.google.com/">arts project</a> 怎么就不砍掉呢？</p>
<p>所以我琢磨下来，OKR这套工具，在蓝海市场，销售向的行业里是非常有用的。它能聚焦业务，保持各团队对齐，排查执行环节问题是非常有效的</p>
<p>但前提是，你只缺执行吗？</p>
<p>另一个方面，对于 SRE 安全这类部门来说，它们的成功不在于本部门 执行有多好，而是在于其他部门的「下限」有多烂。有哪个敢给自己定一个全年100%不出漏洞不出问题的O？</p>
<p>这类 support, maintanence 和 backoffice 部门，本来就就是降低负收益，处理烂摊子的，它们存在的意义，就是把公司的潜在损失尽可能降低到最小</p>
<p>这个出发点来说，是不是应该把OKR设置成默认 -1.0 分，然后擦屁股得越干净越好？</p>
<p>胡思乱想又水了一篇，大家别当真</p></p>
            <div class="card-subtext muted-text">
              <p>Posted <time datetime="2025-10-09T14:49:00+08:00">2025-10-09</time></p>
<p>stderr</p>            </div>
          </article>
        </div>


        <!-- new article -->
        <div class="card blog-card">
          <article class="card-body">
            <a href="/2025/stdout-09"  rel="bookmark" >
              <h2 class="card-title">Fix WestData SN550/SN570 SSD slow read problem</h2>
            </a>
            <p class="card-text"><p>I had a painful slow game load experience during the past few days. In the beginning, I tried everything I can to tweak the Win10 system, cleanup the PC box, but the disk IO was always pegging at 2MB/s to 5MB/s at taskmgr.exe.</p>
<p>The real culprit? The WD ssd I bought some years ago. Turns out if the data was old enough, the firmware had real trouble recognizing the volatile bits and throttles the throughput.</p>
<p>The fix? read the file again and write them back. Since my disk is almost full (another reason here), a inline replace would be prefered.</p>
<p>I spent next few hours vibe coding an HTML5 utility</p>
<p><a href="https://lab.est.im/ssd-warmup/">https://lab.est.im/ssd-warmup/</a></p>
<p>The code works as intended, however the File System API in Javascript writes a .crswap file instead of the original. <br />
It's a <a href="https://issues.chromium.org/issues/40777458">Chromium thing</a> thus makes the JS method completely useless.</p>
<p>I wrote a Python version instead.</p>
<p><a href="https://github.com/est/snippets/blob/master/ssd-warmup/ssd_warmup.py">https://github.com/est/snippets/blob/master/ssd-warmup/ssd_warmup.py</a></p>
<p>The AI wrote code using <code>os.path.walk</code> and I changed it with <code>pathlib.Path</code>, which was more pleasant with its <code>rglob</code> method.</p>
<p>You can try it:</p>
<p><code>python ssd_warmup.py /path/to/fix/</code></p>
<p>The lesson learned: Don't buy Sandick or WestData. At least the low-end ones.</p></p>
            <div class="card-subtext muted-text">
              <p>Posted <time datetime="2025-10-09T10:30:00+08:00">2025-10-09</time></p>
<p>stdout</p>            </div>
          </article>
        </div>


        <!-- new article -->
        <div class="card blog-card">
          <article class="card-body">
            <a href="/2025/stdin-09"  rel="bookmark" >
              <h2 class="card-title">CBOR 和 MsgPack 是一回事</h2>
            </a>
            <p class="card-text"><p>翻旧账的时候无意中<a href="https://news.ycombinator.com/item?id=42664005">发现</a>的。MessagePack的实现者 mdhb 说：</p>
<blockquote>
<p>Disclaimer: I wrote and maintain a MessagePack implementation.<br />
CBOR is MessagePack. The story is that Carsten Bormann wanted to create an IETF standardized MP version, the creators asked him not to (after he acted in pretty bad faith), he forked off a version, added some very ill-advised tweaks, named it after himself, and submitted it anyway.<br />
I wrote this up years ago (https://news.ycombinator.com/item?id=14072598), and since then the only thing they've addressed is undefined behavior when a decoder encounters an unknown simple value.</p>
</blockquote>
<p><a href="https://news.ycombinator.com/item?id=43229259">以及</a>：</p>
<blockquote>
<p>There's no reason an MP implementation has to be slower than a CBOR implementation. If a given library wanted to be very fast it could be. If anything, the fact that CBOR more or less requires you to allocate should put a ceiling on how fast it can really be. Or, put another way, benchmarks of dynamic language implementations of a serialization format aren't a high signal indication of its speed ceiling. If you use a dynamic language and speed is a concern to this degree, you'd write an adapter yourself, probably building on one of the low level implementations.<br />
That said, people are usually disappointed by MP's speed over JSON. A lot of engineering hours have gone into making JSON fast, to the point where I don't think it ever made sense to choose MP over it for speed reasons (there are other good reasons). Other posters here have pointed out that your metrics are usually dominated by something else.<br />
But finally, CBOR is fine! The implementations are good and it's widely used. Users of CBOR and MP alike will probably have very similar experiences unless you have a niche use case (on an embedded device that can't allocate, you really need bignums, etc).</p>
</blockquote>
<p>看它又翻了一堆旧帐。。hmmmm。。。好吧。</p>
<p>最近在看 <a href="https://atproto.com/specs/data-model">ATProto</a> 发现它既可以 CBOR 也可以 JSON </p></p>
            <div class="card-subtext muted-text">
              <p>Posted <time datetime="2025-09-27T20:01:00+08:00">2025-09-27</time></p>
<p>stdin</p>            </div>
          </article>
        </div>


        <!-- new article -->
        <div class="card blog-card">
          <article class="card-body">
            <a href="/2025/stdin-08"  rel="bookmark" >
              <h2 class="card-title">大集团，小组织和原子个体</h2>
            </a>
            <p class="card-text"><p>来自 <a href="https://mathstodon.xyz/@tao/115259943398316677">Terence Tao</a>，<a href="https://mathstodon.xyz/@tao/115259943398316677">HN上</a>讨论很热烈</p>
<p>Some loosely organized thoughts on the current Zeitgeist.  They were inspired by the response to my recent meta-project mentioned in my previous post https://mathstodon.xyz/@tao/115254145226514817, where within 24 hours I became aware of a large number of ongoing small-scale collaborative math projects with their own modest but active community (now listed at https://mathoverflow.net/questions/500720/list-of-crowdsourced-math-projects-actively-seeking-participants ); but they are from the perspective of a human rather than a mathematician.</p>
<p>As a crude first approximation, one can think of human society as the interaction between entities at four different scales:</p>
<ol>
<li>
<p>Individual humans</p>
</li>
<li>
<p>Small organized groups of humans (e.g., close or extended family; friends; local social or religious organizations; informal sports clubs; small businesses and non-profits; ad hoc collaborations on small projects; small online communities)</p>
</li>
<li>
<p>Large organized groups of humans (e.g., large companies; governments; global institutions; professional sports clubs; large political parties or movements; large social media sites)</p>
</li>
<li>
<p>Large complex systems (e.g., the global economy; the environment; the geopolitical climate; popular culture and "viral" topics; the collective state of science and technology).</p>
</li>
</ol>
<p>An individual human without any of the support provided by larger organized groups is only able to exist at quite primitive levels, as any number of pieces of post-apocalyptic fiction can portray.  Both small and large organized groups offer significant economies of scale and division of labor that provide most of the material conveniences that we take for granted in the modern world: abundant food, access to power, clean water, internet; cheap, safe and affordable long distance travel; and so forth. It is also only through such groups that one can meaningfully interact with (and even influence) the largest scale systems that humans are part of.</p>
<p>But the benefits and dynamics of small and large groups are quite different.  Small organized groups offer some economy of scale, but - being essentially below Dunbar's number https://en.wikipedia.org/wiki/Dunbar%27s_number in size - also fill social and emotional needs, and the average participant in such groups can feel connected to such groups and able to have real influence on their direction.  Their dynamics can range anywhere from extremely healthy to extremely dysfunctional and toxic, or anything in between; but in the latter cases there is real possibility of individuals able to effect change in the organization (or at least to escape it and leave it to fail on its own).</p>
<p>Large organized groups can offer substantially more economies of scale, and so can outcompete small organizations based on the economic goods they offer.  They also have more significant impact on global systems than either average individuals or small organizations.  But the social and emotional services they provide are significantly less satisfying and authentic.  And unless an individual is extremely wealthy, well-connected, or popular, they are unlikely to have any influence on the direction of such a large organization, except possibly through small organizations acting as intermediaries.  In particular, when a large organization becomes dysfunctional, it can be an extremely frustrating task to try to correct its course (and if it is extremely large, other options such as escaping it or leaving it to fail are also highly problematic).</p>
<p>My tentative theory is that the systems, incentives, and technologies in modern world have managed to slightly empower the individual, and massively empower large organizations, but at the significant expense of small organizations, whose role in the human societal ecosystem has thus shrunk significantly, with many small organizations either weakening in influence or transitioning to (or absorbed by) large organizations.  While this imbalanced system does provide significant material comforts (albeit distributed rather unequally) and some limited feeling of agency, it has led at the level of the individual to feelings of disconnection, alienation, loneliness, and cynicism or pessimism about the ability to influence future events or meet major challenges, except perhaps through the often ruthless competition to become wealthy or influential enough to gain, as an individual, a status comparable to a small or even large organization.  And larger organizations have begun to imperfectly step in the void formed by the absence of small communities, providing synthetic social or emotional goods that are, roughly speaking, to more authentic such products as highly processed "junk" food is to more nutritious fare, due to the inherently impersonal nature of such organizations (particularly in the modern era of advanced algorithms and AI, which when left to their own devices tend to exacerbate the trends listed above).  </p>
<p>Much of the current debate on societal issues is then framed as conflicts between large organizations (e.g., opposing political parties, or extremely powerful or wealthy individuals with a status comparable to such organizations), conflicts between large organizations and average individuals, or a yearning for a return to a more traditional era where legacy small organizations recovered their former role.  While these are valid framings, I think one aspect we could highlight more is the valuable (though usually non-economic) roles played by emerging grassroots organizations, both in providing "softer" benefits to individuals (such as a sense of purpose, and belonging) and as a way to meaningfully connect with larger organizations and systems; and be more aware of what the tradeoffs are when converting such an organization to a larger one (or component of a larger organization).  </p>
<p>读完之后很惆怅。<a href="https://blog.est.im/202101/stderr-001">双亲+子女组成核心家庭</a> 里Michelle Obama说的那句话犹在耳畔。 </p>
<p>人存在的意义和价值是什么？大多数时候，是由TA所在社会群体里的（某种形式的）地位决定的。</p>
<p>大集团往往是纯粹的经济价值来源和利益机器</p>
<p>小组织给人归属感</p>
<p>个体的结局只有一个——孤单</p>
<p>想到这里，突然又手痒想键政了。秦汉公民兵的崩坏，被世家大族吸收消化；六镇府兵制的隋唐，不过是回光返照，最后不得不换成雇佣兵和藩镇。到了大怂国感觉汉人是完全不会打仗了，这也跟山河四省彻底原子化，科举这个上升通道沦为「个体」刷分机器有莫大的干系。小组织（户）和大集团（族）都完蛋，加上打压工商业，无法形成新的行会 - 商团 乃至财富汇集托举的 文艺 - 科学 团体，整个社会结构要么是男耕女织的这种极端原子化的小农家庭，要么是皇权这种巨无霸；文官集团彻底被以个体利益出发的党争玩坏。整体民心是个什么状态呢？一个民族，一个国家里的每个个体，既无法从组织里得到利益，也无法得到归属感，反正生活都是苦和累，今朝有酒今朝醉，天子换谁来当都一个屌样，那么结论很容易得出：整个汉地的「自然组织度」约等于0 。朱88的军户制度，也是行政和官僚手段强行拉高组织度一种无奈，但是最后还是被更高组织度的八旗吊打。</p>
<p>不得不说老外的 <a href="https://press.uchicago.edu/Misc/Chicago/805328.html">civil society 这一套说法</a> 还是很有道理的</p>
<p>要说这一切的罪恶之源是什么呢？先来想去，铁犁+纺车，从井田制崩坏就开始了？</p>
<p>为啥孔老二崇周礼？因为当年的农业生产是纯纯人力，得分工和群体劳动才能生存，国君祭天是一件严肃的生产分配大会，而不是后来流于礼节形式。为啥游牧部落总是能找到机会在某一个点突破防线？因为轮牧制度是根本，只要部落之间平息仇杀一致对外，就可以凭借天生的高组织度完成更复杂的战术和战略目标。</p>
<p>所以21世纪的铁犁是什么呢？AI？</p>
<p>不敢想不敢想。看着孩子现在 pad 上安装了豆包、千问、deepseek等众多app，我寻思，可能人类社会连父母和后代的养育联系，可能在未来某一个时刻都要断掉了吧。</p>
<p>呃，网上其实现在已经是这个风气了，原生家庭的“罪”罄竹难书，老登只有爆金币一个用途了。</p></p>
            <div class="card-subtext muted-text">
              <p>Posted <time datetime="2025-09-25T10:27:00+08:00">2025-09-25</time></p>
<p>stdin</p>            </div>
          </article>
        </div>


        <!-- new article -->
        <div class="card blog-card">
          <article class="card-body">
            <a href="/2025/stdout-08"  rel="bookmark" >
              <h2 class="card-title">xHTML5</h2>
            </a>
            <p class="card-text"><p>有 ChatGPT学姿势就是快</p>
<pre><code class="language-html">&lt;!DOCTYPE html [
  &lt;!ENTITY myEntity &quot;Hello World&quot;&gt;
  &lt;!ENTITY wow &quot;alert('hi')&quot;&gt;
]&gt;
&lt;html xmlns=&quot;http://www.w3.org/1999/xhtml&quot;&gt;
&lt;body&gt;
  &amp;myEntity;
  &lt;script&gt;
    &amp;wow;
  &lt;/script&gt;

&lt;/body&gt;
&lt;/html&gt;
</code></pre>
<p>保存到本地 1.xhtml，双击浏览器打开。谁能想到这也行？xml entity 还可以这样玩？</p>
<p>只要MIME为 <code>application/xhtml+xml</code> 就可以把HTML5当XML渲染。</p>
<p>部署了个在线demo： <a href="https://lab.est.im/svg/entity.xhtml">https://lab.est.im/svg/entity.xhtml</a></p>
<p>不敢相信自己眼睛，确认下是HTML5:</p>
<ul>
<li><code>document.compatMode</code> 返回 <code>CSS1Compat</code> 没问题</li>
<li><code>ocument.doctype</code> 返回 <code>&lt;!DOCTYPE html&gt;</code> 没毛病</li>
</ul>
<p>如果是老的兼容模式：</p>
<ul>
<li><code>document.compatMode</code> 为 <code>BackCompat</code></li>
<li><code>document.doctype.publicId</code> 为 <code>-//W3C//DTD HTML 4.01//EN</code></li>
<li><code>document.doctype.systemId</code> 为 <code>http://www.w3.org/TR/html4/strict.dtd</code></li>
</ul>
<p>思路打开了。哈哈</p></p>
            <div class="card-subtext muted-text">
              <p>Posted <time datetime="2025-09-15T00:12:00+08:00">2025-09-15</time></p>
<p>stdout</p>            </div>
          </article>
        </div>


        <!-- new article -->
        <div class="card blog-card">
          <article class="card-body">
            <a href="/2025/stdout-07"  rel="bookmark" >
              <h2 class="card-title">disqus已卸载，手搓了套blog评论系统 - req4cmt</h2>
            </a>
            <p class="card-text"><p>一直用 disqus 主要是觉得方便（懒）。但是自从被墙了就很不方便了。加上近期开始强制插入广告，就更讨厌了</p>
<p>想找个替代品，很多基于 github 的，在 issue 盖楼，我觉得不方便备份，希望是能直接写入 repo的。这样一个 git clone 就搬家了。更不用说几乎都是基于 OAuth 的 github 登录实际上能拿到你所有 <code>repo</code> 的 scope，也就是能读写你所有公开（甚至私有）仓库内容。我一般都不点</p>
<p>于是决定手搓一个。</p>
<p>首先考虑的就是如何把内容写入 git repo。这个在做 <a href="https://blog.est.im/2025/stdout-05">gitweets</a> 已经调研尝试过了。</p>
<p>本着在 cloudflare worker 白嫖的心态，这种 serverless 的环境肯定不允许装 git 命令行或者 libgit 这种 .so，所以考虑 pure python 的 <a href="https://github.com/jelmer/dulwich">dulwich</a>。折腾了一下 python binding 发现CF居然是个WASM转译。那还不如js。还好nodejs生态也很丰富，有个纯js的实现 <a href="https://isomorphic-git.org/">isomorphic-git</a> 。</p>
<p>然后手搓了一下发现需要个 memfs 在内存里模拟文件IO。</p>
<p>其次是如何读取内容，评论列表以 <code>域名/路径.jsonl</code> 格式保存为纯文本，一行一条评论JSON，方便diff。将来可以做成 pull request 当成 moderation</p>
<p>本来想通过 git-http 来读文件，发现太慢了。干脆走捷径直接反代 <code>https://raw.githubusercontent.com/</code> 就行。本来也不用反代，一是这个域名被DNS屏蔽，二是加一个该死的CORS头才能跨域。</p>
<p>跑通之后接着就模仿disqus实现页面一段.js嵌入，渲染表单，展示评论列表等等，我的 js/css 实在捉急就搓了套最基础的。</p>
<p>能用就行！</p>
<p>防止spam这方面也没多想，看很多人说做 hidden input 就能拦住绝大部分，那就先这样跑着。除了评论框这个 <code>textarea</code> 甚至名字都是选填</p>
<p>尽可能做兼容，让在没有 .js 的情况下也能提交表单。当然得在嵌入页面的时候弄 <code>&lt;noscript&gt;</code></p>
<p>该项目严重依赖 cloudflare 和 github 两位赛博菩萨的免费额度，所以请求过多会被控频。实在不行弄个KV队列之类的。但是我这博客这么冷清，多虑了？</p>
<p>最后，把 disqus 老的评论都导出来了。毕竟是多年的回忆。</p>
<p>项目放在 <a href="https://github.com/est/req4cmt">https://github.com/est/req4cmt</a> 欢迎点评。</p></p>
            <div class="card-subtext muted-text">
              <p>Posted <time datetime="2025-09-10T22:38:00+08:00">2025-09-10</time></p>
<p>stdout</p>            </div>
          </article>
        </div>


        <!-- new article -->
        <div class="card blog-card">
          <article class="card-body">
            <a href="/2025/stdout-06"  rel="bookmark" >
              <h2 class="card-title">抗日</h2>
            </a>
            <p class="card-text"><p>看完阅兵式直播，记录一些最近几年才了解到的抗战细节：</p>
<ul>
<li><code>1941年4月13日</code>，苏联承认伪满洲国</li>
<li><code>1945年2月08日</code>，雅尔塔会议，罗斯福同意斯大林，保障大连港、中东铁路、南满铁路的利益，以及恢复俄罗斯海军在旅顺口的租赁  <br />
<img alt="Yalta Conference" src="https://upload.wikimedia.org/wikipedia/commons/thumb/d/d2/Yalta_summit_1945_with_Churchill%2C_Roosevelt%2C_Stalin.jpg/330px-Yalta_summit_1945_with_Churchill%2C_Roosevelt%2C_Stalin.jpg" /><br />
-<code>1945年6月24日</code>，苏联在莫斯科红场举行「伟大的卫国战争」胜利阅兵仪式，🇯🇵帝国陆军武官<code>矢部忠太</code>，帝国海军武官 <code>臼井淑郎</code>作为嘉宾受邀列席检阅红军。<br />
<img alt="" src="https://q0.itc.cn/q_70/images03/20250318/21d1f83e535a4d338b7ef9e4b51614b3.jpeg" /></li>
</ul>
<p><img referrerpolicy="no-referrer" width="600" src="http://i0.hdslb.com/bfs/new_dyn/343e8081690f82fefdc150af38c222f3518085624.jpg" /><br />
- <code>1945年8月06日</code>，美军用「Little Boy」核平广岛<br />
- <code>1945年8月08日</code>，苏联撕毁 《苏日中立条约》向🇯🇵宣战<br />
- <code>1945年8月09日</code>，美军用「Fat Man」核平长崎<br />
- <code>1945年9月02日</code>，🇯🇵在东京湾「USS Missouri」战列舰上向盟军投降<br />
- <code>1955年5月26日</code>，12万苏军的最后一批撤离旅顺、大连。至此大陆外国驻军清零。</p>
<p>东北就是东亚的波兰？</p></p>
            <div class="card-subtext muted-text">
              <p>Posted <time datetime="2025-09-03T11:34:00+08:00">2025-09-03</time></p>
<p>stdout</p>            </div>
          </article>
        </div>


        <!-- new article -->
        <div class="card blog-card">
          <article class="card-body">
            <a href="/2025/stdout-05"  rel="bookmark" >
              <h2 class="card-title">gitweets：单html实现独立微博，拿git历史当feed流发推</h2>
            </a>
            <p class="card-text"><p>twitter争议不断持续多年，先是各种 cancel culture 闹得动静很大，被一龙马买了之后更甚，社区分裂到 mstdn nostr bsky支流，各种话题炒上天，在众多替代品里，2022年看到个<a href="https://twitter.com/bcrypt/status/1588416861552582657">最别具一格</a>的：</p>
<p>拿 git 当微博使</p>
<ul>
<li>发推： <code>git commit --allow-empty</code></li>
<li>加关注： <code>git remote add &lt;alias&gt; &lt;their fork url&gt;</code></li>
<li>转发： <code>git cherry-pick &lt;their "tweet"&gt;</code></li>
</ul>
<p>脑洞大开。而且git基于merkle tree的，p2p 历史不可篡改，有web3那味了。</p>
<p>当时就饶有兴趣，挖了个坑准备搓个web界面。但是限于涣散的注意力，以及对css这种抽象排版玩不转，一直拖沓没做好。</p>
<p>周末心血来潮，外带 AI 工具加持，进展神速。目前已经基本可用。</p>
<p>项目叫 gitweets ，意思是用 git 发 tweets，网址在 <a href="https://f.est.im/">https://f.est.im/</a> 。二级域名 <code>f</code> 即 <code>feed</code> ，<code>f.est</code> 也就是 fest 表示。。。 盛会的意思。 </p>
<h3>feature list</h3>
<ol>
<li>把任意 github repo 渲染成微博</li>
<li>给任意 github repo 发推。其原理是，通过REST API新增一条 commit 。</li>
<li><a href="https://f.est.im/est/e0d4c46445517ba52ceda06d788e09760aaccce5">发图</a>！如果 commit message 以冒号结尾，而且恰好也在本次新增加了位于 static 下面的图片文件 那么会尝试去加载图片作为附件渲染</li>
<li>写 commit 基于 OAuth app 实现。浏览器记录 access_token 到 cookie，理论上可用 8个小时。过期重登</li>
<li>如果你的 commit 有是通过 <code>-S</code> 参数提交带签名 ，那么展示为蓝色表示verified</li>
</ol>
<h3>记录一些坑</h3>
<ol>
<li>OAuth app vs Github App。前者是代客做事；后者是独立主体单独账号，类人行为，多用于 CI/CD</li>
<li>OAuth app 的 <code>scope</code> 如果是 <code>repo</code> 可以读写你所有仓库代码，包括私有仓库！网上的很多基于 github 的第三方评论系统有这个隐患！</li>
<li>我这里用的是 <code>public_repo</code>，读写所有公开仓库。毕竟 github是个开源社区，拿公开git来当feed使，要安全一些。</li>
<li>更安全的办法是只能读写单个指定的repo。要实现API读写git，在github有下列几种方法：<ul>
<li>REST API。可以用 fine grained PAT 读写一个repo</li>
<li>GraphQL API。</li>
<li>git 协议。走 <code>github.com:22</code> 端口。可以采用 deploy key 或者私人账号 ssh key</li>
<li>git-http。走 <code>https://github.com:443</code></li>
</ul>
</li>
<li>Private Access Token （缩写 PAT） 可以完全控制个人或者团队账号，fine grained PAT 可以只控制指定的几个仓库</li>
<li>deploy key默认只读，可以改成读写，一库一用，不能复用</li>
<li>REST API 列举 commits 不能获得当前 commit 改了哪些文件。需要额外N+1每个commit再次查询详情。背后的原因估计是 git 内部 ref 和 blob 是严格区分的。甚至可能是分开存的数据库表</li>
<li>网站是跑在赛博菩萨 cloudflare worker 上的。这种所谓“serverless”平台很强大了。功能齐全没啥缺的。甚至可以发起 tcp 连接。</li>
<li>本来计划走 git-ssh 或者 git-http 协议，想了下js操作binary太复杂了，弄个 libgit2 之类的库估计很重。还是REST方便</li>
<li>REST API 新增一个 empty commit 有多复杂？ 1. 获得当前branch 的 sha 2. 获得该 sha 的 tree 3. 新增一个 sha+tree 的commit 4. 把 ref 指向第三步的 sha 。啊，就不能一步完成么。下次有机会看看GraphQL 能不能一次调用完成</li>
<li>Github 的API 强制要求 User-Agent 。你可以乱写但是不能没有</li>
<li>Github 虽然返回了 <code>Access-Control-Allow-Origin: *</code>，但是现代浏览器他妈的不认这个 <code>*</code> 。所以在浏览器只能匿名调用 <code>GET</code> ，如果 <code>POST</code>， <code>PATCH</code> 带了 <code>credentials: "include"</code> 直接拒绝。网站必须显式指定允许哪个具体的 origin </li>
<li>cloudflare的 <code>Response.redirect('/')</code> 直接挂掉。原来是 3xx 跳转不允许相对路径。</li>
</ol>
<h3>why？</h3>
<p>由于习惯，古法写web，一个html包含了 css js 。无二次加载，无第三方依赖库。除了不能写死的全部写死 🤣。无需build。</p>
<p>源码放在 <a href="https://github.com/est/gitweets/">https://github.com/est/gitweets/</a> 。该仓库的 commit 历史也作为feed展示在 <a href="https://f.est.im/">https://f.est.im/</a> </p>
<p>接下来准备用类似的思路实现网站评论系统，代替现在的 disqus ，虽然它是免费的，但是广告太多了。</p>
<p>可能有人要问：why ？闲的蛋痛？</p>
<p>我想，首先的确蛋痛，because we can。其次是不想在平台，处处受人限制。然后也是最重要的，self-host。所有数据资料都在一个repo打包带走，备份什么的很方便。比如以前wordpress受众多功能全，但是后来大家都 hexo 之类的静态blog了。</p>
<p>我心目中 gitweets 就是“静态”微博的一种。虽然它现在还是依赖 github API。等有空了可以试试生成纯静态页面。</p>
<h3>ToDo</h3>
<ol>
<li>如何发视频 音频</li>
<li>如何转发</li>
<li>如何混合展示多个repo的feed。基于 pull request ？</li>
</ol>
<p>欢迎评论或者提 <a href="https://github.com/est/gitweets/issues">issue</a></p></p>
            <div class="card-subtext muted-text">
              <p>Posted <time datetime="2025-08-17T00:00:00+08:00">2025-08-17</time></p>
<p>stdout</p>            </div>
          </article>
        </div>


        <!-- new article -->
        <div class="card blog-card">
          <article class="card-body">
            <a href="/2025/stderr-04"  rel="bookmark" >
              <h2 class="card-title">敬语和咒语</h2>
            </a>
            <p class="card-text"><p>因为旅游瞎逛，才了解有这样一种东西：</p>
<p><img referrerpolicy="no-referrer" src="http://5b0988e595225.cdn.sohucs.com/images/20180918/c5160e176d4a482cbc50887cccd214bc.jpeg" /></p>
<blockquote>
<p>字库塔又叫“惜字宫”、“敬字亭”、“惜字塔”、“焚字炉”等，它是收存和焚烧字纸的专用设施，沿自古人有“敬惜字纸”之风，“惜字得福”之说。而在我国传统文化中有一种独特习俗——“惜字如金”，“敬天惜字”。<br />
于是，焚烧字纸就变得非常的郑重，不但有专门的礼仪，还建有专门的场所和设施，于是“字库塔”就应运而生，也就成了古人专门修建来焚烧字纸的小型建筑。据史料记载，字库塔始建于宋代，到元明清时已经相当普及了。<br />
在古代，民间有种说法，糟蹋字纸会生疮害病、瞎眼睛，受到惩罚并祸及子孙等，因此字纸不可秽用，而应该“羽化成蝶”，而糟蹋字纸会得罪神灵，受到惩罚并祸及子孙。所有用过的字纸或废书，都要统一收集起来，放到一个地方集中焚化。</p>
</blockquote>
<p>小时候，一直把语言和文字当成知识的载体，是语文和英语这样的学科，一种很客观的工具。没想到古人对待文字是如此的神圣，甚至达到需要单独做祭坛的程度。最近几年也一直有感触，语言和文字肯定以及必然在上古时期是有魔法的。</p>
<p>这个魔法怎么来的，比如人类最原始，最古老的语言词汇，肯定是 妈妈，爸爸。</p>
<p>一个孩子叫你一声父母，你身上就多出来一份悲怜和责任。据我观察，很多成年人和家庭，都是因为孩子，苦苦撑下去。没有软肋的中年人是无敌的。</p>
<p>所以我觉得，某种程度上，这个称谓是一种咒语。为什么是咒语？拿魔幻小说《哈利波特》为例，最入门的打架咒语就是 “除你武器” (Expelliarmus)。这是哈利的招牌咒语，作用是让对手手里的武器（通常是魔杖）飞出去，有时也会直接把人震退。如果你在网上或者现实中骂架，让对方直接破防的咒语是啥呢？</p>
<blockquote>
<p>我是你爹！</p>
</blockquote>
<p>对方要破除你这个咒语，那么多半会使出类似下面这样的咒语：</p>
<blockquote>
<p>我今天非教训你这孙子不可</p>
</blockquote>
<p>爹，孙子 这些人类最基础的代词，居然有如此调动情绪魔力。</p>
<p>又看到最近和长久以来一个被反复提起的话题：</p>
<p><a href="https://www.zhihu.com/question/1926331869202445867">媒体呼吁「同志」称呼重归主流</a></p>
<blockquote>
<p>曾几何时，招呼人无须刻意措辞，一声“同志”便可，听者坦然、舒泰。后来，经济发展、文化多元，称呼也花样百出，“先生”“小姐”“老板”满天飞，开初尚觉新鲜，久之不免腻味，尤其是“小姐”这一称呼，常给人轻薄之感。如今，“小姐”似乎被“美女”取代，后者也逐渐失掉了赞美之意，变成了泛称。<br />
称呼自有其潮流，随时代而动。譬如“同志”，在民风淳朴的年头，人们不论是在工作中，还是在生活里，都讲究人人平等，因而“同志”这种一视同仁的称呼也被长久使用，且“同志”也有志同道合之感。再如“师傅”，使用的时间也不短，于我个人而言倍觉亲切。我年轻时在机务段当过3年机车钳工学徒工，满师后又独立干了一年左右车辆修理活计。当时，早我几天入行的师兄师姐，我见了一律都得叫“师傅”。在技术为先的机车维修一线，学艺是头等大事，称呼关乎传道授业的礼仪，自然马虎不得。“师傅”之谓，是对有一技之长劳动者的尊称，也是对德厚者的敬重。几十年之后，虽然热火朝天的劳动场景已远去，但是这声“师傅”，我沿用至今。我想，只要对方形容不轻慢，精神不委琐，不论老少，皆可尊称一声“师傅”。</p>
</blockquote>
<p>中年人应该对这个最有感触的。小时候以为所有人都叫 叔叔阿姨 就够了。直到有一天，你被别人叫了 叔叔阿姨。身份的转变带来一个困境：原来的叔叔和阿姨，你如何称呼？</p>
<p>能否避免让别人觉得太老？能否不区分职业、职级？能否不区分性别？</p>
<p>有没有一个通用敬语？想来想去，排除上面的“同志”，似乎只有 老师？</p>
<p>没有一个咒语拿来起手破冰，所以一旦脱离了乡土的熟人社会，陌生的人际交往在大城市就很难发生。</p>
<p>身份认同、权力关系、情感负担，这些都是心理学上焦虑和矛盾的根源</p>
<p>想起一个孙猴子那个<a href="https://zh.wikisource.org/zh-hans/%E8%A5%BF%E6%B8%B8%E8%AE%B0/%E7%AC%AC017%E5%9B%9E">经典笑话</a></p>
<details>
  <summary>“原来你就是那闹天宫的弼马温么”</summary>
  <pre>
行者道：“是你也认不得你老外公哩。你老外公乃大唐上国驾前御弟三藏法师之徒弟，姓孙，名悟空行者。若问老孙的手段，说出来，教你魂飞魄散，死在眼前。”那怪道：“我不曾会，你有甚么手段，说来我听。”行者笑道：“我儿子，你站稳著，仔细听之。我：

自小神通手段高，随风变化逞英豪。
养性修真熬日月，跳出轮回把命逃。
一点诚心曾访道，灵台山上采药苗。
那山有个老仙长，寿年十万八千高。
老孙拜他为师父，指我长生路一条。
他说身内有丹药，外边采取枉徒劳。
得传大品天仙诀，若无根本实难熬。
回光内照宁心坐，身中日月坎离交。
万事不思全寡欲，六根清净体坚牢。
返老还童容易得，超凡入圣路非遥。
三年无漏成仙体，不同俗辈受煎熬。
十洲三岛还游戏，海角天涯转一遭。
活该三百多馀岁，不得飞升上九霄。
下海降龙真宝贝，才有金箍棒一条。
花果山前为帅首，水帘洞里聚群妖。
玉皇大帝传宣诏，封我齐天极品高。
几番大闹灵霄殿，数次曾偷王母桃。
天兵十万来降我，层层密密布枪刀。
战退天王归上界，哪吒负痛领兵逃。
显圣真君能变化，老孙硬赌跌平交。
道祖观音同玉帝，南天门上看降妖。
却被老君助一阵，二郎擒我到天曹。
将身绑在降妖柱，即命神兵把首枭。
刀砍锤敲不得坏，又教雷打火来烧。
老孙其实有手段，全然不怕半分毫。
送在老君炉里炼，六丁神火慢煎熬。
日满开炉我跳出，手持铁棒绕天跑。
纵横到处无遮挡，三十三天闹一遭。
我佛如来施法力，五行山压老孙腰。
整整压该五百载，幸逢三藏出唐朝。
吾今皈正西方去，转上雷音见玉毫。
你去乾坤四海问一问，我是历代驰名第一妖。”

那怪闻言笑道：“你原来是那闹天宫的弼马温么？”

行者最恼的是人叫他弼马温，听见这一声，心中大怒
</pre>
</details>

<p>这一切也发生在职场。现在流行把同事叫 “同学”。我对此能接受，但是总感觉哪哪不对。</p>
<p>比如你求其他部门的人办事，你又没身份来安排别人，叫 “同学” 恐怕不行吧？的还是叫 “大佬”？你也不清楚对方职级，叫 “同事” 会不会太对等了？</p>
<p>对于我这种社交白痴，万分纠结。</p>
<p>职场混久了，感悟很多事儿其实是跟业务无关的。规章制度更多的都围绕一个核心：不信任成本。官场也一样，不要看什么AI 智慧城市 什么的，哪里有那么多 intelligence。全都是 diligence 不够。</p>
<p>为什么 diligence  不够？现代社会分工太细，你使唤不动别人。</p>
<p>很多事你是有心无力的。</p>
<p>或许，离开了原生家庭，这个世界没有魔法了。</p></p>
            <div class="card-subtext muted-text">
              <p>Posted <time datetime="2025-08-12T00:00:00+08:00">2025-08-12</time></p>
<p>stderr</p>            </div>
          </article>
        </div>


        <!-- new article -->
        <div class="card blog-card">
          <article class="card-body">
            <a href="/2025/stdin-06"  rel="bookmark" >
              <h2 class="card-title">原研哉《棍子和碗》</h2>
            </a>
            <p class="card-text"><p>之前看到个 <a href="https://www.dedao.cn/share/course/article?id=D4vE8rn63yN5JA5544JOpoPzG0MdqB">棍子和碗</a> 的说法，印象很深，觉得很扯，总觉得哪里不对，但是没想明白。查了下居然是 原研哉 说的。也就是传说中200w给小米logo倒了个圆角的日本设计师。</p>
<blockquote>
<p>日本设计家原研哉有一个说法，他说，这个世界上,我们用的所有东西只有两样,一个是碗,一个是棍子。什么意思？<br />
碗，就是用它围合起来的那个内部空间。比如水缸、冰箱、液化气罐、汽车、房子、手机，本质上都是碗。它内部装了什么，决定它是什么。<br />
而棍子呢？就是用它去作用于其他东西。比如弓箭、螺丝刀、枪炮、键盘，本质上都是棍子。它作用于什么，才决定它是什么。<br />
其实，我们中国人在文化中也有类似的分类法。我们经常说一个词“器具”。所谓“器”，就是装东西的，就是原研哉说的“碗”；而“具”呢，就是作用于其他东西的，就是原研哉说的“棍子”。这两样东西合起来就是“器具”，也就是人类造出来的所有东西的统称了。<br />
之所以提这个分类方法，是想说，我们观察任何东西，都有两个角度，一个是看它内部装的是什么，就是它作为一只“碗”的特质。还有一个，就是看它作用于什么，就是它作为一支“棍子”的特质。<br />
比如说，我们了解一个人，当然可以把它看成一只碗，看他身体内部的状况，给他做体检，和他谈心，看他的所思所想，这是了解一个人的方法。但是我们也可以把他看成是一根棍子，在他周边的社会关系中进行访谈，看他干了什么，成就了谁，又祸害了谁，他在自己的社交网络里面填补了什么空白，他的每一个行动是在应对什么挑战。</p>
</blockquote>
<p>刚中午小憩的时候，突然想通了，这个二元论分类太内涵，太隐晦了。我不妨帮日本人把这个分类说得更直白一些：</p>
<ul>
<li>棍子就是 JJ</li>
<li>碗就是 子宫</li>
</ul></p>
            <div class="card-subtext muted-text">
              <p>Posted <time datetime="2025-06-18T13:55:00+08:00">2025-06-18</time></p>
<p>stdin</p>            </div>
          </article>
        </div>


        <!-- new article -->
        <div class="card blog-card">
          <article class="card-body">
            <a href="/2025/stdout-04"  rel="bookmark" >
              <h2 class="card-title">A single Python function for both async/sync</h2>
            </a>
            <p class="card-text"><p>Scenario: I often need to write Python functions like:</p>
<ol>
<li>take some parameters and format them</li>
<li>call an API with the formatted parameters</li>
<li>parse the result and return chosen values</li>
</ol>
<p>There's a huge problem in step #2.</p>
<p>In today's Python world, troubles arise because async/await are "infectious", In practice this function is splitted - like in Python stdlib, where a vanilla <code>method</code> and its async counterpart <code>amethod</code> often come in pairs. Package authors scramble to provide sync transport and another async transport. I discovered this ugly fact while reading the source code of<code>redis-py</code>, <code>httpx</code> and <code>elasticsearch-py</code>.  Duplicate and lookalike code was always written twice. All it takes is some random async IOs in one place and your code would be forced to change forever.</p>
<p>Is there a way to write the function in one place, but callable both with async and without?</p>
<p>I pondered this question for ages, and today I stumbled upon something interesting:</p>
<pre><code class="language-python">
  def s1():
    return asyncio.sleep(1)

  async def s2():
    return await async.sleep(1)
</code></pre>
<p>There's virtually no difference when calling <code>await s1()</code> and <code>await s2()</code></p>
<p>I vaguely remembered how Python’s coroutines were designed, and after some tinkering, I came up with this snippet:</p>
<pre><code class="language-python">
import asyncio, types, functools

def aa(f):
    &quot;&quot;&quot;
    make a function both awaitable and sync
    idk how to property name this. anti-asyncio (aa) maybe?
    &quot;&quot;&quot;
    @functools.wraps(f)
    def wrapper(func, *args, **kwargs):
        if asyncio.iscoroutinefunction(func):
            return types.coroutine(f)(func, *args, **kwargs)
        else:
            async def afunc(*a, **kw):
                return func(*a, **kw)
            g = types.coroutine(f)(afunc, *args, **kwargs)
            try:
                while True: next(g)
            except StopIteration as ex:
                return ex.value
    return wrapper


@aa
def my_func(func, *args, **kwargs):
    # prepare args, kwargs here
    # add a prefix `yield from` everywhere, for either sync/async
    result = yield from func(*args, **kwargs)
    # handle the result here
    return result


import httpx

# async
async def main():
    # the same as `await httpx.AsyncClient(timeout=3).get('https://est.im')`
    print(await my_func(httpx.AsyncClient(timeout=3).get, 'https://est.im/'))
asyncio.run(main())


# sync
print(my_func(httpx.get, 'https://est.im'))
# works the same as httpx.get('https://est.im')

</code></pre>
<p>The above shows a single function called <code>my_func</code>, dependency injection of an HTTP <code>get</code>  call of either sync/async, allows for customizable  pre- and post-processing logic, and returns the result with clean syntax.</p>
<p><strike>The only mental tax: inside <code>my_func</code>, you have to replace all <code>await</code> keyword with `yield from.</strike></p>
<p>Update 2025-05-16: The only mental tax: add a <code>yield from</code> prefix for every <code>func</code>calls for IO or API, either sync or async.</p>
<p>It solves all problems for my scenario and I’ve yet to find a simpler solution. If you have a good name for the <code>@aa</code> decorator please comment!</p>
<p>A sidenote, I am not sure if this method affects async schedulers and blocks something maybe? Like the <code>while True</code> might be a new kind of GIL. Also i haven't looked at problems with contextvars.</p></p>
            <div class="card-subtext muted-text">
              <p>Posted <time datetime="2025-05-14T14:35:00+08:00">2025-05-14</time></p>
<p>stdout</p>            </div>
          </article>
        </div>


        <!-- new article -->
        <div class="card blog-card">
          <article class="card-body">
            <a href="/2025/stdin-05"  rel="bookmark" >
              <h2 class="card-title">听 彭罗斯 吹了90分钟波函数的坍塌</h2>
            </a>
            <p class="card-text"><p><a href="https://www.youtube.com/watch?v=sGm505TFMbU">https://www.youtube.com/watch?v=sGm505TFMbU</a></p>
<p>Roger Penrose:  I don't believe it is consciousness that collapses the wave function, instead it's the collapse of the wave functions that produces consciousness</p>
<p>这句话很美妙啊。一下子把唯物和唯心给联系起来了。</p>
<p>我一直觉得，人的意识，就是因果律的推演。这个推演明显是一个离散的，有清晰步骤的，quantized 的和决定论的。</p>
<p>人的潜意识和直觉可能是概率的。</p>
<p>看完这个 90分钟的访谈，我大概明白为啥 量子力学 和 神棍 经常联系在一起了。一切都源于这个薛定谔方程 和 “观察者”</p>
<p>观察者不是一个真实存在的定义。你甚至无法严格定义 观察。欧美神棍一般喜欢往三位一体，意识，灵性上面靠。感觉物理世界是混沌的，一下子有了光，状态就坍缩了。哈哈哈。</p>
<p>国内的话 遇事不决，量子力学。民科重灾区。甚至还有量子佛学这种离谱的。</p>
<p>他还写了一本书，Fashion , Faith and Fantacy，fashion就是弦论，faith 就是量子力学。fantacy是宇宙膨胀理论。哈！</p></p>
            <div class="card-subtext muted-text">
              <p>Posted <time datetime="2025-04-30T16:31:00+08:00">2025-04-30</time></p>
<p>stdin</p>            </div>
          </article>
        </div>


        <!-- new article -->
        <div class="card blog-card">
          <article class="card-body">
            <a href="/2025/stdin-04"  rel="bookmark" >
              <h2 class="card-title">光 的本质是什么？</h2>
            </a>
            <p class="card-text"><p>来自 <a href="https://curtjaimungal.substack.com/p/well-technically">Curt Jaimungal</a></p>
<p><strong>Guy</strong>：什么是光？<br />
<strong>Chap</strong>：嗯，光是使物体可见的东西……<br />
<strong>Bloke</strong>：其实，光也可以是不可见光谱的一部分，比如紫外线和红外线……<br />
<strong>Lass</strong>：其实，光是光子，是电磁场中的一种波动……<br />
<strong>Dude</strong>：其实，光子是电磁场中量子化的波动……<br />
<strong>Fellow</strong>：其实，光子是与狄拉克方程的 <code>U(1)</code> 对称性相关的规范玻色子……<br />
<strong>Guy</strong>：其实，光子是与狄拉克方程的局域 <code>U(1)</code> 对称性相关联的规范玻色子……<br />
<strong>Fellow</strong>：其实，光子场来源于 <code>SU(2)ʟ × U(1)ʏ</code> 的一个子群——该子群保持希格斯真空态不变……<br />
<strong>Chap</strong>：其实，光子一种导数……<br />
<strong>Guy</strong>：其实，光子是为了使导数具有规范不变性而进行的修改，和刚才那位说的一样……<br />
<strong>Lass</strong>：其实，光子是庞加莱群的一个表示……<br />
<strong>Dude</strong>：其实，光子是庞加莱群的一个<em>不可约</em>表示……<br />
<strong>Fellow</strong>：其实，光子是庞加莱群不可约表示的一个<em>基底</em>元素……<br />
<strong>Guy</strong>：其实，光子是一个四维时空中无质量、自旋为 1 的粒子……<br />
<strong>Chap</strong>：其实，庞加莱群本来就在四维时空中，所以这是多余的细节……<br />
<strong>Bloke</strong>：其实，庞加莱群可以推广为任意维度 <code>d</code> 下的 <code>ISO(1,d−1)</code> 群……<br />
<strong>Lass</strong>：其实，<code>d</code> 必须大于 2，否则系统会出现简并结构……<br />
<strong>Dude</strong>：你才简并呢……哦不好意思……我是说，其实，光子是从超图的底层更新规则中涌现出来的一种现象……<br />
<strong>Fellow</strong>：其实，光子是统一规范势 <code>ϖ</code> 中与结构群 <code>Spin(4)</code> 子群相关的一个特定分量，而这些规范分量是通过观测嵌入被拉回到我们 4D 时空中的……<br />
<strong>Guy</strong>：其实，我们原本是在谈“光“这个词，它源自古英语 <em>lēoht</em>，意思是“亮度“……<br />
<strong>Chap</strong>：其实，它是原始日耳曼语 <em>leuhtam</em>，也表示亮度——所以你这次总算说对一件事……<br />
<strong>Dude</strong>：其实，词源更早是原始印欧语 <em>leuk-</em>，意为“光、亮“，同源词有拉丁语 <em>lux</em>、希腊语 <em>leukos</em>（意为“明亮、白“）……<br />
<strong>Lass</strong>：其实，还可以追溯到梵语 <em>rochis</em>，意思也是“亮度“……<br />
<strong>Dude</strong>：其实，你不该说“其实“，你破坏了节奏……<br />
<strong>Fellow</strong>：其实，词源顺序是：古英语 → 拉丁语 → 原始日耳曼语 → 希腊语 → 梵语 → 原始印欧语……<br />
<strong>Guy</strong>：其实，光是黑暗的缺失，而黑暗的定义是邪恶……<br />
<strong>Chap</strong>：其实，“邪恶“可以在扭量空间中建模为全纯对象……<br />
<strong>Bloke</strong>：其实，我们回到光子的问题，它在弦论中是 <code>H¹(T, O(−2))</code> 的一个上同调类，其中 <code>T</code> 是扭量空间，<code>O(−2)</code> 是一个全纯线丛，用于编码自旋为 1 的无质量场的螺旋度……<br />
<strong>Lass</strong>：其实，光子是共形场论中的边界激发……<br />
<strong>Dude</strong>：其实，光子是电子-正电子对自纠缠形成的涡旋结构，可能包含 <code>T4G</code> 框架下的虫洞子结构……<br />
<strong>Bloke</strong>：其实，光子是由弦局域场表示的，属于庞加莱群下零质量、无限自旋的表示……<br />
<strong>Fellow</strong>：其实，光子是一个沿零测地线传播的无质量粒子……<br />
<strong>Guy</strong>：其实，引力子和其他假设粒子也可以是无质量的，并沿零测地线传播，所以……<br />
<strong>Chap</strong>：其实，光子是光中微子的超对称伴粒子……<br />
<strong>Bloke</strong>：其实，在弦论中，光子是开放弦的第一个激发态，通常出现在 Neveu–Schwarz 扇区……<br />
<strong>Lass</strong>：其实，你们已经这样说了五十年……<br />
<strong>Dude</strong>：其实，我没说五十年，不然我一直在呼气早就不能呼吸了……<br />
<strong>Fellow</strong>：其实，你太咬文嚼字了……<br />
<strong>Dude</strong>：其实，我只是在追求表达的精确性……<br />
<strong>Chap</strong>：其实，你表现出对“其实”准确性的过度执着，并在越来越细微的细节上纠缠，以至于忽视了整体，这正是咬文嚼字的体现……<br />
<strong>Bloke</strong>：其实，你的指责本身是主观观点，而不是“其实”判断……<br />
<strong>Dude</strong>：好吧，这有点失控了。<br />
<strong>Chap</strong>：其实没有，一切都在掌控之中。<br />
<strong>Fellow</strong>：你是个傻子。<br />
<strong>Guy</strong>：而你没有动用你整个大脑。<br />
<strong>Fellow</strong>：这没关系，因为人类本来也只使用了 10% 的大脑……<br />
<strong>Bloke</strong>：……<br />
<em>（众人互望）</em><br />
<em>（沉默十秒）</em><br />
<strong>Fellow</strong>：……<br />
<strong>Guy</strong>：（看着 Dude）还是别说这个了——<br />
<strong>Dude</strong>：其实……</p>
<p>Curt Jaimungal 的视频看着真过瘾。我是从他 youtube 频道 <a href="https://www.youtube.com/watch?v=XcY3ZtgYis0">Theories of Everything 最近一期喷真理元素 (Veritasium)</a>  了解这个人物的。北美何教授。</p></p>
            <div class="card-subtext muted-text">
              <p>Posted <time datetime="2025-04-29T14:20:00+08:00">2025-04-29</time></p>
<p>stdin</p>            </div>
          </article>
        </div>

    </main>
    <nav class="pagination-nav side-padding">
<a href="/index.02.html" class="pagination-older">Older Posts &gt;</a>    </nav>


  </body>
</html>