<!DOCTYPE html>
<html>
  <head>
    <title>est の 输入 输出和出入</title>

    <meta charset="utf-8" />
    <meta http-equiv="x-ua-compatible" content="ie=edge">
      <meta http-equiv="Content-Security-Policy" content="frame-ancestors 'self' https://disqus.com https://player.bilibili.com https://www.youtube.com;">
    <link href="https://feeds.feedburner.com/initiative" type="application/rss+xml" rel="alternate" title="est の 输入 输出和出入 RSS Feed" />

    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="This blog is rated 🔞, viewer discretion is advised" />

    <meta property="og:url" content="https://blog.est.im">
    <meta property="og:type" content="website">
    <meta property="og:title" content="est の 输入 输出和出入">
    <meta property="og:description" content="This blog is rated 🔞, viewer discretion is advised">

    <link rel="stylesheet" href="/theme/css/normalize.min.css" />
    <link rel="stylesheet" href="/theme/css/style.css" />


    <style>
      body {
        background: #ecedef url("/theme/img/ignasi_pattern_s.png") repeat;
      }
    </style>
  </head>
  <body class="list-body">
<nav class="nav-bar side-padding">
  <h1 class="nav-header"><a href="/" class="nav-text">
    est の 输入 输出和出入
  </a></h1>
  <div class="hamburger-menu">
    <button>
      <span></span>
      <span></span>
    </button>
    <ul id="menu" class="hamburger-menu-overlay">
      <li><a href="/" class="hamburger-menu-overlay-link">Home</a></li>
      <li><a href="https://feeds.feedburner.com/initiative" class="hamburger-menu-overlay-link">RSS</a></li>
      <li><a href="/about" class="hamburger-menu-overlay-link">About</a></li>

      <li><a href="/category/archive" class="hamburger-menu-overlay-link">archive</a></li>
      <li><a href="/category/stderr" class="hamburger-menu-overlay-link">stderr</a></li>
      <li><a href="/category/stdin" class="hamburger-menu-overlay-link">stdin</a></li>
      <li><a href="/category/stdout" class="hamburger-menu-overlay-link">stdout</a></li>

    </ul>
  </div>
</nav>    <main class="card-container side-gutter">
      <header class="list-header">
        <p class="list-header-subtext">This blog is rated 🔞, viewer discretion is advised</p>
        <!-- <h1 class="list-header-title">est の 输入 输出和出入</h1> -->
      </header>


        <!-- new article -->
        <div class="card blog-card">
          <article class="card-body">
            <a href="/2021/stdout-027"  rel="bookmark" >
              <h2 class="card-title">Chrome 阉割指南</h2>
            </a>
            <p class="card-text"><p>不折腾不舒服。继之前 <a href="/2021/stdout-020">Edge调教</a> 之后记录一下 Chrome V70怎么阉割。</p>
<p>下载：</p>
<p><a href="https://dl.google.com/edgedl/release2/chrome/ALiXMYM2w8-h_70.0.3538.77/70.0.3538.77_chrome_installer.exe">win 32</a> | <a href="https://dl.google.com/edgedl/release2/chrome/AJ7ozxk4OLvN_70.0.3538.77/70.0.3538.77_chrome_installer.exe">win 64</a> | <a href="https://redirector.gvt1.com/release2/chrome/AIJolai8dEil_70.0.3538.67/GoogleChrome-70.0.3538.67.dmg">Mac</a></p>
<p>上面的链接已经年久失修了，对比了一下获取最新版本的脚本发现 Google 已经不提供老链接了。</p>
<pre><code>curl -vsk 'https://tools.google.com/service/update2' -HContent-Type:text/xml --data-binary &quot;&lt;?xml version='1.0' encoding='UTF-8'?&gt;
&lt;request protocol='3.0' sessionid='{est-blog}' installsource='ondemandcheckforupdate' dedup='cr'&gt;
&lt;os platform='mac' version='66.6.6666.66' arch='x64'/&gt;
&lt;app appid='com.google.Chrome' ap='' version='' nextversion='' lang='' brand='GGLS' client=''&gt;&lt;updatecheck/&gt;&lt;/app&gt;
&lt;/request&gt;&quot;
</code></pre>
<p>安装完毕之后</p>
<pre><code>cd '/Applications/Google Chrome.app/Contents'
touch Frameworks
sudo chown root:wheel Frameworks
sudo chmod 000 Frameworks

cd ~/Library/Google
rm -rf GoogleSoftwareUpdate
touch GoogleSoftwareUpdate
sudo chown root:wheel GoogleSoftwareUpdate
sudo chmod 000 GoogleSoftwareUpdate
</code></pre></p>
            <div class="card-subtext muted-text">
              <p>Posted <time datetime="2021-12-28T23:00:05+08:00">2021-12-28</time></p>
<p>stdout</p>            </div>
          </article>
        </div>


        <!-- new article -->
        <div class="card blog-card">
          <article class="card-body">
            <a href="/2021/stdout-026"  rel="bookmark" >
              <h2 class="card-title">认识「洋节」</h2>
            </a>
            <p class="card-text"><p>都说 xmas eve 是洋节，我们就来数一数到底有哪些洋节</p>
<ol>
<li>元旦1月1日。由北「洋」军阀袁世凯设立。依据是内务部总长朱启钤《定四季节假呈》，把原来农历（夏历）的正月初一的「元旦」挪用到了格里历一月一日。格里历(Gregorian calendar)引入中国是1912，元旦正式生效是1914年。</li>
<li>春节。严格的来说，传统春节是二十四节气中的“立春”，是太阳历。后来被袁世凯直接拍板成农历正月初一。而夏历正月初一一般被认为是最接近立春之朔日（月缺之日）。农历最后一次农历大改版为《授时历》，发生在崇祯二年（1629年）九月，由礼部左侍郎徐光启发起，编撰者：耶稣会的龙华民（西西里人）、罗雅谷（米兰人）、邓玉函（瑞士人）、汤若望（日耳曼人）。</li>
<li>生肖其实不跟农历绑定，而是跟 二十四节气绑定。二十四节气最后一次改版，也是上面那个《时宪历》那帮洋传教士定下来的。有意思的是，春分那一天恰好开始白羊座，其实我最近才知道二十四节气就约等于12星座，也就是黄道十二宫。如果要说农历《时宪历》含洋量太高，那么他之前的《授时历》编撰者是河北人郭守敬，生于元太宗(窝阔台)三年（1231年）于邢州，由他祖父郭荣(金国人)抚养成人，说起来这老兄甚至顺着蒙古人统治下的锡伯利亚去过北极科考，同一位尼泊尔建筑师阿尼哥合作搞过天文台，十分了得。</li>
<li>妇女节，全称为「“三八”国际劳动妇女节」。1857年3月8日，美国纽约的制衣和纺织女工走上街头，抗议恶劣的工作条件和低薪。尽管后来当局出动警察攻击并驱散了抗议人群，但这次抗议活动促成了两年后的3月第一个工会组织的建立。1917年3月8日，在俄罗斯帝国首都彼得格勒，纺织女工举行罢工及游行，遍及整个城市，也导致俄罗斯革命的开始。</li>
<li>清明节，二十四节气之一。太阳到达黄经15°</li>
<li>劳动节，1884年，劳动骑士团 Knights of Labor 倡导「8小时工作制」；10月，行会与工会联盟召开大会确定1886年5月1日为要求八小时工作制成为标准的日期，美国工会准备举行总罢工支援；1886年5月1日，数千名参加罢工和参加全美各地举行的集会的工人唱起了《八小时》（Eight Hour）一歌；接下来发生干草市场屠杀(Haymarket affair)。</li>
<li>端午节，据传是为了纪念<a href="/202006/stderr-008">恨国诗人屈原</a>，来自「蛮夷」楚国</li>
<li>儿童节。1949年11月国际民主妇女联合会在苏联莫斯科所召开的执行委员会议，会上为纪念悼念1942年捷克利迪策村对儿童的屠杀及伤害，以及全世界所有在法西斯侵略战争中死难的儿童，为保障世界各国儿童的生存权、保健权和受教育权及改善儿童的生活，决议以6月1日为国际儿童节。1949年12月23中央人民政府政务院第十二次政务会议于日通过了《全国年节及纪念日放假办法》，其中规定6月1日为儿童节。</li>
<li>建军节，由 契丹苏维埃共和国 (Kitajskaja Sovetskaja Respublika, Кита́йская Сове́тская Респу́блика) 于1933年6月决定，将8月1日定为中国工农红军的建军节。<br />
<img alt="" src="https://upload.wikimedia.org/wikipedia/commons/thumb/3/3a/National_Flag_of_Chinese_Soviet_Republic.svg/400px-National_Flag_of_Chinese_Soviet_Republic.svg.png" /></li>
<li>圣纪节，穆罕默德的诞辰与逝世恰巧都在伊斯兰教历三月十二日，回回三大节之一。<br />
<img alt="" src="http://wx1.sinaimg.cn/large/4b18c48fly4glz8qsahmzj20kw0fmdia.jpg" /></li>
</ol>
<p>再说一下真正被 appropriation 的「洋节」</p>
<ol>
<li>圣诞节。异教徒的节日，四舍五入冬至日，古埃及太阳神 Ra 的节日，被(东)罗马帝国拿来宣传成中东人耶稣的生日。。。摊手。。。比如犹太人就不过圣诞节，但是他们在这一天<a href="https://www.youtube.com/watch?v=Ny3PQOWsUGs">吃中餐</a></li>
<li>母亲节，由12岁女孩安娜·贾维斯(Anna Jarvis)发起，被商家利用，安娜用<a href="https://www.sohu.com/a/313400538_782639">下半辈子反对母亲节</a></li>
<li>父亲节：抄袭母亲节。</li>
</ol></p>
            <div class="card-subtext muted-text">
              <p>Posted <time datetime="2021-12-24T23:59:59+08:00">2021-12-24</time></p>
<p>stdout</p>            </div>
          </article>
        </div>


        <!-- new article -->
        <div class="card blog-card">
          <article class="card-body">
            <a href="/2021/stdout-025"  rel="bookmark" >
              <h2 class="card-title">如何可视化跟踪分析 Python import 耗时</h2>
            </a>
            <p class="card-text"><p>首先在本地安装 <code>pip install tuna</code></p>
<p>然后跑个分，需要 <code>CPython &gt;= 3.7</code>，输入</p>
<p><code>PYTHONPROFILEIMPORTTIME=1 python3 myscript.py 2&gt;1.log</code></p>
<p><img alt="tuna" src="https://camo.githubusercontent.com/d76ac242a42f9c394c1ae66da655173a51d9ed9c09107dd8d42b684c15aa2d05/68747470733a2f2f6e7363686c6f652e6769746875622e696f2f74756e612f666f6f2e706e67" /></p>
<p>然后 <code>tuna 1.log</code> ，会自动打开浏览器围观 <code>import</code> 耗时分布。</p></p>
            <div class="card-subtext muted-text">
              <p>Posted <time datetime="2021-12-22T14:00:28+08:00">2021-12-22</time></p>
<p>stdout</p>            </div>
          </article>
        </div>


        <!-- new article -->
        <div class="card blog-card">
          <article class="card-body">
            <a href="/2021/stdout-024"  rel="bookmark" >
              <h2 class="card-title">4句话自动换win10壁纸</h2>
            </a>
            <p class="card-text"><ol>
<li>获取当前用户 <code>sid</code>。cmd下设变量如此复杂。而且 <code>|</code> 的转义字符居然是 <code>^|</code></li>
<li>读取 LogonUI 的自动壁纸。<code>reg query</code>输出极其不友好。需要 tokens=3</li>
<li>设置为当前桌面。</li>
<li>刷新。这个属于按运气成功。真正刷新的需要调用 dll 。算了</li>
</ol>
<pre><code>for /f %%g in ('wmic useraccount where name^=&quot;%USERNAME%&quot; get sid ^| findstr ^S\-d*') do set USERSID=%%g
For /f &quot;tokens=3&quot; %%k IN ('reg query HKLM\SOFTWARE\Microsoft\Windows\CurrentVersion\Authentication\LogonUI\Creative\%USERSID%  /s /v  landscapeImage /t REG_SZ ^| findstr /ri &quot;REG_SZ&quot;') do set img_path=%%k
reg add &quot;HKEY_CURRENT_USER\Control Panel\Desktop&quot; /v Wallpaper /t REG_SZ /d %img_path% /f
RUNDLL32.EXE user32.dll,UpdatePerUserSystemParameters 
</code></pre>
<p><a href="/202104/stdout-005">之前的方法</a>搞复杂了</p></p>
            <div class="card-subtext muted-text">
              <p>Posted <time datetime="2021-12-08T21:39:36+08:00">2021-12-08</time></p>
<p>stderr</p>            </div>
          </article>
        </div>


        <!-- new article -->
        <div class="card blog-card">
          <article class="card-body">
            <a href="/2021/stdout-023"  rel="bookmark" >
              <h2 class="card-title">FastAPI/Starlette支持静态文件支持SPA</h2>
            </a>
            <p class="card-text"><p>FastAPI 官方支持 <code>from fastapi.staticfiles import StaticFiles</code> 充当一个静态文件服务器</p>
<p>其实实现是 starlette。这玩意可以在 <code>directory</code> 下放一个 <code>404.html</code>，恰好单页应用也需要用 <code>index.html</code> 充当所有 javascript 框架注册的 router</p>
<p>只是有一个毛病，这货返回的 HTTP status code 是 404。用起来没啥大毛病，但是就是浏览器不会记录网址，导致没法匹配浏览历史快速找到之前访问过的页面。</p>
<p>拿来改改继续用</p>
<pre><code>  from starlette.staticfiles import StaticFiles, Scope, Headers, Response, FileResponse

  class StaticFilesWithout404(StaticFiles):
      async def get_response(self, path: str, scope: Scope) -&gt; Response:
          r = await super().get_response(path, scope)
          h = Headers(scope=scope)
          full_path, stat_result = await self.lookup_path('404.html')
          if isinstance(r, FileResponse) and r.path == full_path:
              if 'text/html' in (h.get('accept') or ''):
                  r.status_code = 200
              else:
                  return Response('', status_code=404)
          return r

  app.mount("/frontend", StaticFilesWithout404(directory="frontend", html=True), name="static")
</code></pre>
<p>这段代码大概是起到了类似 <a href="http://nginx.org/en/docs/http/ngx_http_core_module.html#try_files">nginx <code>try_files</code></a> 的作用。默认静态文件映射一个目录，但是如果找不到就按根目录的 index.html 输出。这里还判断了请求的 <code>accept</code> 头，如果是 xhr/Fetch 就会直接返回一个0字节长度无MIME的404。</p>
<p>由此我想到了一个学究式的 leaky abstraction。众所周知，如果一个URL不存在，那么服务器应该返回404</p>
<p>但是现在都是 SPA 单页应用，都是先 200 返回 <code>index.html</code> 的内容，再由 javascript 的 router 去决定是否正常显示还是404 。所以返回 200 但是显示 404 就破坏了这个语义。如果要精确匹配SPA里的router如果不存在由服务器返回404，第一是搞 SSR，把前端那一坨代码跑在服务器端，第二种办法是 npm build 的时候输出一个可路由URL列表，然后部署的时候导入静态文件服务器更新。这个具体实现就留作homework由读者自行解决了。</p></p>
            <div class="card-subtext muted-text">
              <p>Posted <time datetime="2021-12-08T07:38:38+08:00">2021-12-08</time></p>
<p>stdout</p>            </div>
          </article>
        </div>


        <!-- new article -->
        <div class="card blog-card">
          <article class="card-body">
            <a href="/2021/stdout-022"  rel="bookmark" >
              <h2 class="card-title">人工构造Flask session模拟cookie登陆</h2>
            </a>
            <p class="card-text"><p>有没有好奇为什么 Flask 配置必须要求一个 <a href="https://flask.palletsprojects.com/en/latest/config/#SECRET_KEY">SECRET_KEY</a>，然后就可以在浏览器保存一个 session 状态读写数据。</p>
<p>这里记一下它的底层实现，其实需要依赖的包是 <a href="https://itsdangerous.palletsprojects.com/">itsdangerous</a></p>
<pre><code>  import hashlib
  from itsdangerous import URLSafeTimedSerializer
  URLSafeTimedSerializer(
          'YOUR_SECRET_KEY',  # flask SECRET_KEY
          'cookie-session',  # from flask.sessions.SecureCookieSessionInterface.salt
          # serializer=TaggedJSONSerializer(),
          signer_kwargs={'key_derivation': 'hmac', 'digest_method': hashlib.sha1}
  ).dumps({
      "your_key": "your_value"
  })
</code></pre>
<p>别人如果拿到你的 <code>SECRET_KEY</code> 就可以伪造任意 session cookie 了</p></p>
            <div class="card-subtext muted-text">
              <p>Posted <time datetime="2021-12-08T07:15:03+08:00">2021-12-08</time></p>
<p>stdout</p>            </div>
          </article>
        </div>


        <!-- new article -->
        <div class="card blog-card">
          <article class="card-body">
            <a href="/2021/stdin-016"  rel="bookmark" >
              <h2 class="card-title">苏35的UI汉化</h2>
            </a>
            <p class="card-text"><p><a href="https://www.zhihu.com/question/304693612/answer/2250648177">原文</a>禁止转载，那我就转载原文的<a href="https://mil.sina.cn/sd/2016-10-11/detail-ifxwrhpm2928730.d.html">原文</a></p>
<blockquote>
<p>日前，俄罗斯《消息报》采访了俄罗斯无线电电子技术集团（俄罗斯技术集团下属企业）副总经理吉维∙占季加夫，该集团是苏-35几乎所有航电系统的研制生产单位。<br />
占季加夫表示，“根据订购方的国情要求改装机载设备是重要的技术程序之一，一年多来我们都在致力于将驾驶舱内的信息翻译成汉语。但是，不像斯拉夫和拉丁字母，汉语的象形文字“很难”在LCD显示器上阅读。最终，中方要求维持原样，即显示器上保留西里尔字母。中国飞行员已有驾驶俄苏-27战机的飞行经验，该飞机的驾驶舱同样没有为中国进行改装，但飞行员们‘阅读’俄语的机上信息。”<br />
该报称，苏-35显示器上译成汉语的仪表读数说明和指令太过微小和模糊，以致难以阅读。通过扩大显示器的尺寸可以解决该问题，但这样就要彻底改造驾驶舱，研制和试验需要额外的资金和时间，中方伙伴并不希望这样。<br />
报道还指出，提供给中国的苏-35飞机唯一的特殊之处是在机载系统中加入了中国的“北斗”卫星导航系统。</p>
</blockquote>
<p>中文字库还是很大的，渲染也麻烦。</p></p>
            <div class="card-subtext muted-text">
              <p>Posted <time datetime="2021-12-02T07:20:03+08:00">2021-12-02</time></p>
<p>stdin</p>            </div>
          </article>
        </div>


        <!-- new article -->
        <div class="card blog-card">
          <article class="card-body">
            <a href="/2021/stdout-021"  rel="bookmark" >
              <h2 class="card-title">Python 3.X ctypes 和 greenlet size changed 坑三则</h2>
            </a>
            <p class="card-text"><h3>安装 setup.py 的时候 <code>No module named '_ctypes'</code> 报错</h3>
<pre><code>  Traceback (most recent call last):
    File &quot;&lt;string&gt;&quot;, line 1, in &lt;module&gt;
    File &quot;/usr/local/python3/lib/python3.9/site-packages/setuptools/__init__.py&quot;, line 18, in &lt;module&gt;
      from setuptools.dist import Distribution
    File &quot;/usr/local/python3/lib/python3.9/site-packages/setuptools/dist.py&quot;, line 34, in &lt;module&gt;
      from setuptools import windows_support
    File &quot;/usr/local/python3/lib/python3.9/site-packages/setuptools/windows_support.py&quot;, line 2, in &lt;module&gt;
      import ctypes
    File &quot;/usr/local/python3/lib/python3.9/ctypes/__init__.py&quot;, line 8, in &lt;module&gt;
      from _ctypes import Union, Structure, Array
  ModuleNotFoundError: No module named '_ctypes'
</code></pre>
<p>解决办法是不要用 3.9。</p>
<p>如果实在要用，则自己编译前需要加上 <code>yum install libffi-devel</code> 或者 <code>sudo apt-get install libffi-dev</code></p>
<p>来自<a href="https://stackoverflow.com/a/48045929">SO</a></p>
<h3><code>greenlet.greenlet size changed</code> 然后出错</h3>
<pre><code>/usr/local/lib/python3.7/importlib/_bootstrap.py:219: RuntimeWarning: greenlet.greenlet size changed, may indicate binary incompatibility. Expected 144 from C header, got 152 from PyObject
  return f(*args, **kwds)
/usr/local/lib/python3.7/importlib/_bootstrap.py:219: RuntimeWarning: greenlet.greenlet size changed, may indicate binary incompatibility. Expected 144 from C header, got 152 from PyObject
  return f(*args, **kwds)

Segmentation fault (core dumped)
</code></pre>
<p>这个摘自<a href="https://github.com/gevent/gevent/issues/1260">官方 iseue</a></p>
<blockquote>
<p>On Python 3.7 and higher, gevent 20.9.0 is required to use (a standard build of) greenlet 0.4.17.</p>
</blockquote>
<p>解决办法：<code>pip install gevent==20.9.0 pip install greenlet==0.4.17</code></p>
<h3>SQLAlchemy 1.4 大战 greenlet 0.4.17</h3>
<p>见 <a href="https://docs.sqlalchemy.org/en/14/changelog/changelog_14.html#change-12b8eb8e600cc32590b51d0087552191">sqlalchemy changelog</a></p>
<blockquote>
<p>to accommodate for the handling of Python contextvars (introduced in Python 3.7) for greenlet versions greater than 0.4.17. Greenlet version 0.4.17 added automatic handling of contextvars in a backwards-incompatible way; we’ve coordinated with the greenlet authors to add a preferred API for this in versions subsequent to 0.4.17 which is now supported by SQLAlchemy’s greenlet integration. For greenlet versions prior to 0.4.17 no behavioral change is needed, version 0.4.17 itself is blocked from the dependencies.</p>
</blockquote>
<p>然后就直接在 <a href="https://github.com/sqlalchemy/sqlalchemy/blob/703ff387c13f083ed0982071963155d679c862ab/setup.cfg#L42">setup.cfg里</a> 给 <code>greenlet != 0.4.17</code>了。</p>
<p>神仙打架，不听不听，和尚念经，果断 <code>sqlalchemy==1.3.24</code> 降级。</p></p>
            <div class="card-subtext muted-text">
              <p>Posted <time datetime="2021-12-01T17:41:32+08:00">2021-12-01</time></p>
<p>stdout</p>            </div>
          </article>
        </div>


        <!-- new article -->
        <div class="card blog-card">
          <article class="card-body">
            <a href="/2021/stdout-020"  rel="bookmark" >
              <h2 class="card-title">Edge调教指南——如何设置本地PAC代理和首页天气</h2>
            </a>
            <p class="card-text"><p>之前一直用的chrome v70，为什么呢？</p>
<p>第一是这个老版本允许 <code>--proxy-pac-url="file:///Users/me/1.pac</code> 这样设置，但是<a href="https://bugs.chromium.org/p/chromium/issues/detail?id=839566">Chromium项目的大爷们觉得</a>你本地的.pac不够安全，要网上的.pac才安全，所以一刀切给禁了。当然有热心人士觉得这没啥大不了的。不外乎装个插件就可以切PAC。但是chrome插件其实会有一个fingerprint。Extension一启用，隔壁老王都知道你开代理了。</p>
<p>第二，也是最重要的原因，这是最后一个chrome版本支持 <code>about://net-internals</code> 在本地查看浏览器底层网络请求。现在无论是 Edge 还是 Chrome 都必须把 .json 文件从 https://netlog-viewer.appspot.com/ 加载才能看了。很尼玛保护了隐私有没有啊。</p>
<p>但是坚持老版本，也付出了巨大的代价。很多新的 ES 语法不支持，比如说 Grafana 最新版 login 都进不去。这就尴尬了。只能被自愿升级了。</p>
<p>既然升级是必选项，那么就换 Edge 试试。</p>
<p>第一就是得解决这个本地 .pac 问题，其实从上面第二个工具里才能知道，PAC加载失败有个返回 <code>ERR_DISALLOWED_URL_SCHEME</code>。stackoverflow 上找到个奇技淫巧</p>
<p><code>open "/Applications/Microsoft Edge.app" --args --proxy-pac-url='data:application/x-javascript-config;base64,'$(base64 -i /Users/me/2.pac)</code></p>
<p>还能这样玩？双击666。</p>
<p>第二个把该禁用的禁用了，首页只留一个搜索框一个天气。但是这天气就特么定位到坡县了。而且下拉框点不出来啊。F12打开 devtool 一看，我尼玛好家伙 <code>https://www.bing.com/api/v6/Places/AutoSuggest</code> 被 Bing China 的网管给一把梭302到 <code>https://cn.bing.com/api/v6/Places/AutoSuggest</code> 了。然后就特么 CORS 给拦截，js读取不到列表。。。</p>
<p>最后怎么办？点那个天气图标，进入到 <code>https://www.msn.com/en-sg/weather/today/weather-today/we-city</code></p>
<p>然后找那个地图，手动选择自己所在城市，设置为 Home 。等 cookie 写入生效了，打开edge新tab就ok了</p>
<p>这年头上个网真鸡儿累。</p>
<p>btw 设置M$账号同步的时候，发现账号所在国家可以选很多不是国家的地方，但是时区就不能随便选了。F12改了也没用。微软的后台开发做的过滤还挺细致的。</p>
<p>btw2 发现一个很干净的启动页： <code>chrome-search://local-ntp/local-ntp.html</code> 或者直接在 <code>hosts</code> 里把 ntp.msn.com 干掉，有奇效。</p></p>
            <div class="card-subtext muted-text">
              <p>Posted <time datetime="2021-11-30T11:32:33+08:00">2021-11-30</time></p>
<p>stdout</p>            </div>
          </article>
        </div>


        <!-- new article -->
        <div class="card blog-card">
          <article class="card-body">
            <a href="/2021/stdin-015"  rel="bookmark" >
              <h2 class="card-title">烧脑两题：蚂蚁和橡皮筋，30万公里的电路</h2>
            </a>
            <p class="card-text"><p>今天遇到的两道题：</p>
<ol>
<li>一只蚂蚁站在静止不动的一米长的橡皮筋的左边端点开始向右边爬，爬行速度是每秒一厘米。现在固定橡皮筋的左端点，拉伸橡皮筋使之以每秒一厘米的速度伸长，蚂蚁仍然是以之前的速度向右爬，试问蚂蚁能否爬到橡皮筋右端点？假设橡皮筋可以拉无限长，求蚂蚁是否能追上橡皮筋，追不上的话两者差多少？</li>
</ol>
<p>解答没那么容易，见 zhihu 回答<a href="https://www.zhihu.com/question/440130887">1</a>, <a href="https://www.zhihu.com/question/33093421">2</a></p>
<ol start="2">
<li>如果长一光秒，宽1米的长方形电路，忽略导线的电阻，那么打开开关后灯泡要多久才通电？</li>
</ol>
<p><img alt="" src="/images/2021/stdin-015-1.jpg" /></p>
<p>答案来自<a href="https://www.youtube.com/watch?v=bHIhgxav9LY">视频</a>，主要讲了一通 坡印廷矢量 的道理。。。囧</p></p>
            <div class="card-subtext muted-text">
              <p>Posted <time datetime="2021-11-22T22:41:10+08:00">2021-11-22</time></p>
<p>stdin</p>            </div>
          </article>
        </div>


        <!-- new article -->
        <div class="card blog-card">
          <article class="card-body">
            <a href="/2021/stdout-019"  rel="bookmark" >
              <h2 class="card-title">TiDB不支持JSON字段默认值</h2>
            </a>
            <p class="card-text"><p>继前面的<a href="/2021/stdout-011">日期不兼容</a>坑，又发现<a href="https://docs.pingcap.com/tidb/stable/data-type-default-values">一个</a></p>
<blockquote>
<p>The BLOB, TEXT, and JSON columns cannot be assigned a default value.</p>
</blockquote>
<p>虽然 <a href="https://dev.mysql.com/doc/refman/5.7/en/json.html">MySQL 5.7 也是这么说</a>的：</p>
<blockquote>
<p>A JSON column cannot have a non-NULL default value.</p>
</blockquote>
<p>但是 <a href="https://dev.mysql.com/doc/refman/8.0/en/data-type-defaults.html">MySQL 8.0.13 就支持指定默认值</a>了</p>
<blockquote>
<p>Prior to MySQL 8.0.13, a JSON column cannot have a non-NULL default value.<br />
The default value specified in a DEFAULT clause can be a literal constant or an expression. With one exception, enclose expression default values within parentheses to distinguish them from literal constant default values. Examples:</p>
</blockquote>
<p>虽然语法很丑但是很实用啊。</p>
<p>所以这种语句</p>
<pre><code>  ALTER TABLE mytable MODIFY COLUMN my_json JSON DEFAULT (json_object());
</code></pre>
<p>在 TiDB 里就没法支持。这也带来一个问题，就是要 upsert 这个 字段的时候，写起来就很拧巴，以 <code>peewee</code> 这个ORM为例：</p>
<pre><code>  MyTable.update({
      'my_json' = fn.json_set(
          fn.COALESCE(MyTable.my_json, Cast('{}', 'JSON')),
          '%.some_key', 'some_value',
  )})
</code></pre>
<p>必须用 COALESCE 预防默认值为 <code>NULL</code> 的情况。太麻烦了。</p>
<p>btw 玩MySQL/TiDB的 JSON 有个坑的，那就是 json 的 <code>null</code> 是有值的，和 sql 的 <code>NULL</code> 是不同的。</p>
<p>也就是说</p>
<pre><code>  select json_extract('{}', '$.hey') IS NULL;
  select json_extract('{"hey": null}', '$.hey') = Cast('null' as JSON);
</code></pre>
<p>要注意。</p>
<p>btw2 MySQL的JSON数据抽取 <code>-&gt;&gt;</code> 是返回真正的值，等价于TiDB里的 json_unquote(json_extract(t.json_field, '$.key1.key2'))</p></p>
            <div class="card-subtext muted-text">
              <p>Posted <time datetime="2021-11-19T09:14:28+08:00">2021-11-19</time></p>
<p>stdout</p>            </div>
          </article>
        </div>


        <!-- new article -->
        <div class="card blog-card">
          <article class="card-body">
            <a href="/2021/stdin-014"  rel="bookmark" >
              <h2 class="card-title">怕学生会看HTML源码里的答案，Chrome允许网管禁止查看特定网站源码</h2>
            </a>
            <p class="card-text"><p>看到一个<a href="https://bugs.chromium.org/p/chromium/issues/detail?id=895462">奇葩issue</a></p>
<blockquote>
<p>With "view-source" in the URLBlacklist, the view-source:http://[URL] should not be available.  With Schools using Google Forms as a testing platform, students are able to use this shortcut to search through the source of the page, and determine the correct answers.</p>
</blockquote>
<p>然后 Google Chrome 就真的改了。。。</p>
<p>https://chromium-review.googlesource.com/c/chromium/src/+/3260807</p>
<p>Google 是开发人员太富余了。这种问提都要通过升级浏览器解决？</p>
<p>让人想起了前几天的<a href="https://www.theverge.com/2021/10/14/22726866/missouri-governor-department-elementary-secondary-education-ssn-vulnerability-disclosure">密苏里州的查看HTML源码刑事诉讼</a></p>
<blockquote>
<p>一名记者偶然发现，密苏里州官方教师资格证查询网站，存在严重的系统安全漏洞。仅仅通过查看网页HTML源代码，就能获取教师的身份证号码信息。于是，他向政府教育部门报告了这个问题。然而两天后，先于漏洞修复到来的，是州长即将对他发起刑事起诉。“政府不会掉以轻心，”州长Mike Parson在周四的新闻发布会上发言，“本届政府绝不姑息任何试图窃取个人信息并会造成威胁的作恶者。”</p>
</blockquote>
<p><a href="https://news.ycombinator.com/item?id=29170886">via</a></p></p>
            <div class="card-subtext muted-text">
              <p>Posted <time datetime="2021-11-10T13:35:30+08:00">2021-11-10</time></p>
<p>stdin</p>            </div>
          </article>
        </div>


        <!-- new article -->
        <div class="card blog-card">
          <article class="card-body">
            <a href="/2021/stdin-013"  rel="bookmark" >
              <h2 class="card-title">PCR testing site under the fireworks from Disney castle</h2>
            </a>
            <p class="card-text"><p>One of the most astonishing views from end of the year.</p>
<video src="/images/2021/stdin-013-1.mp4" controls preload="metadata"></video>

<p>From the evening of <a href="https://m.weibo.cn/detail/4698502573853047">31th Oct, Shanghai Disneyland</a></p></p>
            <div class="card-subtext muted-text">
              <p>Posted <time datetime="2021-11-08T22:28:06+08:00">2021-11-08</time></p>
<p>stdin</p>            </div>
          </article>
        </div>


        <!-- new article -->
        <div class="card blog-card">
          <article class="card-body">
            <a href="/2021/stdout-016"  rel="bookmark" >
              <h2 class="card-title">Chrome 指定域名解析，绕过 hosts</h2>
            </a>
            <p class="card-text"><p>看到 <a href="https://www.v2ex.com/t/813626">V站有人问</a>这个，随手一记</p>
<p>可以参考<a href="https://chromium.googlesource.com/chromium/src/+/refs/heads/main/components/network_session_configurator/common/network_switch_list.h">源码里的注释文档</a></p>
<h2>--host-resolver-rules=rules</h2>
<p>Like <code>--host-rules</code> but these rules only apply to the host resolver.<br />
A comma-separated list of rules that control how hostnames are mapped.<br />
For example:<br />
- <code>MAP * 127.0.0.1</code> Forces all hostnames to be mapped to <code>127.0.0.1</code><br />
- <code>MAP *.google.com proxy</code> Forces all google.com subdomains to be resolved to <code>proxy</code>.<br />
- <code>MAP test.com [::1]:77</code> Forces <code>test.com</code> to resolve to IPv6 loopback. Will also force the port of the resulting socket address to be 77.<br />
- <code>MAP * baz, EXCLUDE www.google.com</code> Remaps everything to <code>baz</code>, except for <code>www.google.com</code>.</p>
<p>These mappings apply to the endpoint host in a net request (the TCP connect and host resolver in a direct connection, and the CONNECT in an HTTP proxy connection, and the endpoint host in a SOCKS proxy connection).</p>
<p>官方文档有语焉不详的提到过</p>
<p>https://chromium.googlesource.com/chromium/src/+/refs/heads/main/net/dns/README.md</p>
<blockquote>
<p>Starting Chrome with --host-resolver-rules="MAP the.hostname.com [dead::beef]" where the.hostname.com is the hostname to allow resolving and dead::beef is the IPv6 address to resolve it to. net::MappedHostResolver acts at a level before IPv6 connectivity checks, and if a hostname is remapped to an IP literal, connectivity checks do not apply.</p>
</blockquote>
<p>还有很多 <a href="https://chromium.googlesource.com/chromium/src/+/HEAD/net/docs/proxy.md">proxy的参数</a></p>
<h2>curl 的参数</h2>
<p>也顺便贴一下。调试的时候用得上</p>
<p>参数：</p>
<ul>
<li><code>-4</code>, <code>--ipv4</code></li>
<li><code>-6</code>, <code>--ipv6</code></li>
<li><code>--dns-interface &lt;interface&gt;</code></li>
<li><code>--dns-ipv4-addr &lt;ip-address&gt;</code> Tell curl to bind to <code>&lt;ip-address&gt;</code> when making IPv4 DNS requests</li>
<li><code>--dns-ipv6-addr &lt;ip-address&gt;</code> Tell curl to bind to <code>&lt;ip-address&gt;</code> when making IPv6 DNS requests</li>
<li><code>--dns-servers &lt;ip-address,ip-address&gt;</code> Set the list of DNS servers to be used instead of the system default. The  list  of  IP  addresses should  be  separated  with commas. Port numbers may also optionally be given as <code>:&lt;port-number&gt;</code> after each IP address.</li>
<li><code>--resolve &lt;host:port:address&gt;</code> Make the curl requests(s) use a specified address and prevent the otherwise normally resolved address to  be  used. Consider  it a sort of /etc/hosts alternative provided on the command line. The port number should be the number used for the specific protocol the host will be  used  for.  It  means  you  need  several entries if you want to provide address for the same host but different ports. This option can be used many times to add many host names to resolve. (Added in 7.21.3)</li>
</ul>
<p>最后一个很有用 😹</p></p>
            <div class="card-subtext muted-text">
              <p>Posted <time datetime="2021-11-07T16:01:19+08:00">2021-11-07</time></p>
<p>stdout</p>            </div>
          </article>
        </div>


        <!-- new article -->
        <div class="card blog-card">
          <article class="card-body">
            <a href="/2021/stdout-017"  rel="bookmark" >
              <h2 class="card-title">reverse proxy FastCGI (fcgi) with uWSGI</h2>
            </a>
            <p class="card-text"><p>People are still using FastCGI, and it's hard. I used uWSGI to convert FCGI traffic to regular http/1.0 so I can keep my existing http service running without apache mod_fcgi shit.</p>
<h2>CGI environ variables</h2>
<p>This is some ancient knowledge, better keep them noted</p>
<table>
<thead>
<tr>
<th>KEY</th>
<th>description</th>
</tr>
</thead>
<tbody>
<tr>
<td>AUTH_TYPE</td>
<td>ignore this</td>
</tr>
<tr>
<td>REMOTE_IDENT</td>
<td>The user making the request.</td>
</tr>
<tr>
<td>REMOTE_USER</td>
<td>The authenticated name of the user making the query.</td>
</tr>
<tr>
<td>CONTENT_LENGTH</td>
<td>byte length of body</td>
</tr>
<tr>
<td>CONTENT_TYPE</td>
<td>MIME such as text/html, without the charset shit</td>
</tr>
<tr>
<td>DOCUMENT_ROOT</td>
<td>NEW. The directory from which web documents are served.</td>
</tr>
<tr>
<td>REQUEST_URI</td>
<td>NEW. confusing shit similar with PATH_INFO</td>
</tr>
<tr>
<td>HTTP_*</td>
<td>HTTP headers</td>
</tr>
<tr>
<td>PATH_INFO</td>
<td>like /a/b/c</td>
</tr>
<tr>
<td>PATH_TRANSLATED</td>
<td>not really used</td>
</tr>
<tr>
<td>QUERY_STRING</td>
<td>the part after ? in an URL</td>
</tr>
<tr>
<td>REMOTE_ADDR</td>
<td>client IP</td>
</tr>
<tr>
<td>REMOTE_HOST</td>
<td>client host name by lookup ip</td>
</tr>
<tr>
<td>REQUEST_METHOD</td>
<td>GET/POST</td>
</tr>
<tr>
<td>SCRIPT_NAME</td>
<td>The virtual path (e.g., /cgi-bin/program.pl) of the script being executed.</td>
</tr>
<tr>
<td>SCRIPT_FILENAME</td>
<td>confusing shit similar with SCRIPT_NAME</td>
</tr>
<tr>
<td>SERVER_NAME</td>
<td>The server's hostname or IP address.</td>
</tr>
<tr>
<td>SERVER_PORT</td>
<td>The port number of the host on which the server is running.</td>
</tr>
<tr>
<td>SERVER_PROTOCOL</td>
<td>The name and revision number of the server protocol.</td>
</tr>
</tbody>
</table>
<h2>reverse proxy FastCGI with uWSGI</h2>
<p>slap this into <code>my_conf.ini</code></p>
<pre><code>  [uwsgi]
  my_port = 9000  # can be set otherwise
  route-run = addvar:SERVER_NAME=%h
  route-run = addvar:SERVER_PORT=%(my_port)
  route-if  = empty:${REQUEST_METHOD} addvar:REQUEST_METHOD=GET
  route-if  = empty:${HTTP_HOST} addvar:HTTP_HOST=%h:%(my_port)
  route-run = seturi:/fcgi-proxy${PATH_INFO}
  route-run = http:127.0.0.1:9527
  fastcgi-socket = 0.0.0.0:%(my_port)
  http-socket = 0.0.0.0:8000  # for testing purpose.
</code></pre>
<p>Install uWSGI, install the binary from pypi wheels instead of compiling uwsgi.c shit</p>
<pre><code>  pip install pyuwsgi
</code></pre>
<p>Run it</p>
<pre><code>  uwsgi --ini my_conf.ini
</code></pre>
<p>Now you can run your regular http service behind <code>127.0.0.1:9527</code>, while serving fcgi on <code>127.0.0.1:9000</code></p>
<p>Requests like <code>fcgi://127.0.0.1:9000/hello</code> will be fowwarded to <code>http://127.0.0.1:9527/fcgi-proxy/hello</code></p>
<p>You may ask why adding a <code>/fcgi-proxy</code> in path? Because there's a gotcha.</p>
<h2>fuckedup FastCGI requests</h2>
<p>Learned this from some php-fpm tutorial, first install the standard fcgi client tool because <code>curl</code> doesn't speak fcgi.</p>
<pre><code>  apt-get install libfcgi0ldbl
  yum --enablerepo=epel install fcgi
  SCRIPT_NAME=/ping SCRIPT_FILENAME=/ping REQUEST_METHOD=GET cgi-fcgi -bind -connect 127.0.0.1:9000
</code></pre>
<p>You can observe from uWSGI logs that <code>cgi-fcgi</code> command sends flawed requests, the <code>PATH_INFO</code> was unset.</p>
<p>After hours wasted, I came up with a clever hack to force uWSGI's internal router to force <code>seturi</code> with a path prefix</p>
<h2>ToDo</h2>
<p>There are further problems that can be improved, for example, my http service is running <code>uvicorn</code>, it can not guess the client ip:port infor from its stupid <code>get_remote_addr</code></p>
<p>what's worse, the uWSGI <code>addheader</code> directive are for <em>responses</em>, so I can't add <em>request</em> headers like <code>x-forwared-for</code>.</p>
<p>Also the reverse proxy is HTTP/1.0 only. to make the <code>Connection: Keep-alive</code> happen needs some further investigation.</p>
<h2>Q&amp;A</h2>
<p>Thanks for reading my shitpost. Questions?</p></p>
            <div class="card-subtext muted-text">
              <p>Posted <time datetime="2021-11-05T18:12:45+08:00">2021-11-05</time></p>
<p>stdout</p>            </div>
          </article>
        </div>


        <!-- new article -->
        <div class="card blog-card">
          <article class="card-body">
            <a href="/2021/stdin-012"  rel="bookmark" >
              <h2 class="card-title">20211102币圈的古诗词大会</h2>
            </a>
            <p class="card-text"><p>第一个是 Elon Musk 的</p>
<p><a href="https://twitter.com/elonmusk/status/1455327010302087173">https://twitter.com/elonmusk/status/1455327010302087173</a></p>
<div style="
    font-family: Baskerville, Georgia, &quot;Liberation Serif&quot;, &quot;Kaiti SC&quot;, STKaiti, &quot;AR PL UKai CN&quot;, &quot;AR PL UKai HK&quot;, &quot;AR PL UKai TW&quot;, &quot;AR PL UKai TW MBE&quot;, &quot;AR PL KaitiM GB&quot;, KaiTi, KaiTi_GB2312, DFKai-SB, &quot;TW\-Kai&quot;, serif;
    writing-mode: vertical-rl;
    width: 100%;
    word-break: break-all;
    white-space: pre;
    text-spacing: ideograph-alpha;
    border-right: 0.2em solid #e00711;
    text-align: justify;
    text-justify: inter-ideograph;
">
Humankind
煮豆燃豆萁
豆在釜中泣
本是同根生
相煎何太急
</div>

<p>Shiba 大战 Dogecoin，然后SpaceX 大战 Blue Origin，然后怼 WFP David Beasley。</p>
<p>我觉得 DeepL <a href="https://twitter.com/i/web/status/1455328151941353475">翻译</a>得真好！</p>
<p><img alt="" src="/images/2021/stdin-012-1.jpg" /></p>
<p>当然也有<a href="https://www.chinanews.com/gn/cns60/news/89.shtml">长者的</a>，微博上有个 大弟子Leo 找到了视频，看水印是 AP 的，我去搜了下发现真的有 <a href="https://youtu.be/oSG01RUdUUg?t=71">https://youtu.be/oSG01RUdUUg?t=71</a></p>
<p>然后学习了一下，这首诗原来是六句，最早出现在南北朝刘宋的《世说新语》：</p>
<div style="
    font-family: Baskerville, Georgia, &quot;Liberation Serif&quot;, &quot;Kaiti SC&quot;, STKaiti, &quot;AR PL UKai CN&quot;, &quot;AR PL UKai HK&quot;, &quot;AR PL UKai TW&quot;, &quot;AR PL UKai TW MBE&quot;, &quot;AR PL KaitiM GB&quot;, KaiTi, KaiTi_GB2312, DFKai-SB, &quot;TW\-Kai&quot;, serif;
    writing-mode: vertical-rl;
    width: 100%;
    word-break: break-all;
    white-space: pre;
    text-spacing: ideograph-alpha;
    border-right: 0.2em solid #e00711;
    text-align: justify;
    text-justify: inter-ideograph;
">
煮豆持作羹，
漉菽以為汁。
萁在釜下燃，
豆在釜中泣。
本自同根生，
相煎何太急。
</div>

<p>然后是币圈的大佬们继续背诗</p>
<div style="
    font-family: Baskerville, Georgia, &quot;Liberation Serif&quot;, &quot;Kaiti SC&quot;, STKaiti, &quot;AR PL UKai CN&quot;, &quot;AR PL UKai HK&quot;, &quot;AR PL UKai TW&quot;, &quot;AR PL UKai TW MBE&quot;, &quot;AR PL KaitiM GB&quot;, KaiTi, KaiTi_GB2312, DFKai-SB, &quot;TW\-Kai&quot;, serif;
    writing-mode: vertical-rl;
    width: 100%;
    word-break: break-all;
    white-space: pre;
    text-spacing: ideograph-alpha;
    border-right: 0.2em solid #e00711;
    text-align: justify;
    text-justify: inter-ideograph;
">
十年磨一剑
霜刃未曾试
今日把示君
谁有不平事
</div>

<p><a href="https://twitter.com/GMEdd/status/1455363193455452166">https://twitter.com/GMEdd/status/1455363193455452166</a></p>
<p><img alt="" src="/images/2021/stdin-012-2.jpg" /></p>
<p>真是疯狂的一天啊。</p>
<p><a href="https://np.reddit.com/r/Superstonk/comments/qkug3o/umwhat/">via</a></p></p>
            <div class="card-subtext muted-text">
              <p>Posted <time datetime="2021-11-02T22:46:55+08:00">2021-11-02</time></p>
<p>stdin</p>            </div>
          </article>
        </div>


        <!-- new article -->
        <div class="card blog-card">
          <article class="card-body">
            <a href="/2021/stdout-018"  rel="bookmark" >
              <h2 class="card-title">淘宝同一手机最多绑定6个小号</h2>
            </a>
            <p class="card-text"><p>总结一些没用的知识</p>
<ol>
<li>
<p>淘宝/阿里账号，可以一个手机最多绑定6个账号。淘宝注册的时候点击「企业注册」然后用邮箱注册，最后用同一个手机验证即可</p>
</li>
<li>
<p>「支付宝」在淘宝/阿里系里app里是和「账号」一一绑定的，这就产生了很多冲突。比如你一个第三方外卖app，支付的时候可以选择 微信/支付宝，一般不会限制下单手机号和支付手机号是否一样，你甚至可以帮别人支付订单，但是淘宝/阿里的app不一样，只能自己账号支付自己账号的订单。如果你有两个手机号和两个支付宝账号，那么没法交叉支付。</p>
</li>
</ol>
<p>还有一个想不起了，想起了再补充。2333</p></p>
            <div class="card-subtext muted-text">
              <p>Posted <time datetime="2021-10-28T16:21:23+08:00">2021-10-28</time></p>
<p>stdout</p>            </div>
          </article>
        </div>


        <!-- new article -->
        <div class="card blog-card">
          <article class="card-body">
            <a href="/2021/stdout-015"  rel="bookmark" >
              <h2 class="card-title">《兵车行》竖排实验</h2>
            </a>
            <p class="card-text"><p>群里闲聊起究竟生男好还是生女好，就想起了这首诗</p>
<div style="
    font-family: Baskerville, Georgia, &quot;Liberation Serif&quot;, &quot;Kaiti SC&quot;, STKaiti, &quot;AR PL UKai CN&quot;, &quot;AR PL UKai HK&quot;, &quot;AR PL UKai TW&quot;, &quot;AR PL UKai TW MBE&quot;, &quot;AR PL KaitiM GB&quot;, KaiTi, KaiTi_GB2312, DFKai-SB, &quot;TW\-Kai&quot;, serif;
    writing-mode: vertical-rl;
    width: 100%;
    word-break: break-all;
    white-space: pre;
    text-spacing: ideograph-alpha;
    border-right: 0.2em solid #e00711;
    text-align: justify;
    text-justify: inter-ideograph;
">兵车行——杜甫

车辚辚，马萧萧，行人弓箭各在腰。  
耶娘妻子走相送，尘埃不见咸阳桥。
牵衣顿足拦道哭，哭声直上干云霄。
道旁过者问行人，行人但云点行频。
或从十五北防河，便至四十西营田。
去时里正与裹头，归来头白还戍边。
边庭流血成海水，武皇开边意未已。
君不闻，汉家山东二百州，千村万落生荆杞。
纵有健妇把锄犁，禾生陇亩无东西。
况复秦兵耐苦战，被驱不异犬与鸡。
长者虽有问，役夫敢申恨？
且如今年冬，未休关西卒。
县官急索租，租税从何出？
<b>信知生男恶，反是生女好。
生女犹得嫁比邻，生男埋没随百草。</b>
君不见，青海头，古来白骨无人收。
新鬼烦冤旧鬼哭，天阴雨湿声啾啾！

</div>

<p>测试下 css 的文字竖排。</p>
<p>字体来自 <a href="http://zenozeng.github.io/fonts.css/">fonts.css</a></p></p>
            <div class="card-subtext muted-text">
              <p>Posted <time datetime="2021-10-21T23:28:21+08:00">2021-10-21</time></p>
<p>stdout</p>            </div>
          </article>
        </div>


        <!-- new article -->
        <div class="card blog-card">
          <article class="card-body">
            <a href="/2021/stdout-014"  rel="bookmark" >
              <h2 class="card-title">Re-index page on Google Search Console</h2>
            </a>
            <p class="card-text"><p>Request indexing webpage with Google used to be fun and simple, now it's a tedious task especially when you have tons of old pages ready to be crawled yet Google is reluctant to move.</p>
<p>Here is a simple script to speed up the stacks of page you have click in order to submit multiple missing pages to Google. </p>
<p>Open your <a href="https://search.google.com/search-console">Google Search Console</a>, click <strong>Coverage</strong> then open <strong>Discovered – currently not indexed</strong></p>
<p>Now open your browser devtool, paste these into javascript console, hit them one by one.</p>
<pre><code>  document.querySelector('div[data-disabled] table td span[title] span[title="Inspect URL"]').click()

  document.querySelector('span[data-event-action=request-indexing] span[jsslot] div span span').click()

  document.querySelector('span[data-event-action=pivot-to-report-main-view-indexing-section] a').click()
</code></pre>
<p>Until you met with the daily quota. Rinse and try this shit everyday.</p>
<p>Fuck Google.</p></p>
            <div class="card-subtext muted-text">
              <p>Posted <time datetime="2021-10-21T14:53:25+08:00">2021-10-21</time></p>
<p>stdout</p>            </div>
          </article>
        </div>


        <!-- new article -->
        <div class="card blog-card">
          <article class="card-body">
            <a href="/2021/stderr-009"  rel="bookmark" >
              <h2 class="card-title">人教版语文课程《一只奶酪》</h2>
            </a>
            <p class="card-text"><p>起初是娃的一个作业，被打了叉，百思不得其解</p>
<p><img alt="" src="/images/2021/stderr-009-1.jpg" /></p>
<p>于是翻开课文仔细读一下</p>
<blockquote>
<h2>一块奶酪 作者：辛勤</h2>
<p>蚂蚁队长集合好队伍，向大家宣布：“今天搬运粮食，只许出力，不许偷嘴。谁偷了嘴，就要受到处罚。 一只小蚂蚁在队列里嘀咕：“要是偷嘴的是您呢？”蚂蚁队长说：“照要就受处罚。” 大家一听，都来劲了，争先恐后赶到运粮地点，抢着抬大的，搬重的，谁也不愿偷懒。 <br />
就在这时，蚂蚁队长发现了一块大奶酪。那块奶酪实在太大了，他左抬抬不起，右搬搬不动，只好叫来七八只小蚂蚁当助手。 <br />
奶酪多诱人啊！抬着它，不要说吃，单是闻闻，都要淌口水。小蚂蚁们嘴叼着它，要做到不趁机舔一下，那要多大的毅力，多强的纪律性啊！ <br />
蚂蚁队长叼着奶酪一角往前拽着，也许是用力过猛，一下就把那个角拽掉了。盯着那一点掉在地上的奶酪渣，蚂蚁队长想：丢掉，实在可惜；趁机吃掉它，又要犯不许偷嘴的禁令。怎么办呢？他的心七上八下，只好下令：“休息一会儿子！” <br />
听到命令，大家放下命令，却不走开。 “大家分散开，哪里凉快就到哪里休息。” 大家依旧不动，眼睛望着别处，心却牵挂着那一点儿奶酪渣子。 <br />
蚂蚁队长生气了。他登上一块大石板，突然下令：“注意啦，全体都有。稍息！立正！向后——转！齐步——走！”等小蚂蚁们消失在草丛中，他才大叫：“立——定！原地休息！” <br />
这时，奶酪旁边只有蚂蚁队长，他偷个嘴，谁也看不见。他低下头，嗅嗅那点儿奶酪，味道真香！可是，他犹豫了一会儿，终于一跺脚：“注意啦，全体都有。稍息！立正！向后——转！齐步——走！” <br />
小蚂蚁们从四面八方的草丛里走拢来了。当他们重新聚到奶酪旁边时，蚂蚁队长命令年龄最小的一只蚂蚁：“这点儿奶酪渣是刚才弄掉的，丢了可惜，您吃掉它吧！” <br />
大家又干起活来了，劲头比刚才更足，奶酪一会儿就被搬到洞里去了。 </p>
</blockquote>
<p><img alt="" src="/images/2021/stderr-009-2.jpg" /> <img alt="" src="/images/2021/stderr-009-3.jpg" /></p>
<p><img alt="" src="/images/2021/stderr-009-4.jpg" /></p>
<p>读完这篇课文，对其故事没多少印象了，但是小时候也是被这「总结中心思想」搞出 PTSD了，再回头看看孩子的答案，貌似没毛病啊。为啥没答对呢，这是什么鬼。</p>
<p>只能网上搜一下答案，搜完之后我他妈裂开了，比如</p>
<blockquote>
<p>Q: 蚂蚁们为什么争先恐后的搬运粮食？<br />
A: 蚂蚁们听到蚂蚁队长说要和大家一起遵守规则，不搞特权，他们的积极性被调动起来了。<br />
Q: 蚂蚁队长为什么两次下了同样的命令？他想干什么？<br />
A: 蚂蚁队长第一次下命令是想让蚂蚁们离开，自己吃了这点儿奶酪渣，因为他实在抵制不了美食的诱惑。可是经过激烈的思想斗争，他改变了自己的想法，决定把这点儿奶酪渣留给年龄最小的蚂蚁吃。从这里可以看出蚂蚁队长具有抵制诱惑的勇气，能够以身作则，也反映了蚂蚁队长关爱弱小的品质。</p>
</blockquote>
<p>我心里一万个问号，孩子学习语文，应该是从简单到困难吧，对社会这种复杂组织，孩子懂个屁什么叫「特权」？</p>
<p>搜了下作者：</p>
<blockquote>
<p>辛勤  (1939～) 笔名良驽、木兰。云南昆明人。1960年毕业于昆明师专文史系。历任县中学教员、县委宣传部干事、云南人民出版社编辑、晨光出版社编辑室主任、《蜜蜂报》主编，副编审。云南省家庭教育研究会副会长。1956年开始发表作品。1990年加入中国作家协会。著有短篇儿童小说集《装在葫芦里的故事》，中长篇儿童小说《绿孔雀与金角龙》、《替身演员》、《小哥俩猎虎》、《鬼谷》、《魔匣》等，散文集《智慧女孩》，儿歌集《心灯》等。中篇小说《火把歌》获上海儿童文学园丁奖。2005年获中国青少年社会教育银杏奖突出贡献奖。</p>
</blockquote>
<p>所以这就很容易理解了。这篇课文就是当年文革时期小镇宣传部笔杆子，写的一篇时政讥讽文。无非就是共产党功勋集团讲特权，脱离群众，私分蛋糕那些破事。问题是这些东西真的适合给孩子当教材学么？孩子真的搞得懂斗争么？</p>
<p>仔细一想，这特么哪跟哪呢。首先现实世界的工蚁是没有特权一说的，都是给蚁后打工，组织形式和人类有很大差别。其次虽然这蚂蚁队长嘴上没吃到奶酪，但是一会儿立正散开，一会儿立正回来折腾其他蚂蚁何尝不是滥用特权？然后这就算队长抵制诱惑了？它把奶酪分给小蚂蚁只不过是慷他人之慨，随意去分配受损资产，何尝不是一种特权？最后，为啥最小的蚂蚁吃到奶酪渣，别的蚂蚁就不闹了？难道发放奶酪有一个从幼到长的机制作为前提？想到这一层，莫非是发动群众斗群众？</p>
<p>其实分蛋糕这个问题，要的不是队长的高觉悟和内心斗争，有一个非常行之有效古老的办法，那就是先分蛋糕的人最后拿。这种靠队长的主观能动性「摆平」事情的，我觉得还是有一种居高临下藐视小蚂蚁的阶级优越感思维存在。可能是灌输论的遗毒吧。</p>
<p>作为小学语文课本，没有语言艺术性，没有文学性，没有故事性，纯粹就是阴阳怪气谜语人，《读者》式的鸡汤味。</p>
<p>想到这里，我觉得，孩子们对中心思想拿捏不准真的不是孩子的问题。标准化答案真的害人。垃圾课文真的应该滚出课本。</p></p>
            <div class="card-subtext muted-text">
              <p>Posted <time datetime="2021-10-19T22:32:39+08:00">2021-10-19</time></p>
<p>stderr</p>            </div>
          </article>
        </div>

    </main>
    <nav class="pagination-nav side-padding">
<a href="/index.08.html" class="pagination-newer">&lt; Newer Posts</a><a href="/index.10.html" class="pagination-older">Older Posts &gt;</a>    </nav>


  </body>
</html>