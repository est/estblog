<?xml version="1.0" encoding="utf-8"?>
<rss version="2.0"><channel><title>est の 输入输出</title><link>https://blog.est.im/</link><description>This blog is rated 🔞, viewer discretion is advised</description><lastBuildDate>Thu, 15 Feb 2024 01:02:00 +0800</lastBuildDate><item><title>为啥开车加塞、插队的特别多</title><link>https://blog.est.im/2024/stdin-02</link><description>&lt;p&gt;前几天&lt;a href="https://www.v2ex.com/t/1015409"&gt;水了个帖子&lt;/a&gt;：&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;加塞的本质是道路通行效率低下，加塞是果，不是因。现实中，很多地方转弯车道的设置就是和实际车流量脱节、不合理的。本身应该用在优化交通的资金，都用来安装抓拍摄像头了。道路规划部门没有动力和压力去推动改良。更糟糕的是，道路规划和交通管理往往是 2 个部门，一个挖坑一个踩坑，踢皮球屡见不鲜。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;当时这只是我的猜测。今晚无意中刷到一个B站视频《&lt;a href="https://www.bilibili.com/video/BV1fC41147ck/"&gt;2024年，中国城市不会修直路&lt;/a&gt;》&lt;/p&gt;
&lt;p&gt;视频比较长，简单概括就是：如果你是直行车依次通过多个红绿灯路口，如果需要不断变道躲开左转道、右转道和变道，那么道路就是失败的设计。&lt;/p&gt;
&lt;p&gt;然后评论有人去问了真正做道路设计的老哥：&lt;/p&gt;
&lt;p&gt;&lt;img alt="" src="https://album.biliimg.com/bfs/new_dyn/d83c91502828fdb6006aeba72c970e5210916201.jpg@!web-comment-note.webp" /&gt;&lt;/p&gt;
&lt;p&gt;hmm，谁设计道路，谁就应该背这个道路的车流量通畅指标。&lt;/p&gt;</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">est</dc:creator><pubDate>Thu, 15 Feb 2024 01:02:00 +0800</pubDate><guid isPermaLink="false">tag:None,2024-02-15:/2024/stdin-02</guid><category>stdin</category></item><item><title>从 幻兽帕鲁 Palworld 设想一下未来的联机游戏</title><link>https://blog.est.im/2024/stdout-02</link><description>&lt;p&gt;打开steam刷到一个新闻《&lt;a href="https://store.steampowered.com/news/app/294100/view/5851926268001690398?l=english"&gt;Ten years of RimWorld&lt;/a&gt;》。啊？都十年了？回想起来最近非常爆火 幻兽帕鲁 Palworld ，被大家称为缝合怪，什么都缝了。细细盘点一下我对该类别游戏大杂烩的一个评价，以及我对未来游戏机制的一个YY。&lt;/p&gt;
&lt;h2&gt;Minecraft 挖矿争霸&lt;/h2&gt;
&lt;p&gt;我从这玩意还没中文名字的beta时代就开始玩（盗版），从山脚下一个 1x2 穴居的第一夜，挖到自己的第一铲煤，再到湖底水晶宫，然后修建自己的铁路在广袤的平原和山间品味那让人留连忘返 procedure generated terrain ，那个时候真的能给人一种激动。&lt;/p&gt;
&lt;p&gt;后来搞的什么创造模式，各种复杂的机制和道具，没那个简单的快乐了。&lt;/p&gt;
&lt;h2&gt;Conan Exiles&lt;/h2&gt;
&lt;p&gt;和 minecraft 的 voxel 建筑风格相比，它的建筑是由&lt;a href="https://blog.est.im/201905/stdin-003"&gt;正三角形、正方形构造出来的奇特镶嵌&lt;/a&gt; 。当然还有特色的 wheel of pain 驯奴系统，简直解放劳动力啊&lt;/p&gt;
&lt;h2&gt;Rimworld&lt;/h2&gt;
&lt;p&gt;这玩意好就好在它那套 story-teller 带来的调性，很有那个味。后来的其他作品比如 Stranded: Alien Down 虽然设施设备、机制都堆了，但是总给人一种单薄，后期没劲的感觉。Rimworld 的限制就在于 2D 而且固定尺寸地图，不是 open-world&lt;/p&gt;
&lt;h2&gt;Grand Theft Auto&lt;/h2&gt;
&lt;p&gt;这玩意当年从 GTA:SA 接触觉得简直是神作啊！无缝地图在当年看来就是魔法一般。而且迄今为止它也是没有太多科幻元素，完全以「现代」为题材的都市类游戏，国产的喜欢做三国、仙侠，国外的喜欢中世纪、废土和赛博。凸显了 GTA 的独特生态位。当然这玩意玩 online 就是纯纯的 grind，还好我早就通过外挂刷了几个亿，很轻松惬意。（声明：外挂只用来刷钱，并不具备其它不公平功能）。这玩意在我心目中是 open-world 当之无愧的开创者和王者。&lt;/p&gt;
&lt;h2&gt;Palworld&lt;/h2&gt;
&lt;p&gt;接触了一下这玩意，其实我对 pokemon 一直有耳闻但是完全不懂，现在看来有点类似收集+配种这样一个机制。想起来玩一些 MMORPG 比如 Black Desert 发现一个叫做 「family」的机制很有趣，你可以创建多个角色并切换，部分物品甚至是通用的。但是这玩意感觉除了对不同角色体验一番，并不能带来 1+1&amp;gt;2 的效果。我当时就非常希望同一个 family 的角色能相互配合，就像「Dragon Age: Origins」里一样，在行走和打架的时候能随时切换，不同的职业甚至能打出来一些配合，那该有多好。&lt;/p&gt;
&lt;h2&gt;缝合&lt;/h2&gt;
&lt;p&gt;游戏里最蛋痛的一点，对资源开采的大量需求，应该可以把玩家的角色托付给AI挂机，正如 Black Desert 的 auto-fishing 一样。Palworld 这一点就缝合的相当有趣了，原版的 pokemon 据说只能抓来打架，这里变成了还可以是生产力。比 Conan Exiles 里的奴隶机制更有意思。综合我前面的设想，我觉得以后的联机游戏，player-character 应该不是一个，而是一群。有血缘或者劳动附庸关系的「家族」。玩家应该有自由度选择控制其中一个或多个，玩家离线的时候这个「家族」应该也会按照设定进行生产和劳动。。。。甚至防御！&lt;/p&gt;
&lt;p&gt;如果考虑死亡掉落机制，那么可以设计一套更有趣的系统：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;捏脸不能全部自定义，而是类似 Red Dead Redemption 那样的双亲继承+微调&lt;/li&gt;
&lt;li&gt;角色的职业，天赋点，也应该通过血缘获得，而不是生硬的数值&lt;/li&gt;
&lt;li&gt;玩家控制角色可以重伤，甚至死亡。死了就真死透了。但是你可以多生育子女，选一个比如95%相似度的，继续玩。&lt;/li&gt;
&lt;li&gt;玩家随身物品，如果掉落，需要家族里其他人去捞，或者发悬赏换回&lt;/li&gt;
&lt;li&gt;子女太多可以交给社会化抚养，变成NPC。&lt;/li&gt;
&lt;li&gt;付费玩家可以全价自定义投胎，免费玩家可以从弃养的NPC里挑选。&lt;/li&gt;
&lt;li&gt;家族里其他角色可以随时控制，或者分配生产、战斗任务&lt;/li&gt;
&lt;li&gt;有俘虏、雇佣，随从等「条约」系统支持跨血缘配合&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;这样的体系下，说不定可以加入家族政治勾心斗角，最后演变成类似 十字军之王 一类的策略游戏？23333&lt;/p&gt;
&lt;p&gt;在家族这样的设定下，还需要解决最后一个拼图：玩家终归是要时不时AFK的。那么玩家一定会需要据点。这类 base-building 游戏也烂大街了。但是最大的问题就是，一个服务器地图是有限的，好的建家点位就那么几个，目前联机游戏一般的做法是搞一套巨复杂的防御机制，高难度陷阱防止别的玩家抄家。实际上抄家和被抄家都挺难受的。&lt;/p&gt;
&lt;p&gt;我的想法是，要不干脆把  base-building 改成关卡编辑器。把你基地当成Tower of Defense 的地牢来设计，家族成员通过占位和分工设计成闯关NPC，最后把你家族里战斗力最强的配置上最好的装备和武器设计成boss。然后拿一部分家产作为其他玩家闯关成功的奖励。别的玩家来闯关，是闯你家的副本，这样不完全破坏你的家，也可以让玩家发挥自己聪明才智，让别的玩家体会会被阴、被虐的乐趣。&lt;/p&gt;
&lt;p&gt;有了「家族」和「关卡」两套机制，游戏的玩家也成了游戏机制进化的一部分，可以说病毒式传播，生生不息了。反正我又不做游戏，所以随便YY，不用关心可行性和成本，谁有兴趣请自行挪用，最好做出来能邀请我内测 :)&lt;/p&gt;</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">est</dc:creator><pubDate>Mon, 12 Feb 2024 14:52:00 +0800</pubDate><guid isPermaLink="false">tag:None,2024-02-12:/2024/stdout-02</guid><category>stdout</category></item><item><title>Deal with the world</title><link>https://blog.est.im/2024/stderr-03</link><description>&lt;p&gt;Disclaimer: ESL speaker with bad English writing skills. This rant is "Organic🌱🌿♻️🍃" produced and has not be auto-corrected by spell-checkers nor AI/LLM chemicals.&lt;/p&gt;
&lt;p&gt;I engage with online arguments from strangers on the Interweb from time to time. Some of replies I receive often is "Essence of Leverage", a slang/meme in Chinese which resembles "trolling". I confess I did do this on purpose in order to consume my bordom and adjust my low self-esteem. During &lt;a href="https://www.v2ex.com/t/1015322"&gt;today's heated back &amp;amp; forth replies&lt;/a&gt;, the thread was moved to flamewar section, the opposition laughed me for been too childish like a tolder, or too old like a stuborn 40yo, which if funny, because apparently there's &lt;a href="archives/2993.html"&gt;something wrong&lt;/a&gt; that urgently needs correction?&lt;/p&gt;
&lt;p&gt;Calling me old might &lt;em&gt;ouch&lt;/em&gt; me if I were younger, but now it's hurting less, maybe just a meh. In retrospection, I came to the conclusion that there are two stages of world-view: for young adults, there's a strong opinion that some part of the world is wrong, and there's strong motivation of pursuade others how the world &lt;strong&gt;should be&lt;/strong&gt;. Few years back I was in that precise state, I spent hours and days battling speech from others, like to defend my faith or something, hoping to achieve something out of it.&lt;/p&gt;
&lt;p&gt;As age grows, I found stalemate , and hopefully peace. There's nothing wrong with the world, in fact that the world is inperfect by design, our brain is modeling the world in a causuality-reality way. But physical world can't always be encapsulated in matters of verbatim reasons, shit happens all the time for no reason. and would never go the way with most people's wish. There's little one could do to change it, maybe at special occasions, by some extreme luck, chosen ones can play a role in some social movement showing how the world &lt;strong&gt;could be&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;This brings up my favorite  episodes from 2023, &lt;em&gt;What If&lt;/em&gt; from Marvel Studios. There are so many possibilities for each alternate story line. So in real life, why do we have to assign ourselves to the fixed label given by desiganated social hierarchy? Does 40yo have to be wise and know-all? Does opinions from adults have to be affirmative? I think it's not. People grow up accustomed with education background and socio-economic environments, and get used and blind-folded by it. Staying curious and foolish is the key to jump out of the circle. Challenge one's world-view and vice-versa is benificial for one's own good, and especially so in "collective" culture sphere of China, but changing others' is a waste of time.&lt;/p&gt;</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">est</dc:creator><pubDate>Sun, 11 Feb 2024 22:52:00 +0800</pubDate><guid isPermaLink="false">tag:None,2024-02-11:/2024/stderr-03</guid><category>stderr</category></item><item><title>FastAPI/Starlette 长连接感知断开</title><link>https://blog.est.im/2024/stdout-01</link><description>&lt;p&gt;之前写过如何 &lt;a href="/2023/stdout-12"&gt;在服务器重启的时候感知长连接&lt;/a&gt;，最近发现折腾复杂了。&lt;/p&gt;
&lt;p&gt;&lt;a href="https://github.com/encode/starlette/discussions/1776"&gt;https://github.com/encode/starlette/discussions/1776&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;测试代码： &lt;/p&gt;
&lt;pre&gt;&lt;code&gt;import asyncio

async def async_streamer():
    try:
        while True:
            yield b&amp;quot;--boundary\r\nContent-Type: text/plain\r\nContent-Length: 1\r\n\r\n1\r\n&amp;quot;
            await asyncio.sleep(0)
    except asyncio.CancelledError:
        print(&amp;quot;caught cancelled error&amp;quot;)

app = Starlette(routes=[
    Route('/async', async_endpoint),
])
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;跑起来： &lt;code&gt;uvicorn stream:app&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;这段代码粗一看没啥大不了的，但是神奇的地方在于，如果去掉 &lt;code&gt;try ... except asyncio.CancelledError&lt;/code&gt; ，代码也能正常跑&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;
async def async_streamer():
    while True:
        yield b&amp;quot;--boundary\r\nContent-Type: text/plain\r\nContent-Length: 1\r\n\r\n1\r\n&amp;quot;
        await asyncio.sleep(0)
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;而且不会报错！最蛋痛的是，这玩意因为是个 &lt;code&gt;while True&lt;/code&gt;，如果你里面有打开的数据库连接，是不会中断的，也不会回收的。因为这个 coroutine 没有继续 &lt;code&gt;async for&lt;/code&gt; 来消费，就一直挂在进程里当僵尸了！&lt;/p&gt;
&lt;p&gt;加上 &lt;code&gt;try ... except asyncio.CancelledError&lt;/code&gt;，能捕获出错，也能处理善后了。&lt;/p&gt;
&lt;p&gt;真是神奇啊。不知道是 uvicorn 的特性，还是 ASGI 都这样。&lt;/p&gt;</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">est</dc:creator><pubDate>Thu, 18 Jan 2024 14:44:12 +0800</pubDate><guid isPermaLink="false">tag:None,2024-01-18:/2024/stdout-01</guid><category>stdout</category></item><item><title>碎碎念一下《年会不能停》，微剧透</title><link>https://blog.est.im/2024/stderr-02</link><description>&lt;p&gt;首先，《年会不能停》是一部喜剧电影。不是纪录片。在这个设定下，我可以给这个喜剧片9分。它给我带来2个小时的吸引力和快乐，这一点就很值。&lt;/p&gt;
&lt;p&gt;我去看之前还四处查阅了是否适合带小孩和长辈去看。看完的结论是全家看得其乐融融毫无压力。那么多职场黑话丝毫不妨碍非职场人群理解故事。&lt;/p&gt;
&lt;p&gt;然后说几点感受吧。&lt;/p&gt;
&lt;p&gt;第一，女一号感觉是硬安排的。对剧情推动作用不大。但是形象好气质佳，很让人看得下，去从而忍受角色定位问题和演技问题。&lt;/p&gt;
&lt;p&gt;然后，整个剧情背景设定，某个大公司要裁员。感觉这个矛盾是整个剧情有意回避了，虽然最后是大团圆解决，但是没能回答一个根本的问题：”打工人胜利了，公司的前景会变好吗？“ 如果你认真考虑这个问题，发现剧里的反派一号的苦衷了。喜剧的内核都是悲剧啊。&lt;/p&gt;
&lt;p&gt;其次，我觉得董事长的设定偏故事性了。年会不能停，出这么大个事，就这样过去了？不说面子上挂不住的问题，股价，或者资方，还有供应商关系都会栽个大跟斗吧。不乐观。当然网上更有趣的是借题发挥，比如豆瓣这条评论很经典：&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;a href="https://www.douban.com/people/riflee1/?"&gt;李下&lt;/a&gt; 看过  2023-12-31 08:49:16 四川 14750 有用 &lt;br /&gt;
恶只到宰相，皇帝是被蒙蔽且善的。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;哈哈哈。上面本意是好的，就是下面执行歪了。&lt;/p&gt;
&lt;p&gt;最后，我想稍微深入讨论一个情节，「优化厂里技术最牛的人」，我感觉比较……假。技术最牛的，应该是不怕丢工作的，在哪里不是干活。技术最牛的既然摆明了要挑事，那么下家多半是找好了。这个时候按照情节需要，面对挽留的 counter-offer，我觉得一般有职场常识的人都会拒掉。因为无论 counter-offer 有多诱人，都会彻底扭转职场地位，属于比正式合同更卖身契的玩意，你的劳资关系从双方情愿变成了单向奔赴。以后有的是苦吃。&lt;/p&gt;</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">est</dc:creator><pubDate>Sat, 13 Jan 2024 22:45:53 +0800</pubDate><guid isPermaLink="false">tag:None,2024-01-13:/2024/stderr-02</guid><category>stderr</category></item><item><title>如何摆脱霉运</title><link>https://blog.est.im/2024/stdin-01</link><description>&lt;p&gt;悲观者总是正确，乐观者总是成功。&lt;a href="https://www.dedao.cn/share/course/article?id=Lpy0edZAG5mnK0wqG9XzD9BkoajY4x"&gt;摘抄&lt;/a&gt;一些好玩的：&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;有一个英国的心理学家，叫理查德·怀斯曼，他也是英国赫特福德大学的教授。他曾经做过一个实验。大概过程是，招募两组人。第一组人，总是觉得自己最近有点倒霉。第二组人，正好相反，总觉得自己运气不错。怀斯曼就请这两组人看同一份报纸，并且给他们一个任务，数数这张报纸里面，一共有多少张照片。结果发现，倒霉组的平均耗时是，两分钟。而幸运组的平均耗时，还不到十秒钟。是幸运组的人眼力特别好吗？并不是。是因为在这张报纸的第二页，有一个巨大的广告，上面写着一行字，别数了，这张报纸上一共有43张照片。为什么倒霉组的人大都没注意到这个信息？有可能是，大家都想着，我本来运气就不太好，可不能分心大意。而幸运组人可能会觉得，四处多看看，又没什么损失，万一有意外发现呢？后来，怀斯曼又做了一组类似的实验。在报纸中间放了一个大广告，上面写着，别数了，告诉实验人员你看到了这行字，就能赢得250英镑。结果，倒霉组的多数人，又错过了这个信息。怀斯曼就得出一个结论，不幸的人，因为太专注于寻找特定的东西，而错过了别的机会。把这个结论再延伸一步，所谓倒霉，就是太执着于某个单一路线，对周围的好事视而不见。而所谓走运，就是不执着于特定目标，并在沿途发现更多的新机会。&lt;br /&gt;
借用马斯克的说法，很多人花了很长时间试图解决某个领域的棘手问题。但他们不会去思考有没有办法把这个解决方案应用到其他领域。简单说就是，越开放，越幸运；越执拗，越倒霉。&lt;br /&gt;
你可能会说，假如没有目标，没有计划，万一遇到什么变动，岂不是容易做应激反应，到时候损失更大？别着急，目标和应激反应之间，其实有一个折中的思维方式，叫做，踏脚石思维。也就是，在你前往一个目标的路上，你会遇到很多阶段性的发现，每个发现，就像一个踏脚石。但是，这个踏脚石未必会引导你前往最初的目标，它可能指向别的地方。这时，你就得顺着这个踏脚石，往新奇的地方前进。很多了不起的成就，就是这么来的。比如，YouTube最初的设想是，做一个视频约会网站。后来他们发现大家喜欢在上面发五花八门的视频，就干脆改做视频网站。再比如，当年很多人尝试造飞机，发明了专门的飞机技术，但最后造出飞机的莱特兄弟，使用的是造自行车的技术。再比如，雷达上有个驱动磁控管的部件，后来成了微波炉的核心技术。你看，这些成果都不来自最初的计划，而是中途出现的踏脚石。换句话说，面对不确定的环境时，长期的焦虑可以有。但眼前的开放与好奇，也许更重要。什么是面对世界的最好的姿态？借用理查德·费曼的一句话，以最散漫、最不羁、最原创的方式，努力学习你最感兴趣的东西。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;成功大概有两条路，一个是按照悲观者做预期准备，排除一切可能出错的因素，那么剩余的结局必然成功；&lt;/p&gt;
&lt;p&gt;另一种就是在成功的边缘疯狂试探，一不小心中了呢？&lt;/p&gt;</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">est</dc:creator><pubDate>Thu, 11 Jan 2024 21:10:12 +0800</pubDate><guid isPermaLink="false">tag:None,2024-01-11:/2024/stdin-01</guid><category>stdin</category></item><item><title>Start positive</title><link>https://blog.est.im/2024/stderr-01</link><description>&lt;p&gt;看了 Tom Scott 的 &lt;a href="https://www.youtube.com/watch?v=7DKv5H5Frt0"&gt;After ten years, it's time to stop making videos.&lt;br /&gt;
&lt;/a&gt; 很是感动。他2014年1月4日开始传 youtube 科技类的视频，开始每天一集后来定下来每周一更。多么强大的毅力，才能把一件事坚持10年 streak。&lt;/p&gt;
&lt;p&gt;恰好今天也在各种群和X 上看到说「时间的朋友跨年演讲上座率不到1/3」，抛开&lt;a href="https://wx2.sinaimg.cn/large/7a904c3dgy1hlfc1ci9gkj20wc0uwjwt.jpg"&gt;事实&lt;/a&gt;不谈，突然 B站 就给我推了这个 &lt;a href="https://www.bilibili.com/video/BV1Wa4y1z7iR"&gt;我是罗胖罗振宇，我来B站了&lt;br /&gt;
&lt;/a&gt;。罗胖说他坚持了10年每天在微信上发一段60s语音。我觉得也挺神的。 &lt;/p&gt;
&lt;p&gt;恰好看到&lt;a href="https://twitter.com/Fenng/status/1742165438816248242"&gt;@Fenng说&lt;/a&gt;这个事，他的论点还选还挺好的，这世界终究是由乐观者推动的。虽然贴那个 ChatGPT 作为论据有点。。。。。&lt;/p&gt;
&lt;p&gt;2024年对我而言开局十分糟糕。12月孩子陆陆续续咳嗽了快一个月了，最后查出来支原体感冒做雾化、请假输液折腾得不轻，元旦三天假期我也陪着感冒鼻涕（positive了），感觉人到中年身体一年不如一年了，破事一堆接着一堆。今天第一天上班也是头昏眼花无精打采。Tom Scott，罗振宇，Fenng 都不是我最欣赏的那类influencer/大V，你要挑毛病那我也能罗列一大堆，但是不妨碍我觉得这是2024年开端最好的启发：做一个乐观的人，努力去改变。反正都中年老男人了，也没啥好失去的。不要活得那么战战兢兢。&lt;/p&gt;</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">est</dc:creator><pubDate>Tue, 02 Jan 2024 23:21:42 +0800</pubDate><guid isPermaLink="false">tag:None,2024-01-02:/2024/stderr-01</guid><category>stderr</category></item><item><title>这个糟糕的世界对中年男人的恶意</title><link>https://blog.est.im/2023/stderr-16</link><description>&lt;p&gt;人到中年，形败气衰，总有一种有心无力的感觉。到了这个年龄段，最大的不舒服就是和这个世界从愈演愈烈的摩擦，变成轰轰烈烈的冲突。&lt;/p&gt;
&lt;p&gt;前几天工作上，快下班的时候甲方紧张兮兮找到我要支持一些业务，问就是急。结果我这边调整之后，另外的对接方放鸽子了。我也因为手头忙别的没在意。好巧不巧几天过后，调整导致了业务问题。全责，惨。&lt;/p&gt;
&lt;p&gt;你说我懒吧，我它妈居然愿意在下班的时候接需求；你说我不负责吧，不负责我为啥不找个冠冕堂皇的理由推脱掉或者至少拖延一点时间。你说我为啥不仔细一点吧，犯错真的是个概率问题，而且我在对接方跑路的情况下独自也干预不了什么。为啥调整导致了问题，屎山呗。屎山怎么来的？还不都是「紧急需求」日积月累来的。为啥屎山不缝缝补补熨平一点？这玩意不记劳也不记功啊。但归根结底，谁理会这些苦衷啊，只能默默承担。&lt;/p&gt;
&lt;p&gt;21点回家吃饭，拿起手机刚刷到学校「抵制洋节」，刚想嗤之以鼻问孩子怎么看，还没开口，孩子就嘀咕，看到国外过节，家家户户在客厅摆一颗圣诞树，抱怨说老爸太抠了。我语塞。想起来之前（实际上是2012年）淘宝买一颗1.5的也就30元也不贵，结果现在一搜，好家伙普遍70、80了。没买到便宜货，比亏钱还难受。顿时心里非常不爽！&lt;/p&gt;
&lt;p&gt;吃完饭，丈母娘在抱怨为啥昨晚（因为穷，所以定时在谷电时段启动的）洗碗机没工作。我看了下洗碗机的门没关好，当然不会启动。这件事从来都是反复抱怨，就是舍不得去关一下门。合着因为洗碗机是我买的和推广的，所有鸡毛蒜皮的事都得我来兜底呗。&lt;/p&gt;
&lt;p&gt;真是备受打击的一天啊。长大的过程，从来没在乎来自身边的关爱和鼓励，到现在逐渐沦落成指责和嫌弃，才追悔莫及。似乎全世界终究会剥夺老男人的一切，只留下沉甸甸的责任，说的好听点，中年男人是很多人的仰仗和依赖，说得难听点，中年男人唯一的价值就是被索取。或许这就是中年男人的命吧。&lt;/p&gt;
&lt;p&gt;今天政策方面发生了大事，《网络游戏管理办法（草案征求意见稿）》搞得鸡飞狗跳，对整个行业的悲观，加剧了心情的低落。&lt;/p&gt;
&lt;p&gt;于是又观察到一个点，可能很多聪明的人早早就察觉了老男人迟早被吃干抹净这个事实，所以默契的联合起来形成父权，对关键资源和社会关系形成垄断和卡位。自己辛辛苦苦创造/掠夺/搏取的财富，凭啥要被傻逼们摆布？为什么很多职场女性觉得自己遭到了歧视和不公？因为你被当男人对待了。&lt;/p&gt;
&lt;p&gt;喜欢 ownership 是吧，得，职责对等，那就所有权极端化，私有制神圣不可侵犯，最终卷出来几个阶级顶端的胜利者老男人 own 所有人。这可能就是成年人对全世界的一份报复吧。Screw y'all! Fuck this world!&lt;/p&gt;</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">est</dc:creator><pubDate>Sat, 23 Dec 2023 00:44:45 +0800</pubDate><guid isPermaLink="false">tag:None,2023-12-23:/2023/stderr-16</guid><category>stderr</category></item><item><title>不能忘却的记忆</title><link>https://blog.est.im/2023/stdout-19</link><description>&lt;p&gt;由于小爱同学不能导出就挨个手打出来。纪念这个日子。&lt;/p&gt;
&lt;p&gt;&lt;img alt="" src="/images/2023/stdout-19-01.jpg" /&gt;&lt;/p&gt;
&lt;p&gt;一年前这几天，孩子和爱人相继病倒，我本来以为苟住了能以幸免结果在家人好转的时候一测体温发现偏高。于是赶紧洗了个澡，把小卧室腾出来，弄好电暖气、电吹风，装满开水壶，把mbp和其它个人物品搬进去，因为我知道接下来的日子将会无比煎熬。&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;date&lt;/th&gt;
&lt;th&gt;℃&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;2022-12-18 16:41&lt;/td&gt;
&lt;td&gt;37.3&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;2022-12-18 16:43&lt;/td&gt;
&lt;td&gt;37.3&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;2022-12-18 17.31&lt;/td&gt;
&lt;td&gt;38.1&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;2022-12-18 17:46&lt;/td&gt;
&lt;td&gt;38.3&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;2022-12-18 18:33&lt;/td&gt;
&lt;td&gt;39.3&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;2022-12-18 18.41&lt;/td&gt;
&lt;td&gt;38.7&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;2022-12-18 19:07&lt;/td&gt;
&lt;td&gt;38.3&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;2022-12-18 19:15&lt;/td&gt;
&lt;td&gt;38.7&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;2022-12-18 20:01&lt;/td&gt;
&lt;td&gt;38.6&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;2022-12-18 21:11&lt;/td&gt;
&lt;td&gt;39.5&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;2022-12-18 21:20&lt;/td&gt;
&lt;td&gt;38.9&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;2022-12-18 21:26&lt;/td&gt;
&lt;td&gt;39.1&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;2022-12-18 21:41&lt;/td&gt;
&lt;td&gt;39.2&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;2022-12-18 23:30&lt;/td&gt;
&lt;td&gt;38.4&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;2022-12-19 02:38&lt;/td&gt;
&lt;td&gt;39.3&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;2022-12-19 02:48&lt;/td&gt;
&lt;td&gt;38.3&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;2022-12-19 10:05&lt;/td&gt;
&lt;td&gt;38.5&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;2022-12-19 10:12&lt;/td&gt;
&lt;td&gt;37.9&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;2022-12-19 10:36&lt;/td&gt;
&lt;td&gt;37.4&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;2022-12-19 11:19&lt;/td&gt;
&lt;td&gt;37.7&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;2022-12-19 14:03&lt;/td&gt;
&lt;td&gt;37.7&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;2022-12-19 14:29&lt;/td&gt;
&lt;td&gt;37.0&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;2022-12-19 15:18&lt;/td&gt;
&lt;td&gt;37.7&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;2022-12-19 16:33&lt;/td&gt;
&lt;td&gt;37.6&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;2022-12-19 18:05&lt;/td&gt;
&lt;td&gt;38.1&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;2022-12-19 18:44&lt;/td&gt;
&lt;td&gt;37.8&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;2022-12-19 19:12&lt;/td&gt;
&lt;td&gt;37.2&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;2022-12-19 19:47&lt;/td&gt;
&lt;td&gt;37.8&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;2022-12-19 20:00&lt;/td&gt;
&lt;td&gt;37.6&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;2022-12-19 21:09&lt;/td&gt;
&lt;td&gt;37.2&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;2022-12-19 21:44&lt;/td&gt;
&lt;td&gt;37.2&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;2022-12-19 22:57&lt;/td&gt;
&lt;td&gt;36.9&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;2022-12-20 00:19&lt;/td&gt;
&lt;td&gt;37.2&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;2022-12-20 06:55&lt;/td&gt;
&lt;td&gt;37.1&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;2022-12-20 09:03&lt;/td&gt;
&lt;td&gt;37.0&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;2022-12-20 09:34&lt;/td&gt;
&lt;td&gt;37.0&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;2022-12-20 10:49&lt;/td&gt;
&lt;td&gt;36.8&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;2022-12-20 11:41&lt;/td&gt;
&lt;td&gt;38.0&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;2022-12-20 11:59&lt;/td&gt;
&lt;td&gt;38.4&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;2022-12-20 14:47&lt;/td&gt;
&lt;td&gt;38.6&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;2022-12-20 15:51&lt;/td&gt;
&lt;td&gt;38.1&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;2022-12-20 16:32&lt;/td&gt;
&lt;td&gt;38.0&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;2022-12-20 18:22&lt;/td&gt;
&lt;td&gt;38.3&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;2022-12-20 22:31&lt;/td&gt;
&lt;td&gt;38.4&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;2022-12-21 09:12&lt;/td&gt;
&lt;td&gt;38.1&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;2022-12-21 09:59&lt;/td&gt;
&lt;td&gt;38.2&lt;code&gt;*&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;2022-12-21 11:57&lt;/td&gt;
&lt;td&gt;38.2&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;2022-12-21 13:46&lt;/td&gt;
&lt;td&gt;37.5&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;2022-12-21 15:10&lt;/td&gt;
&lt;td&gt;37.5&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;2022-12-21 16.44&lt;/td&gt;
&lt;td&gt;37.2&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;2022-12-21 17:07&lt;/td&gt;
&lt;td&gt;37.0&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;2022-12-21 20:37&lt;/td&gt;
&lt;td&gt;37.2&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;2022-12-21 20:54&lt;/td&gt;
&lt;td&gt;37.7&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;2022-12-21 22:54&lt;/td&gt;
&lt;td&gt;38.3&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;2022-12-21 23:05&lt;/td&gt;
&lt;td&gt;38.4&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;2022-12-22 09:23&lt;/td&gt;
&lt;td&gt;36.7&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;2022-12-22 09:43&lt;/td&gt;
&lt;td&gt;37.3&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;2022-12-22 12:44&lt;/td&gt;
&lt;td&gt;37.6&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;&lt;code&gt;*&lt;/code&gt;: 布洛芬已用完&lt;/p&gt;
&lt;p&gt;可能大家只是看到一串冷冰冰的数字，但是我打字都是颤抖的，每一刻时间和体温都是刻骨铭心的记忆。&lt;/p&gt;
&lt;p&gt;NEVER FORGET!&lt;/p&gt;</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">est</dc:creator><pubDate>Thu, 21 Dec 2023 20:43:47 +0800</pubDate><guid isPermaLink="false">tag:None,2023-12-21:/2023/stdout-19</guid><category>stdout</category></item><item><title>京加高铁</title><link>https://blog.est.im/2023/stdout-18</link><description>&lt;p&gt;今天了解到这么一件事，白令海峡原来也就 82.5km 宽，水深55米，对于现代工程技术来说修桥和隧道都不是问题。&lt;/p&gt;
&lt;p&gt;&lt;img alt="" src="https://upload.wikimedia.org/wikipedia/commons/thumb/0/0e/BeringSt-close-VE.jpg/600px-BeringSt-close-VE.jpg" /&gt;&lt;/p&gt;
&lt;p&gt;如果中间那个岛做个中转站，那么两侧都各自30km左右。所以理论上从北京修一条到西雅图/加州的高铁完全没有问题。。&lt;/p&gt;
&lt;p&gt;&lt;img alt="" src="https://upload.wikimedia.org/wikipedia/commons/thumb/3/37/North_pole_map.jpeg/800px-North_pole_map.jpeg" /&gt;&lt;/p&gt;</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">est</dc:creator><pubDate>Mon, 18 Dec 2023 23:10:40 +0800</pubDate><guid isPermaLink="false">tag:None,2023-12-18:/2023/stdout-18</guid><category>stdout</category></item><item><title>query git notes with Github GraphQL</title><link>https://blog.est.im/2023/stdout-17</link><description>&lt;p&gt;git notes is an interesting feature, you can use it like &lt;/p&gt;
&lt;pre&gt;&lt;code class="language-bash"&gt;git notes add -m &amp;quot;hello test git notes&amp;quot;
git push origin 'refs/notes/*'
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Github supported them back &lt;a href="https://github.blog/2010-08-25-git-notes-display/"&gt;in 2010&lt;/a&gt; then gave up LMAO.&lt;/p&gt;
&lt;p&gt;If you need to retrive them with Github API, try GraphQL like this&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;  {
    repository(owner: "est", name: "snippets") {
      refs(refPrefix:"refs/notes/",first:1) {
        nodes{
          ... on Ref{
            target {
              oid
              ... on Commit{
                changedFilesIfAvailable
                message
                tree{
                  oid
                  entries{
                    oid
                    path
                    size
                    lineCount
                    mode
                    object{
                      ... on Blob{
                        byteSize
                        text
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    }
  }
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;It will return something like:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;  {
    "data": {
      "repository": {
        "refs": {
          "nodes": [
            {
              "target": {
                "oid": "bfdfda121f3d8a2d6aa399e3e8f0d58b3db0a543",
                "changedFilesIfAvailable": 1,
                "message": "Notes added by 'git notes add'",
                "tree": {
                  "oid": "2ab3e6a8b0dff6596fa60ecfb3c61bf91e5b4e1f",
                  "entries": [
                    {
                      "oid": "404d353a254ffbc97b2e16d17b8c100461aef586",
                      "path": "4fb1272f1e235580f87e3ec071984658de050dc9",
                      "size": 21,
                      "lineCount": 1,
                      "mode": 33188,
                      "object": {
                        "byteSize": 21,
                        "text": "hello test git notes\n"
                      }
                    }
                  ]
                }
              }
            }
          ]
        }
      }
    }
  }
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Here &lt;code&gt;"path": "4fb1272f1e235580f87e3ec071984658de050dc9"&lt;/code&gt; is the commit SHA.&lt;/p&gt;
&lt;p&gt;If you add more filter parameters in &lt;code&gt;refs()&lt;/code&gt; you can fetch all the notes.&lt;/p&gt;</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">est</dc:creator><pubDate>Mon, 27 Nov 2023 09:06:11 +0800</pubDate><guid isPermaLink="false">tag:None,2023-11-27:/2023/stdout-17</guid><category>stdout</category></item><item><title>VPS推荐：Hosteon</title><link>https://blog.est.im/2023/stdout-16</link><description>&lt;p&gt;继续&lt;a href="/202012/stderr-012"&gt;上次 Racknerd&lt;/a&gt; 之后发现这家还行。写了个&lt;a href="https://github.com/est/snippets/blob/master/vps_scan/main.py"&gt;爬虫&lt;/a&gt;扒了一下各色配置，独立服除外，有需要的自取&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;pid&lt;/th&gt;
&lt;th&gt;spec&lt;/th&gt;
&lt;th&gt;Disk&lt;/th&gt;
&lt;th&gt;Bandwidth&lt;/th&gt;
&lt;th&gt;Annual $&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href="https://my.hosteons.com/aff.php?aff=2128&amp;amp;pid=1"&gt;1&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;1C512M&lt;/td&gt;
&lt;td&gt;5GB&lt;/td&gt;
&lt;td&gt;100Mbps&lt;/td&gt;
&lt;td&gt;$27.00&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href="https://my.hosteons.com/aff.php?aff=2128&amp;amp;pid=7"&gt;7&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;6C8G&lt;/td&gt;
&lt;td&gt;100GB&lt;/td&gt;
&lt;td&gt;100Mbps&lt;/td&gt;
&lt;td&gt;$270.00&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href="https://my.hosteons.com/aff.php?aff=2128&amp;amp;pid=77"&gt;77&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;1C1G&lt;/td&gt;
&lt;td&gt;10GB&lt;/td&gt;
&lt;td&gt;1Tbps&lt;/td&gt;
&lt;td&gt;$21.00&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href="https://my.hosteons.com/aff.php?aff=2128&amp;amp;pid=78"&gt;78&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;2C1.5G&lt;/td&gt;
&lt;td&gt;20GB&lt;/td&gt;
&lt;td&gt;2Tbps&lt;/td&gt;
&lt;td&gt;$36.00&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href="https://my.hosteons.com/aff.php?aff=2128&amp;amp;pid=79"&gt;79&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;2C2G&lt;/td&gt;
&lt;td&gt;25GB&lt;/td&gt;
&lt;td&gt;3Tbps&lt;/td&gt;
&lt;td&gt;$45.00&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href="https://my.hosteons.com/aff.php?aff=2128&amp;amp;pid=80"&gt;80&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;2C2.5G&lt;/td&gt;
&lt;td&gt;30GB&lt;/td&gt;
&lt;td&gt;4Tbps&lt;/td&gt;
&lt;td&gt;$54.00&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href="https://my.hosteons.com/aff.php?aff=2128&amp;amp;pid=81"&gt;81&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;3C3G&lt;/td&gt;
&lt;td&gt;40GB&lt;/td&gt;
&lt;td&gt;5Tbps&lt;/td&gt;
&lt;td&gt;$63.00&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href="https://my.hosteons.com/aff.php?aff=2128&amp;amp;pid=83"&gt;83&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;3C5G&lt;/td&gt;
&lt;td&gt;50GB&lt;/td&gt;
&lt;td&gt;8Tbps&lt;/td&gt;
&lt;td&gt;$90.00&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href="https://my.hosteons.com/aff.php?aff=2128&amp;amp;pid=84"&gt;84&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;6C10G&lt;/td&gt;
&lt;td&gt;120GB&lt;/td&gt;
&lt;td&gt;12Tbps&lt;/td&gt;
&lt;td&gt;$180.00&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href="https://my.hosteons.com/aff.php?aff=2128&amp;amp;pid=85"&gt;85&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;10C12G&lt;/td&gt;
&lt;td&gt;150GB&lt;/td&gt;
&lt;td&gt;15Tbps&lt;/td&gt;
&lt;td&gt;$270.00&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href="https://my.hosteons.com/aff.php?aff=2128&amp;amp;pid=86"&gt;86&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;14C20G&lt;/td&gt;
&lt;td&gt;200GB&lt;/td&gt;
&lt;td&gt;20Tbps&lt;/td&gt;
&lt;td&gt;$450.00&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href="https://my.hosteons.com/aff.php?aff=2128&amp;amp;pid=87"&gt;87&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;20C30G&lt;/td&gt;
&lt;td&gt;300GB&lt;/td&gt;
&lt;td&gt;30Tbps&lt;/td&gt;
&lt;td&gt;$675.00&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href="https://my.hosteons.com/aff.php?aff=2128&amp;amp;pid=110"&gt;110&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;1C1G&lt;/td&gt;
&lt;td&gt;15GB&lt;/td&gt;
&lt;td&gt;2Tbps&lt;/td&gt;
&lt;td&gt;$21.00&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href="https://my.hosteons.com/aff.php?aff=2128&amp;amp;pid=111"&gt;111&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;2C2G&lt;/td&gt;
&lt;td&gt;20GB&lt;/td&gt;
&lt;td&gt;4Tbps&lt;/td&gt;
&lt;td&gt;$39.99&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href="https://my.hosteons.com/aff.php?aff=2128&amp;amp;pid=112"&gt;112&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;3C3G&lt;/td&gt;
&lt;td&gt;30GB&lt;/td&gt;
&lt;td&gt;6Tbps&lt;/td&gt;
&lt;td&gt;$49.50&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href="https://my.hosteons.com/aff.php?aff=2128&amp;amp;pid=113"&gt;113&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;4C4G&lt;/td&gt;
&lt;td&gt;40GB&lt;/td&gt;
&lt;td&gt;8Tbps&lt;/td&gt;
&lt;td&gt;$59.99&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href="https://my.hosteons.com/aff.php?aff=2128&amp;amp;pid=119"&gt;119&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;1C512M&lt;/td&gt;
&lt;td&gt;10GB&lt;/td&gt;
&lt;td&gt;500Gbps&lt;/td&gt;
&lt;td&gt;$24.00&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href="https://my.hosteons.com/aff.php?aff=2128&amp;amp;pid=120"&gt;120&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;1C1G&lt;/td&gt;
&lt;td&gt;15GB&lt;/td&gt;
&lt;td&gt;1Tbps&lt;/td&gt;
&lt;td&gt;$36.00&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href="https://my.hosteons.com/aff.php?aff=2128&amp;amp;pid=121"&gt;121&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;2C2G&lt;/td&gt;
&lt;td&gt;30GB&lt;/td&gt;
&lt;td&gt;2Tbps&lt;/td&gt;
&lt;td&gt;$72.00&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href="https://my.hosteons.com/aff.php?aff=2128&amp;amp;pid=122"&gt;122&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;2C3G&lt;/td&gt;
&lt;td&gt;50GB&lt;/td&gt;
&lt;td&gt;3Tbps&lt;/td&gt;
&lt;td&gt;$108.00&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href="https://my.hosteons.com/aff.php?aff=2128&amp;amp;pid=123"&gt;123&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;2C4G&lt;/td&gt;
&lt;td&gt;70GB&lt;/td&gt;
&lt;td&gt;4Tbps&lt;/td&gt;
&lt;td&gt;$144.00&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href="https://my.hosteons.com/aff.php?aff=2128&amp;amp;pid=124"&gt;124&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;4C5G&lt;/td&gt;
&lt;td&gt;90GB&lt;/td&gt;
&lt;td&gt;5Tbps&lt;/td&gt;
&lt;td&gt;$180.00&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href="https://my.hosteons.com/aff.php?aff=2128&amp;amp;pid=126"&gt;126&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;6C6G&lt;/td&gt;
&lt;td&gt;100GB&lt;/td&gt;
&lt;td&gt;6Tbps&lt;/td&gt;
&lt;td&gt;$216.00&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href="https://my.hosteons.com/aff.php?aff=2128&amp;amp;pid=127"&gt;127&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;6C7G&lt;/td&gt;
&lt;td&gt;120GB&lt;/td&gt;
&lt;td&gt;7Tbps&lt;/td&gt;
&lt;td&gt;$252.00&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href="https://my.hosteons.com/aff.php?aff=2128&amp;amp;pid=128"&gt;128&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;8C8G&lt;/td&gt;
&lt;td&gt;140GB&lt;/td&gt;
&lt;td&gt;8Tbps&lt;/td&gt;
&lt;td&gt;$288.00&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href="https://my.hosteons.com/aff.php?aff=2128&amp;amp;pid=129"&gt;129&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;8C9G&lt;/td&gt;
&lt;td&gt;150GB&lt;/td&gt;
&lt;td&gt;9Tbps&lt;/td&gt;
&lt;td&gt;$324.00&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href="https://my.hosteons.com/aff.php?aff=2128&amp;amp;pid=130"&gt;130&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;10C10G&lt;/td&gt;
&lt;td&gt;170GB&lt;/td&gt;
&lt;td&gt;10Tbps&lt;/td&gt;
&lt;td&gt;$360.00&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href="https://my.hosteons.com/aff.php?aff=2128&amp;amp;pid=131"&gt;131&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;10C11G&lt;/td&gt;
&lt;td&gt;180GB&lt;/td&gt;
&lt;td&gt;11Tbps&lt;/td&gt;
&lt;td&gt;$396.00&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href="https://my.hosteons.com/aff.php?aff=2128&amp;amp;pid=132"&gt;132&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;12C12G&lt;/td&gt;
&lt;td&gt;200GB&lt;/td&gt;
&lt;td&gt;12Tbps&lt;/td&gt;
&lt;td&gt;$432.00&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href="https://my.hosteons.com/aff.php?aff=2128&amp;amp;pid=154"&gt;154&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;1C1G&lt;/td&gt;
&lt;td&gt;20GB&lt;/td&gt;
&lt;td&gt;4Tbps&lt;/td&gt;
&lt;td&gt;$33.00&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href="https://my.hosteons.com/aff.php?aff=2128&amp;amp;pid=155"&gt;155&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;2C2G&lt;/td&gt;
&lt;td&gt;30GB&lt;/td&gt;
&lt;td&gt;6Tbps&lt;/td&gt;
&lt;td&gt;$40.00&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href="https://my.hosteons.com/aff.php?aff=2128&amp;amp;pid=156"&gt;156&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;3C3G&lt;/td&gt;
&lt;td&gt;40GB&lt;/td&gt;
&lt;td&gt;8Tbps&lt;/td&gt;
&lt;td&gt;$60.00&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href="https://my.hosteons.com/aff.php?aff=2128&amp;amp;pid=157"&gt;157&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;4C4G&lt;/td&gt;
&lt;td&gt;50GB&lt;/td&gt;
&lt;td&gt;10Tbps&lt;/td&gt;
&lt;td&gt;$84.00&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href="https://my.hosteons.com/aff.php?aff=2128&amp;amp;pid=158"&gt;158&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;5C5G&lt;/td&gt;
&lt;td&gt;60GB&lt;/td&gt;
&lt;td&gt;12Tbps&lt;/td&gt;
&lt;td&gt;$105.00&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href="https://my.hosteons.com/aff.php?aff=2128&amp;amp;pid=159"&gt;159&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;6C6G&lt;/td&gt;
&lt;td&gt;70GB&lt;/td&gt;
&lt;td&gt;14Tbps&lt;/td&gt;
&lt;td&gt;$130.00&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href="https://my.hosteons.com/aff.php?aff=2128&amp;amp;pid=160"&gt;160&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;7C7G&lt;/td&gt;
&lt;td&gt;80GB&lt;/td&gt;
&lt;td&gt;16Tbps&lt;/td&gt;
&lt;td&gt;$145.00&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href="https://my.hosteons.com/aff.php?aff=2128&amp;amp;pid=161"&gt;161&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;8C8G&lt;/td&gt;
&lt;td&gt;90GB&lt;/td&gt;
&lt;td&gt;18Tbps&lt;/td&gt;
&lt;td&gt;$170.00&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href="https://my.hosteons.com/aff.php?aff=2128&amp;amp;pid=162"&gt;162&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;9C9G&lt;/td&gt;
&lt;td&gt;100GB&lt;/td&gt;
&lt;td&gt;20Tbps&lt;/td&gt;
&lt;td&gt;$190.00&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href="https://my.hosteons.com/aff.php?aff=2128&amp;amp;pid=163"&gt;163&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;10C10G&lt;/td&gt;
&lt;td&gt;110GB&lt;/td&gt;
&lt;td&gt;22Tbps&lt;/td&gt;
&lt;td&gt;$210.00&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href="https://my.hosteons.com/aff.php?aff=2128&amp;amp;pid=164"&gt;164&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;11C11G&lt;/td&gt;
&lt;td&gt;120GB&lt;/td&gt;
&lt;td&gt;24Tbps&lt;/td&gt;
&lt;td&gt;$240.00&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href="https://my.hosteons.com/aff.php?aff=2128&amp;amp;pid=165"&gt;165&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;12C12G&lt;/td&gt;
&lt;td&gt;130GB&lt;/td&gt;
&lt;td&gt;26Tbps&lt;/td&gt;
&lt;td&gt;$260.00&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href="https://my.hosteons.com/aff.php?aff=2128&amp;amp;pid=166"&gt;166&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;8C8G&lt;/td&gt;
&lt;td&gt;50GB&lt;/td&gt;
&lt;td&gt;30Tbps&lt;/td&gt;
&lt;td&gt;$98.99&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href="https://my.hosteons.com/aff.php?aff=2128&amp;amp;pid=167"&gt;167&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;4C4G&lt;/td&gt;
&lt;td&gt;25GB&lt;/td&gt;
&lt;td&gt;15Tbps&lt;/td&gt;
&lt;td&gt;$56.99&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href="https://my.hosteons.com/aff.php?aff=2128&amp;amp;pid=168"&gt;168&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;4C4G&lt;/td&gt;
&lt;td&gt;25GB&lt;/td&gt;
&lt;td&gt;15Tbps&lt;/td&gt;
&lt;td&gt;$79.00&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href="https://my.hosteons.com/aff.php?aff=2128&amp;amp;pid=169"&gt;169&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;8C8G&lt;/td&gt;
&lt;td&gt;50GB&lt;/td&gt;
&lt;td&gt;30Tbps&lt;/td&gt;
&lt;td&gt;$158.00&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href="https://my.hosteons.com/aff.php?aff=2128&amp;amp;pid=170"&gt;170&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;12C12G&lt;/td&gt;
&lt;td&gt;75GB&lt;/td&gt;
&lt;td&gt;30Tbps&lt;/td&gt;
&lt;td&gt;$235.00&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href="https://my.hosteons.com/aff.php?aff=2128&amp;amp;pid=171"&gt;171&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;16C16G&lt;/td&gt;
&lt;td&gt;100GB&lt;/td&gt;
&lt;td&gt;30Tbps&lt;/td&gt;
&lt;td&gt;$318.00&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href="https://my.hosteons.com/aff.php?aff=2128&amp;amp;pid=172"&gt;172&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;20C20G&lt;/td&gt;
&lt;td&gt;125GB&lt;/td&gt;
&lt;td&gt;30Tbps&lt;/td&gt;
&lt;td&gt;$399.00&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href="https://my.hosteons.com/aff.php?aff=2128&amp;amp;pid=173"&gt;173&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;24C24G&lt;/td&gt;
&lt;td&gt;150GB&lt;/td&gt;
&lt;td&gt;30Tbps&lt;/td&gt;
&lt;td&gt;$480.00&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href="https://my.hosteons.com/aff.php?aff=2128&amp;amp;pid=174"&gt;174&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;28C28G&lt;/td&gt;
&lt;td&gt;175GB&lt;/td&gt;
&lt;td&gt;30Tbps&lt;/td&gt;
&lt;td&gt;$575.00&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href="https://my.hosteons.com/aff.php?aff=2128&amp;amp;pid=175"&gt;175&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;32C32G&lt;/td&gt;
&lt;td&gt;200GB&lt;/td&gt;
&lt;td&gt;30Tbps&lt;/td&gt;
&lt;td&gt;$660.00&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href="https://my.hosteons.com/aff.php?aff=2128&amp;amp;pid=176"&gt;176&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;36C36G&lt;/td&gt;
&lt;td&gt;225GB&lt;/td&gt;
&lt;td&gt;30Tbps&lt;/td&gt;
&lt;td&gt;$730.00&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href="https://my.hosteons.com/aff.php?aff=2128&amp;amp;pid=177"&gt;177&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;40C40G&lt;/td&gt;
&lt;td&gt;250GB&lt;/td&gt;
&lt;td&gt;30Tbps&lt;/td&gt;
&lt;td&gt;$810.00&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href="https://my.hosteons.com/aff.php?aff=2128&amp;amp;pid=178"&gt;178&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;1C1G&lt;/td&gt;
&lt;td&gt;20GB&lt;/td&gt;
&lt;td&gt;2Tbps&lt;/td&gt;
&lt;td&gt;$21.00&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href="https://my.hosteons.com/aff.php?aff=2128&amp;amp;pid=179"&gt;179&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;32C32G&lt;/td&gt;
&lt;td&gt;1TB&lt;/td&gt;
&lt;td&gt;1Gbps&lt;/td&gt;
&lt;td&gt;$540.00&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href="https://my.hosteons.com/aff.php?aff=2128&amp;amp;pid=180"&gt;180&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;64C64G&lt;/td&gt;
&lt;td&gt;1TB&lt;/td&gt;
&lt;td&gt;1Gbps&lt;/td&gt;
&lt;td&gt;$725.00&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href="https://my.hosteons.com/aff.php?aff=2128&amp;amp;pid=181"&gt;181&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;128C128G&lt;/td&gt;
&lt;td&gt;2x&lt;/td&gt;
&lt;td&gt;1Gbps&lt;/td&gt;
&lt;td&gt;$1850.00&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">est</dc:creator><pubDate>Sun, 19 Nov 2023 22:10:55 +0800</pubDate><guid isPermaLink="false">tag:None,2023-11-19:/2023/stdout-16</guid><category>stdout</category></item><item><title>太阳系天体的 unicode 符号</title><link>https://blog.est.im/2023/stdout-15</link><description>&lt;p&gt;发现&lt;a href="https://en.wikipedia.org/wiki/Astronomical_symbols"&gt;Astronomical symbols&lt;/a&gt;，&lt;a href="https://en.wikipedia.org/wiki/Planet_symbols"&gt;Planet symbols&lt;br /&gt;
&lt;/a&gt; 及 &lt;a href="https://en.wikipedia.org/wiki/Alchemical_symbol#Unicode"&gt;Alchemical symbol&lt;/a&gt;&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;IAU&lt;/th&gt;
&lt;th&gt;七金&lt;/th&gt;
&lt;th&gt;符号&lt;/th&gt;
&lt;th&gt;名&lt;/th&gt;
&lt;th&gt;name&lt;/th&gt;
&lt;th&gt;星期&lt;/th&gt;
&lt;th&gt;七曜&lt;/th&gt;
&lt;th&gt;备注&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;金&lt;/td&gt;
&lt;td&gt;☉︎&lt;/td&gt;
&lt;td&gt;太阳&lt;/td&gt;
&lt;td&gt;Sun&lt;/td&gt;
&lt;td&gt;星期天&lt;/td&gt;
&lt;td&gt;日曜&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;银&lt;/td&gt;
&lt;td&gt;☾&lt;/td&gt;
&lt;td&gt;月球&lt;/td&gt;
&lt;td&gt;Moon&lt;/td&gt;
&lt;td&gt;星期一&lt;/td&gt;
&lt;td&gt;月曜&lt;/td&gt;
&lt;td&gt;也可以画成 ☽︎ &lt;br&gt;或者月相 🌑︎🌒︎🌓︎🌔︎🌕︎🌖︎🌗︎🌘︎，🌚︎🌛︎︎🌝︎︎🌜︎︎&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;H&lt;/td&gt;
&lt;td&gt;汞&lt;/td&gt;
&lt;td&gt;☿&lt;/td&gt;
&lt;td&gt;水星&lt;/td&gt;
&lt;td&gt;Mercury&lt;/td&gt;
&lt;td&gt;星期三&lt;/td&gt;
&lt;td&gt;水曜&lt;/td&gt;
&lt;td&gt;赫耳墨斯(Hermes)，罗马人称 Mercury&lt;br&gt;现代人称「爱马仕」的双盘蛇带翼权杖 Caduceus &lt;font size="5"&gt;☤&lt;/font&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;V&lt;/td&gt;
&lt;td&gt;铜&lt;/td&gt;
&lt;td&gt;♀&lt;/td&gt;
&lt;td&gt;金星&lt;/td&gt;
&lt;td&gt;Venus&lt;/td&gt;
&lt;td&gt;星期五&lt;/td&gt;
&lt;td&gt;金曜&lt;/td&gt;
&lt;td&gt;维纳斯&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;E&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;🜨&lt;/td&gt;
&lt;td&gt;地球&lt;/td&gt;
&lt;td&gt;Earch&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;&lt;em&gt;Bible&lt;/em&gt; 里说的四条河把地球分成四洲&lt;br&gt;另外的符号是 ♁ 表示十字架钉个球 &lt;em&gt;globus cruciger&lt;/em&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;M&lt;/td&gt;
&lt;td&gt;铁&lt;/td&gt;
&lt;td&gt;♂&lt;/td&gt;
&lt;td&gt;火星&lt;/td&gt;
&lt;td&gt;Mars&lt;/td&gt;
&lt;td&gt;星期二&lt;/td&gt;
&lt;td&gt;火曜&lt;/td&gt;
&lt;td&gt;符号是战神盾牌和长矛&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;J&lt;/td&gt;
&lt;td&gt;锡&lt;/td&gt;
&lt;td&gt;♃&lt;/td&gt;
&lt;td&gt;木星&lt;/td&gt;
&lt;td&gt;Jupiter&lt;/td&gt;
&lt;td&gt;星期四&lt;/td&gt;
&lt;td&gt;木曜&lt;/td&gt;
&lt;td&gt;字母 Zeta（大写Ζ小写ζ）加一杠，代表宙斯/朱庇特&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;S&lt;/td&gt;
&lt;td&gt;铅&lt;/td&gt;
&lt;td&gt;♄&lt;/td&gt;
&lt;td&gt;土星&lt;/td&gt;
&lt;td&gt;Saturn&lt;/td&gt;
&lt;td&gt;星期六&lt;/td&gt;
&lt;td&gt;土曜&lt;/td&gt;
&lt;td&gt;字母 kappa-rho ，表示 Kronos 加一杠&lt;br&gt;泰坦 克罗诺斯，宙斯他爹&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;U&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;⛢&lt;/td&gt;
&lt;td&gt;天王星&lt;/td&gt;
&lt;td&gt;Uranus&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;N&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;♅&lt;/td&gt;
&lt;td&gt;海王星&lt;/td&gt;
&lt;td&gt;Neptune&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;几点：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;其中 金星/火星 符号被拿来代表 女/男 是1750年代Carl Linnaeus干的。 &lt;/li&gt;
&lt;li&gt;冥王星 Pluto 发现的晚，占星术还没来得及改版就惨遭除名成矮行星。&lt;/li&gt;
&lt;li&gt;星期和对应的天体意义，&lt;a href="https://en.wikipedia.org/wiki/Names_of_the_days_of_the_week"&gt;全世界惊人的一致&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;其它各种卫星，小行星的名字就懒得贴了。&lt;/p&gt;
&lt;p&gt;有了这些符号，我们可以画一个比如托勒密的简化版太阳系模型：&lt;/p&gt;
&lt;p&gt;&lt;img alt="" src="/images/2023/stdout-15-01.jpg" /&gt;&lt;/p&gt;
&lt;p&gt;本文源自《&lt;a href="https://www.cricetuscricetus.co.uk/post/copernicus-galileo-kepler-they-all-lacked-proof"&gt;哥白尼、伽利略、开普勒都是脱离证据拍脑袋撕逼&lt;/a&gt;》一文。&lt;a href="https://news.ycombinator.com/item?id=38300902"&gt;HN&lt;/a&gt;&lt;/p&gt;</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">est</dc:creator><pubDate>Sat, 18 Nov 2023 16:15:51 +0800</pubDate><guid isPermaLink="false">tag:None,2023-11-18:/2023/stdout-15</guid><category>stdout</category></item><item><title>Getting started blogging on Win10</title><link>https://blog.est.im/2023/stdout-14</link><description>&lt;p&gt;I am planning to setup by blogging environment on my Windows PC.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;OS: Windows 10&lt;/li&gt;
&lt;li&gt;Shell: Bash on WSL1&lt;/li&gt;
&lt;li&gt;Program: &lt;code&gt;pelican&lt;/code&gt; on Miniconda3 with Python 3.11&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;My objective today is get rid of the &lt;code&gt;static/js/core.js&lt;/code&gt; from &lt;code&gt;aether-pelican&lt;/code&gt; theme and replace it with &lt;a href="https://jsfiddle.net/t78mf7jb/3/"&gt;a simple CSS&lt;/a&gt;, and it turns out quite challenging.&lt;/p&gt;
&lt;h3&gt;WSL1 and file system&lt;/h3&gt;
&lt;p&gt;As it turns out, the installed Ubuntu root filesystem on WSL1 is located here:&lt;/p&gt;
&lt;p&gt;&lt;code&gt;%localappdata%\Packages\CanonicalGroupLimited.UbuntuonWindows_79rhkp1fndgsc\LocalState\rootfs&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;I plan to move my home dir (at least) to another SSD on my PC, as the &lt;code&gt;C:\&lt;/code&gt; drive is an old SanDisk Plus240, which is unforgivablly slow these days. I tried to &lt;code&gt;mv ~ /mnt/d/home&lt;/code&gt;, ok but the permission gets weird.&lt;/p&gt;
&lt;p&gt;So I tried to copy the folder on Windows to &lt;code&gt;D:\home&lt;/code&gt;, and &lt;code&gt;mklink&lt;/code&gt; back. I tried both &lt;code&gt;mklink /D&lt;/code&gt; and &lt;code&gt;mklink /J&lt;/code&gt; ( the &lt;code&gt;/D&lt;/code&gt; switch works on a remote drive whereas the &lt;code&gt;/J&lt;/code&gt; junction works on local NTFS disks only) and they both failed be recognized by WSL1. The bash yields &lt;code&gt;Broken stdout/stdin&lt;/code&gt; upon launch&lt;/p&gt;
&lt;p&gt;So OK, default home dir then. Bad luck for me.&lt;/p&gt;
&lt;h3&gt;Ubuntu 22&lt;/h3&gt;
&lt;p&gt;I just found out my &lt;code&gt;cat /etc/lsb-release&lt;/code&gt; shows Ubuntu 18, which is the default distro installed on &lt;code&gt;WSL1&lt;/code&gt; I assume. I tried to install Ubuntu 22 from the Microsoft Store, after several wasted minutes (curse the slow Internet in Mainland!) it turns out for WSL2 only. Luckily the Windows Subsystem for Linux was successfully upgraded to latest version:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;C:\&amp;gt; wsl --version
WSL version: 1.2.5.0
Kernel version: 5.15.90.1
WSLg version: 1.0.51
MSRDC version: 1.2.3770
Direct3D version: 1.608.2-61064218
DXCore version: 10.0.25131.1002-220531-1700.rs-onecore-base2-hyp
Windows version: 10.0.19045.3570
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;the &lt;code&gt;wsl --list --online&lt;/code&gt; commands stuck for a total of 10 minutes and returns nothing (curse the AS4134 163NET!)&lt;/p&gt;
&lt;h3&gt;Getting Python, Miniconda and Pelican&lt;/h3&gt;
&lt;p&gt;So linux distro setup was back to where started, I only have Python to mess with. Miniconda3 gets insalled easily, now that's a some progress. The static site generator I am using &lt;code&gt;pip install pelican[markdown]&lt;/code&gt; finishes ok, the pypi was not blocked? Keke.&lt;/p&gt;
&lt;p&gt;Then I typed &lt;code&gt;make&lt;/code&gt;. It was not part of WSL1? Blaspheme!&lt;/p&gt;
&lt;p&gt;Manually running &lt;code&gt;python -m pelican.server&lt;/code&gt;, and voila! The Windows asks for firewall listening permission, granted, open up browser, BAM! My blog setup process is done and now I can write and tweak it on Windows. &lt;/p&gt;
&lt;p&gt;Oh, and there's &lt;code&gt;git config core.fileMode false&lt;/code&gt; needs to be checked!&lt;/p&gt;</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">est</dc:creator><pubDate>Sat, 11 Nov 2023 10:31:11 +0800</pubDate><guid isPermaLink="false">tag:None,2023-11-11:/2023/stdout-14</guid><category>stdout</category></item><item><title>火星上怎么结算工资</title><link>https://blog.est.im/2023/stdout-13</link><description>&lt;p&gt;看到个段子&lt;/p&gt;
&lt;p&gt;&lt;img alt="" src="/images/2023/stdout-13-01.jpg" /&gt;&lt;/p&gt;
&lt;p&gt;突然让我想起个事，如果去火星打工，薪资该怎么计算？摘录 wikipedia&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;火星的恒星时长 &lt;code&gt;24小时37分钟22.663秒&lt;/code&gt;，而太阳日则长 &lt;code&gt;24小时39分钟35.24409&lt;/code&gt; 秒。而地球的恒星时和太阳日则分别是 &lt;code&gt;23小时56分钟4.0916秒&lt;/code&gt; 及 &lt;code&gt;24小时&lt;/code&gt;。在比较之下，一火星太阳日等于1.027491地球太阳日，即比地球太阳日长2.7%。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;怎么有两个天？继续搜&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;太阳日（英语：solar day）是依据太阳运动，所定义的时间，可以分为视觉太阳日和平均太阳日。一太阳日传统称为一“日”、一“天”或一“昼夜”。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;img alt="" src="https://upload.wikimedia.org/wikipedia/commons/thumb/6/67/Sidereal_day_%28prograde%29.png/600px-Sidereal_day_%28prograde%29.png" /&gt;&lt;/p&gt;
&lt;p&gt;英语里把火星的一天叫做一个 &lt;code&gt;Sol&lt;/code&gt;。一个火星年在英文的 wikipedia 有讲&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;sidereal year ... is about 686.98 Earth solar days (≈ 1.88 Earth years), or &lt;code&gt;668.5991&lt;/code&gt; sols 。也就是说火星一年有 668.5991 火星天。。。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;火星因为有&lt;code&gt;25.19°&lt;/code&gt;的自转倾角，跟地球相近，所以也可以划分四季。但问题是，火星的轨道长这样：&lt;/p&gt;
&lt;p&gt;&lt;img alt="" src="https://upload.wikimedia.org/wikipedia/commons/thumb/5/55/Mars_earth_orbit.png/600px-Mars_earth_orbit.png" /&gt;&lt;/p&gt;
&lt;p&gt;所以如果按照四个季节划分，最长的季节有 &lt;code&gt;194 个 Martian Sols&lt;/code&gt;，最短的 &lt;code&gt;142 Martian sols&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;那么问题来了。在火星上怎么算工资呢？我觉得得安天结了。还有，假如亲爱的读者小伙伴将来到火星务工，应聘的时候一定确认好是按地球年结算还是火星年哦。谨防火星历诈骗！&lt;/p&gt;</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">est</dc:creator><pubDate>Thu, 09 Nov 2023 15:50:11 +0800</pubDate><guid isPermaLink="false">tag:None,2023-11-09:/2023/stdout-13</guid><category>stdout</category></item><item><title>跟孩子掰扯活着的意义</title><link>https://blog.est.im/2023/stderr-15</link><description>&lt;p&gt;今天趁着11·11买了个 GZ104 黄轴键盘，感觉之前随便买的青轴的好了很多，于是手痒想打字。哈哈&lt;/p&gt;
&lt;h2&gt;人的意义 是什么&lt;/h2&gt;
&lt;p&gt;娃今天吃饭的时候突然问了我一个问题：「人活着的意义是什么呀」，很不凑巧我也闲来无事琢磨过这事，但是想要在孩子面前把这事说清楚可能没那么容易。&lt;/p&gt;
&lt;p&gt;于是我换了个思路，我问他，如果你是一个动物，你觉得意义是什么？他没回答，我又问，如果你是一块石头，石头会考虑自己的意义嘛？&lt;/p&gt;
&lt;p&gt;孩子也没回答。最后我说，人活着的意义呀，可能很多人也不知道，但是有一点可以确定，正因为你有一个聪明的小脑袋，才会去思考「什么是意义」这样的问题&lt;/p&gt;
&lt;h2&gt;国家是什么&lt;/h2&gt;
&lt;p&gt;他又问到，为什么世界上有那么多国家呢，为什么联合国不是一个国家。怎么样才能统一全世界成为一个国家。&lt;/p&gt;
&lt;p&gt;我的回答又把刚才的套路重复了一遍。如果你是一只动物，你会觉得自己属于某个国家吗？娃想了下，可能不会吧。我看到碗里的饭说，如果你是一粒大米，你会觉得自己有国家吗，孩子也不说话。最后我说，国家有很多个定义，但是正是因为人有了大脑，有了想象力，才会产生国家这个概念。所谓国家，就是一个想象的共同体。&lt;/p&gt;
&lt;h2&gt;反思&lt;/h2&gt;
&lt;p&gt;这可能是我会记录的最无聊的两件事。因为我真的想拿着键盘痛快的打一打字哈哈。&lt;/p&gt;
&lt;p&gt;或许我的回答都不是最好的，现在想起来真的有很多改进之处。比如没能鼓励孩子进一步对这个问题进行探索。&lt;/p&gt;
&lt;p&gt;蹲茅坑的时候想了一下，我们小时候哪里会思考这些问题呀。小时候都在为了作业发愁，心思都花在了怎么玩上面。现在的孩子能思考这些问题说明生活条件比较好了。人在穷的时候，物质匮乏的时候是不会去思考存在的意义的，都忙着奔波生活去了。生存都照顾不过来，如何去顾及意义呢。&lt;/p&gt;
&lt;p&gt;生命或许最大的意义就是生存。仅仅丰衣足食之后，才有闲心来考虑一下奋斗折腾这么大半辈子，究竟是图了个啥。&lt;/p&gt;
&lt;h1&gt;后记&lt;/h1&gt;
&lt;p&gt;本文完成于 2023-11-05 22:39:59。  &lt;/p&gt;</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">est</dc:creator><pubDate>Sun, 05 Nov 2023 22:26:35 +0800</pubDate><guid isPermaLink="false">tag:None,2023-11-05:/2023/stderr-15</guid><category>stderr</category></item><item><title>FastAPI/Starlette graceful shutdown server-sent events</title><link>https://blog.est.im/2023/stdout-12</link><description>&lt;h3&gt;缘起&lt;/h3&gt;
&lt;p&gt;假如你用 FastAPI/Starlette框架，写了一段 &lt;a href="https://developer.mozilla.org/en-US/docs/Web/API/Server-sent_events/Using_server-sent_events"&gt;Server-sent Events&lt;/a&gt;&lt;/p&gt;
&lt;pre&gt;&lt;code class="language-python"&gt;@app.get('/api/my_stream')
async def api_stream():
  async def gen():
    while 1:
      yield &amp;quot;data: {}\n\n&amp;quot;
      await asyncio.sleep(1.0)

  return StreamingResponse(gen, media_type=&amp;quot;text/event-stream&amp;quot;, headers={
    'X-Accel-Buffering': 'no',
    'Cache-Control': &amp;quot;no-cache&amp;quot;,
    'Connection': &amp;quot;keep-alive&amp;quot;,
  })
&lt;/code&gt;&lt;/pre&gt;
&lt;h3&gt;FastAPI 事件&lt;/h3&gt;
&lt;p&gt;然后你重启了服务器，比如 gunicorn+uvicorn，你会发现这个连接不会断开，一直输出结果。直到 worker 进程超过配置里的 &lt;code&gt;timeout&lt;/code&gt; 参数（默认60秒），被 master 强行杀死然后重启。&lt;/p&gt;
&lt;p&gt;一开始尝试了 &lt;a href="https://fastapi.tiangolo.com/advanced/events/#shutdown-event"&gt;FastAPI 官方的 &lt;code&gt;shutdown&lt;/code&gt; 事件&lt;/a&gt;，再在代码的 &lt;code&gt;while 1&lt;/code&gt; 加一个 &lt;code&gt;if&lt;/code&gt; 判断。发现不管用&lt;/p&gt;
&lt;pre&gt;&lt;code class="language-python"&gt;@app.on_event('shutdown')
def on_server_shutdown():
    app.state.running = False
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;发现这段代码执行是执行了，但是是在杀死worker的时候生效的。得更加提前。用&lt;a href="https://asgi.readthedocs.io/en/latest/specs/lifespan.html"&gt;ASGI推荐的&lt;code&gt;lifespan&lt;/code&gt;&lt;/a&gt;和 &lt;a href="https://asgi.readthedocs.io/en/latest/specs/www.html#disconnect-receive-event"&gt;&lt;code&gt;http.disconnect&lt;/code&gt;&lt;/a&gt; 太复杂，放弃。&lt;/p&gt;
&lt;h3&gt;Linux signal&lt;/h3&gt;
&lt;p&gt;尝试暴力监听 worker signal&lt;/p&gt;
&lt;pre&gt;&lt;code class="language-python"&gt;import signal
signal.signal(signal.SIGINT, on_server_shutdown)  # ctrl+c
signal.signal(signal.SIGUSR2, on_server_shutdown)
signal.signal(signal.SIGTERM, on_server_shutdown)
signal.signal(signal.SIGWINCH, on_server_shutdown)
signal.signal(signal.SIGHUP, on_server_shutdown)
signal.signal(signal.SIGQUIT, on_server_shutdown)
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;发现也不管用。研究了半天，似乎是 &lt;code&gt;UvicornWorker.init_signals&lt;/code&gt; 的时候&lt;a href="https://github.com/encode/uvicorn/issues/894"&gt;给&lt;code&gt;signal.SIG_DFL&lt;/code&gt;了&lt;/a&gt;。无语ing&lt;/p&gt;
&lt;h3&gt;uvicorn shutdown 流程&lt;/h3&gt;
&lt;p&gt;看gunicorn日志：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;[2023-11-02 09:50:38 +0800] [25918] [INFO] Shutting down
[2023-11-02 09:50:38 +0800] [25918] [INFO] Waiting for application shutdown.
[2023-11-02 09:50:38 +0800] [25918] [INFO] Waiting for connections to close. (CTRL+C to force quit)
....
[2023-11-02 09:51:18 +0800] [25918] [INFO] Application shutdown complete.
[2023-11-02 09:51:18 +0800] [25918] [INFO] Finished server process [25918]
[2023-11-02 09:51:18 +0800] [25918] [INFO] Worker exiting (pid: 25918)
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;观察到 Waiting for connections to close 之后卡住。&lt;/p&gt;
&lt;p&gt;属于 uvicorn 的 &lt;a href="](https://github.com/encode/uvicorn/blob/07c2b36455b5475ff7edfa54068ff2c0581a2be1/uvicorn/server.py#L303)"&gt;&lt;code&gt;Server.shutdown()&lt;/code&gt;&lt;/a&gt; 方法&lt;/p&gt;
&lt;p&gt;这个方法调用链：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;code&gt;Server.install_signal_handlers&lt;/code&gt; 里注册 signal &lt;/li&gt;
&lt;li&gt;&lt;code&gt;Server.handle_exit&lt;/code&gt; 里设置 &lt;code&gt;Server.should_exit = True&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;每秒一次的 &lt;code&gt;Server.on_tick&lt;/code&gt; 就会打断 &lt;code&gt;Server.main_loop()&lt;/code&gt; 死循环&lt;/li&gt;
&lt;li&gt;调用 &lt;code&gt;Server.shutdown&lt;/code&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;如果能拿到 &lt;code&gt;Server.should_exit&lt;/code&gt; 自行判断就好了，但是 ASGI 是容器无感的，只继续研究&lt;/p&gt;
&lt;h3&gt;断开http连接&lt;/h3&gt;
&lt;p&gt;上面日志有一个比较关键：&lt;/p&gt;
&lt;pre&gt;&lt;code class="language-python"&gt;# Request shutdown on all existing connections.
for connection in list(self.server_state.connections):
    connection.shutdown()
    await asyncio.sleep(0.1)
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;其http连接关闭方法实现为：&lt;/p&gt;
&lt;pre&gt;&lt;code class="language-python"&gt;def shutdown(self):
    &amp;quot;&amp;quot;&amp;quot;
    Called by the server to commence a graceful shutdown.
    &amp;quot;&amp;quot;&amp;quot;
    if self.cycle is None or self.cycle.response_complete:
        self.transport.close()
    else:
        self.cycle.keep_alive = False
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;这里应该走的是 &lt;code&gt;else&lt;/code&gt; 分支。所以解决方法就是去代码里拿到 &lt;code&gt;cycle.keep_alive&lt;/code&gt; 这个属性。&lt;/p&gt;
&lt;h3&gt;ASGI 接口&lt;/h3&gt;
&lt;p&gt;跟了一会儿，发现ASGI 在  starlette 里如下流程：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;code&gt;Route()&lt;/code&gt; 初始化 &lt;code&gt;self.app = request_response(endpoint)&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;Route().handle()&lt;/code&gt; 的时候会调用 &lt;code&gt;self.app(scope, receive, send)&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;unicorn&lt;/code&gt; 的 &lt;code&gt;run_asgi&lt;/code&gt; 会 &lt;code&gt;result = await app(self.scope, self.receive, self.send)&lt;/code&gt; 。其中 &lt;code&gt;app&lt;/code&gt; 就是 starlette 的 &lt;code&gt;Route()&lt;/code&gt; 实例&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;所以解决方案逐渐明朗了&lt;/p&gt;
&lt;h3&gt;黎明的前夜&lt;/h3&gt;
&lt;p&gt;通过 FastAPI/Starlette 请求的 &lt;code&gt;.receive&lt;/code&gt; 属性的 &lt;code&gt;__self__&lt;/code&gt; 拿到 unicorn 的 &lt;code&gt;cycle&lt;/code&gt; 实例，然后定时判断上面 &lt;code&gt;shutdown&lt;/code&gt; 赋值的 &lt;code&gt;self.cycle.keep_alive = False&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;&lt;code class="language-python"&gt;@app.get('/api/my_stream')
async def api_stream(req: Request):
  async def gen():
    while 1:
      yield &amp;quot;data: {}\n\n&amp;quot;
      await asyncio.sleep(1.0)
      if getattr(req.receive.__self__, 'keep_alive', None) is False:
        break

  return StreamingResponse(...
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;这里用了个 &lt;code&gt;getattr()&lt;/code&gt; 是保证这个 hack 在非 unicorn 下代码也能正常跑&lt;/p&gt;
&lt;p&gt;&lt;code&gt;git commit . -m "haha"&lt;/code&gt; 上机联调，发现坑了。。。我特么。。。。这个 &lt;code&gt;cycle.keep_alive&lt;/code&gt; 默认就是 &lt;code&gt;False&lt;/code&gt;&lt;/p&gt;
&lt;h3&gt;扭转 keep_alive&lt;/h3&gt;
&lt;p&gt;这玩意一直为 &lt;code&gt;False&lt;/code&gt; 的原因是，unicorn 的 &lt;code&gt;HttpToolsProtocol.on_headers_complete&lt;/code&gt; 赋值过程：&lt;/p&gt;
&lt;p&gt;&lt;code&gt;self.cycle = RequestResponseCycle(..., keep_alive=http_version != "1.0")&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;这里 &lt;code&gt;http_version&lt;/code&gt; 可以通过  &lt;code&gt;req.scope['http_version']&lt;/code&gt; 得到，打印了一下，你猜怎么着，还真tm是。。。原因就是厂里反代 &lt;a href="http://nginx.org/en/docs/http/ngx_http_proxy_module.html#proxy_http_version"&gt;nginx的proxy_http_version&lt;/a&gt;没配置。这里是个常见的坑，非常影响性能，因为每个请求会生成一个新的 http 连接。&lt;/p&gt;
&lt;p&gt;但是也等不急SA去改配置了。于是直接在代码 &lt;code&gt;async def gen():&lt;/code&gt; 前面写死：&lt;/p&gt;
&lt;p&gt;&lt;code&gt;req.receive.__self__.keep_alive = True&lt;/code&gt; 。提交，再试。。。咦，怎么 &lt;code&gt;keep_alive&lt;/code&gt; 依然为 &lt;code&gt;False&lt;/code&gt;？？？？明明刚刚赋值了？&lt;/p&gt;
&lt;p&gt;继续读代码，发现第二个坑，发现 unicorn 的 &lt;code&gt;RequestResponseCycle.send()&lt;/code&gt; 方法里，在构造返回的时候，有一句&lt;/p&gt;
&lt;pre&gt;&lt;code class="language-python"&gt;for name, value in headers:
    elif name == b&amp;quot;connection&amp;quot; and value.lower() == b&amp;quot;close&amp;quot;:
        self.keep_alive = False
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;好吧。。。那么解决方法就是，把 &lt;code&gt;keep_alive = True&lt;/code&gt; 挪到返回内部。先完成返回构造，再强行改值。&lt;/p&gt;
&lt;h4&gt;最后的代码&lt;/h4&gt;
&lt;pre&gt;&lt;code class="language-python"&gt;@app.get('/api/my_stream')
async def api_stream(req: Request):
  # req.receive.__self__.keep_alive = True  # doesn't work here
  async def gen():
    req.receive.__self__.keep_alive = True  # works here
    while 1:
      yield &amp;quot;data: {}\n\n&amp;quot;
      await asyncio.sleep(1.0)
      if req.receive.__self__.keep_alive is False:
        break

  return StreamingResponse(gen, media_type=&amp;quot;text/event-stream&amp;quot;, headers={
    'X-Accel-Buffering': 'no',
    'Cache-Control': &amp;quot;no-cache&amp;quot;,
    'Connection': &amp;quot;keep-alive&amp;quot;,
  })
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;测试重启 worker，该连接在1秒后断开，worker平稳重启。完美。&lt;/p&gt;
&lt;p&gt;苦逼撸业务的一天又开始了。&lt;/p&gt;</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">est</dc:creator><pubDate>Thu, 02 Nov 2023 09:44:12 +0800</pubDate><guid isPermaLink="false">tag:None,2023-11-02:/2023/stdout-12</guid><category>stdout</category></item><item><title>浏览器拉起钉钉客户端并跳转OA工单</title><link>https://blog.est.im/2023/stdout-11</link><description>&lt;p&gt;又是 corporate software engineering 吃屎的一天。用户在内部系统走流程，厂里用的是钉钉自带的OA工单审批。已经接入了API创建、完成工单&lt;/p&gt;
&lt;p&gt;问题在于发起工单之后，用户并没有感知，不知道工单去哪里了，流程就断了，向钉钉官方售后发起咨询，对方丢了一句：不支持。无语&lt;/p&gt;
&lt;p&gt;只能自己鼓捣。已知工单链接，在钉钉聊天窗口内部的最短的网址为：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;  https://aflow.dingtalk.com/dingtalk/mobile/homepage.htm?corpid=...&amp;amp;procInstId=...#approval
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;对方丢了一个 &lt;a href="https://open.dingtalk.com/document/isvapp/webapp-unified-routing-protocol#title-kkq-kgx-lbq"&gt;dingtalk:// 跳转协议&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;反复尝试，发现一个很有用：&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;桌面端打开URL &lt;br /&gt;
&lt;code&gt;dingtalk://dingtalkclient/page/link&lt;/code&gt; &lt;br /&gt;
侧边栏： &lt;code&gt;pc_slide=true&lt;/code&gt; &lt;br /&gt;
大容器（类似工作台容器）&lt;code&gt;ddtab=true&lt;/code&gt;   &lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;于是构造一个试试：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;  dingtalk://dingtalkclient/page/link?url=https%3A%2F%2Faflow.dingtalk.com%2Fdingtalk%2Fpc%2Fquery%2Fpchomepage.htm%3Fcorpid%3D...%26procInstId%3D...%23%2Fapproval
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;然后果然ok了。&lt;/p&gt;
&lt;p&gt;钉钉给人的感觉就是各个部门 hack 强行揉合起来一个怪物。各种不完善、不一致的问题。有空写一下吐槽。&lt;/p&gt;</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">est</dc:creator><pubDate>Wed, 18 Oct 2023 14:57:00 +0800</pubDate><guid isPermaLink="false">tag:None,2023-10-18:/2023/stdout-11</guid><category>stdout</category></item><item><title>SVG放在 img 中不能加载图片/字体</title><link>https://blog.est.im/2023/stdout-10</link><description>&lt;p&gt;最近想在 markdown 里搞图文混排，遇到一个大图把版面占完了，想缩小一些，由于 .md 渲染器安全限制，没法直接指定宽高&lt;/p&gt;
&lt;p&gt;只能从图片本身想办法，首先最直接的手段就是服务器再缩放一次，但是蛋痛的问题是缩放之后文件怎么存，怎么给静态文件路由，怎么保障图片可用性，怎么兼容各种尺寸，想想都头大。&lt;/p&gt;
&lt;p&gt;想到一个 hack，要不直接放一个 .svg 进去，因为 svg 支持加载位图资源，所以把 svg 位图缩小一点，让浏览器渲染 svg 不就行了。&lt;/p&gt;
&lt;p&gt;没想到就被这个 hack 坑了。原因是 svg 如果被 &lt;code&gt;&amp;lt;img&amp;gt;&lt;/code&gt; 标签渲染，那么禁止加载任何外部资源，脚本也禁止执行。&lt;/p&gt;
&lt;p&gt;为了证明这个限制，我写了个 demo 放在 &lt;a href="https://lab.est.im/shit_svg/"&gt;https://lab.est.im/shit_svg/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;这个问题太隐蔽了。stackoverflow 上只有 &lt;a href="https://stackoverflow.com/a/30467585/41948"&gt;Robert Longson&lt;/a&gt;、&lt;a href="https://stackoverflow.com/a/69160093/41948"&gt;ThangLeQuoc&lt;/a&gt;、&lt;a href="https://stackoverflow.com/a/18244035/41948#18244035"&gt;TheHippo&lt;br /&gt;
&lt;/a&gt; 的答案提到隐约线索：&lt;/p&gt;
&lt;p&gt;后来搜了到 &lt;a href="https://supercodepower.com/en/svg-img-use-font"&gt;skychx&lt;/a&gt; 把这个问题研究透了。罪魁祸首 &lt;a href="https://www.w3.org/wiki/SVG_Security"&gt;SVG Security&lt;/a&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;If an SVG file is fetched as image, then certain requirements apply to this document:   &lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;The SVG document is not allowed to fetch any resources. This also applies to scripts, stylesheets or images.   &lt;/li&gt;
&lt;li&gt;Fonts shouldn't be loaded as well. The situation in UAs seems to still be unclear though.&lt;br /&gt;
Scripts must not be executed.   &lt;/li&gt;
&lt;li&gt;Event listeners must be disabled at all times.   &lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;p&gt;浪费我好多时间。SVG2里把这个说得很明白了 &lt;a href="https://www.w3.org/TR/SVG2/conform.html#processing-modes"&gt;https://www.w3.org/TR/SVG2/conform.html#processing-modes&lt;/a&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;When external references are disabled in an SVG document, any attempt to fetch a document through an external reference must instead be treated as if a network error occurred and no data was received.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;不过查阅资料的时候发现个好玩的，&lt;a href="https://www.w3.org/TR/SVG11/single-page.html#linking-LinksIntoSVG"&gt;SVG 1.1 支持 URL fragments&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;比如：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;原图 &lt;a href="https://lab.est.im/shit_svg/1.svg"&gt;https://lab.est.im/shit_svg/1.svg&lt;/a&gt; &lt;embed src="https://lab.est.im/shit_svg/1.svg"&gt;&lt;/li&gt;
&lt;li&gt;放大 &lt;a href="https://lab.est.im/shit_svg/1.svg#svgView(viewBox(20,20,60,60))"&gt;https://lab.est.im/shit_svg/1.svg#svgView(viewBox(20,20,60,60))&lt;/a&gt; &lt;embed src="https://lab.est.im/shit_svg/1.svg#svgView(viewBox(20,20,60,60))"&gt;&lt;/li&gt;
&lt;/ul&gt;</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">est</dc:creator><pubDate>Tue, 17 Oct 2023 22:13:18 +0800</pubDate><guid isPermaLink="false">tag:None,2023-10-17:/2023/stdout-10</guid><category>stdout</category></item><item><title>市以上行政区划去掉后缀</title><link>https://blog.est.im/2023/stdout-09</link><description>&lt;p&gt;今天才知道，中国一共333个市一级行政单位。数据来源是 &lt;a href="https://www.mca.gov.cn/n156/index.html"&gt;民政部首页 ➡ 民政数据&lt;/a&gt;&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;import re

def short_name(name):
    m = re.search(r'''
        (\S+?)
        (?:
            壮族|回族|维吾尔|省|自治区|特别|  # 省
            (?:侗|傈僳|傣|哈尼|回|土家|壮|布依|彝|景颇|朝鲜|白|羌|苗|藏)族|
            蒙古|柯尔克孜|哈萨克|
            地区|市|盟|自治州|自治县
        ).*$
    ''', name, re.VERBOSE)
    if m:
        return m.group(1)
    return name
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;这段代码的作用是把比如 &lt;code&gt;"黔南布依族苗族自治州"&lt;/code&gt; 这样的名字，缩短成 &lt;code&gt;"黔南"&lt;/code&gt;。&lt;/p&gt;
&lt;p&gt;有一个小坑是，市一级行政区包含 &lt;code&gt;蒙古|柯尔克孜|哈萨克&lt;/code&gt; 这三个名字后面没有 &lt;code&gt;族&lt;/code&gt; 字。&lt;/p&gt;
&lt;p&gt;有一些 &lt;code&gt;XX林区&lt;/code&gt; &lt;code&gt;XX矿区&lt;/code&gt; 什么的，我觉得保留比较好。&lt;/p&gt;
&lt;p&gt;Python的 &lt;code&gt;re.VERBOSE&lt;/code&gt; 真是好东西！&lt;/p&gt;</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">est</dc:creator><pubDate>Thu, 12 Oct 2023 20:01:23 +0800</pubDate><guid isPermaLink="false">tag:None,2023-10-12:/2023/stdout-09</guid><category>stdout</category></item></channel></rss>