<!DOCTYPE html>
<html>
  <head>
    <title>Entity-attribute-valueæ¨¡å‹åˆ°åº•å¥½ä¸å¥½ - ğŸ‘â€ğŸ—¨ ğŸ’­ ğŸ’« ğŸ…±ã’</title>

    <meta charset="utf-8" />
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <link href="https://feeds.feedburner.com/initiative" type="application/rss+xml" rel="alternate" title="ğŸ‘â€ğŸ—¨ ğŸ’­ ğŸ’« ğŸ…±ã’ RSS Feed" />

    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="Entity-attribute-valueæ¨¡å‹åˆ°åº•å¥½ä¸å¥½" />

      <link rel="canonical" href="https://blog.est.im/archives/3904" />

    <link rel="stylesheet" href="/theme/css/normalize.min.css" />
    <link rel="stylesheet" href="/theme/css/style.css" />


    <style>
      body {
        background: #ecedef url("/theme/img/ignasi_pattern_s.png") repeat;
      }
    </style>
  </head>
  <body class="single-body">
<nav class="nav-bar side-padding">
  <h1 class="nav-header"><a href="/" class="nav-text">
    ğŸ‘â€ğŸ—¨ ğŸ’­ ğŸ’« ğŸ…±ã’
  </a></h1>
  <div class="hamburger-menu">
    <button onclick="hamburgerMenuPressed.call(this)" aria-haspopup="true" aria-expanded="false" aria-controls="menu" aria-label="Menu">
      <span></span>
      <span></span>
    </button>
    <ul id="menu" class="hamburger-menu-overlay">
      <li><a href="/" class="hamburger-menu-overlay-link">Home</a></li>
      <li><a href="https://feeds.feedburner.com/initiative" class="hamburger-menu-overlay-link">RSS</a></li>
      <li><a href="/about" class="hamburger-menu-overlay-link">About</a></li>

      <li><a href="/category/archive" class="hamburger-menu-overlay-link active">archive</a></li>
      <li><a href="/category/stderr" class="hamburger-menu-overlay-link">stderr</a></li>
      <li><a href="/category/stdin" class="hamburger-menu-overlay-link">stdin</a></li>
      <li><a href="/category/stdout" class="hamburger-menu-overlay-link">stdout</a></li>

    </ul>
  </div>
</nav>    <main class="content side-text-padding">


<article class="post">
  <header class="post-header">
    <h2 class="post-title">Entity-attribute-valueæ¨¡å‹åˆ°åº•å¥½ä¸å¥½</h2>
    <p class="post-date">Posted <time datetime="2011-04-14T02:25:23+08:00">2011-04-14</time> | <span>archive</span></p>
  </header>

  
  <p>æœ€è¿‘çœ‹NoSQLå‘ç°entity-attribute-valueï¼ˆç®€ç§°EAVï¼‰è¿™ä¸ªæ¨¡å‹çœŸç‹é“å•Šï¼Œ<a href="http://code.google.com/appengine/docs/python/datastore/overview.html">Google App Engineçš„ datastore</a>å°±æ˜¯ä¸ªå…¸å‹çš„entity-attribute-valueæ¨¡å‹ï¼š</p>

<blockquote>
  <p>The App Engine datastore saves data objects, known as <em>entities</em>. An entity has one or more <em>properties</em>, named <em>values</em> of one of several supported data types. For instance, a property can be a string, an integer, or even a <strong>reference</strong> to another entity.</p>
</blockquote>

<p>ä½†æ˜¯åœ¨Stackoverflowä¸Šå‘ç°å¤§å®¶å¯¹EAVè¯„ä»·éå¸¸ä½ï¼Œ<a href="http://stackoverflow.com/questions/5499371/does-sql-server-have-native-support-for-eav">éƒ½</a>è¯´è¿™æ˜¯ä¸ª<a href="http://www.simple-talk.com/sql/database-administration/five-simple--database-design-errors-you-should-avoid/">very bad design</a></p>

<p>æ¯”å¦‚æŠŠä¸€ä¸ªè¡¨</p>

<p><img src="http://www.simple-talk.com/iwritefor/articlefiles/843-Fig7.jpg" alt=""></p>

<p>ææˆè¿™ç§EAVæ¨¡å‹çš„è®¾è®¡ï¼š</p>

<p><img src="http://www.simple-talk.com/iwritefor/articlefiles/843-Fig8.jpg" alt=""></p>

<p>ç„¶åä¸€ä¸ªç®€å•çš„SQLå°±ä»</p>

<pre><code>SELECT first_name, last_name
FROM Employees
WHERE date_of_birth &gt; &#39;12/31/1950&#39; ;
</code></pre>

<p>å˜æˆäº†</p>

<pre><code>SELECT MAX( CASE emp_property WHEN &#39;first_name&#39;
                              THEN value
           END ) AS first_name,
      MAX( CASE emp_property WHEN &#39;last_name&#39;
                             THEN value
           END ) AS last_name
  FROM EmployeeValues
 WHERE emp_nbr IN ( SELECT emp_nbr
                      FROM EmployeeValues
                     WHERE emp_property = &#39;date_of_birth&#39;
                       AND CAST( value AS DATETIME ) &gt; &#39;12/31/1950&#39; )
   AND emp_property IN ( &#39;first_name&#39;, &#39;last_name&#39; )
 GROUP BY emp_nbr ; 
</code></pre>

<p>ç¼ºç‚¹å¤ªå¤šäº†ï¼š</p>

<ul>
<li>å¤ªå¤šrowäº†ï¼Œæ— æ³•æ–¹ä¾¿ç›´æ¥ç®¡ç†ï¼Œç”šè‡³é€ æˆæ€§èƒ½ä½ä¸‹</li>
<li>æƒ³é™åˆ¶ä¸‹æ•°æ®å¾ˆå›°éš¾</li>
<li>æ— æ³•åˆ©ç”¨å¤–é”®</li>
<li>å†™queryå°±æ˜¯ä¸€å¨æµ†ç³Š</li>
<li>åŸºæœ¬ä¸å¯èƒ½ç”Ÿæˆå¤æ‚çš„åˆ†æå’ŒæŠ¥å‘Š</li>
</ul>

<p>ä½†æ˜¯æˆ‘çªç„¶æƒ³åˆ°ï¼Œç±»ä¼¼memcachedå’Œredisè¿™ç§key-valueä¸æ˜¯æ°å¥½é¿å…äº†è¿™äº›ç¼ºç‚¹è€Œå‘æŒ¥äº†EAVçš„ä¼˜ç‚¹å—ï¼Ÿåœ¨<a href="http://stackoverflow.com/questions/870808/entity-attribute-value-database-vs-strict-relational-model-ecommerce-question">stackoverflowä¸Š</a>çœ‹åˆ°ç±»ä¼¼çš„è¯„ä»·ï¼š</p>

<p>ä¸ºæ˜¯ä¹ˆentity-attribute-valueä¸å¥½ï¼Ÿ</p>

<p>because they are inefficient usage of <strong>relational databases</strong>. A purely key/value store works great with this model.</p>

<p>ç±»ä¼¼MongoDBè¿™ç§document dbå°±æ›´å¥½äº†ï¼Œéå¸¸é€‚åˆåšEAVæ¨¡å‹çš„æ•°æ®å­˜å‚¨å’Œå¤„ç†ã€‚</p>

<p>ç°åœ¨è§‰å¾—ï¼ŒNoSQL å…¶å®ä»£è¡¨ NoACIDï¼Œè€ŒçœŸæ­£æ›¿ä»£ Relational çš„é©å‘½æ€§çš„ä¸œè¥¿å°±æ˜¯ EAVã€‚</p>

<p>å…³äºEAVçš„ä¸€äº›triviaï¼š</p>

<ul>
<li>EAVçš„æœ€æ—©æœŸèµ·æºæ˜¯LISP association listsï¼Œä¸ºäº†AIç ”ç©¶é‡Œçš„knowledge representationã€‚å…¶å®è¿™ä¸ªassociation listå°±æ˜¯nå¤šattribute-valueå¯¹ã€‚è¯´ç™½äº†å°±æ˜¯nä¸ªkey-valueå€¼ã€‚</li>
<li>ä¸€äº›EAVçš„å®é™…ä¾‹å­ï¼šæµè§ˆå™¨cookieï¼ŒMicrosoft Windowsæ³¨å†Œè¡¨ï¼ŒASN.1</li>
<li>EAVå¯ä»¥ç”¨sematic webé‡Œçš„RDFæ¥æè¿°ï¼Œmetadataç”¨RDF Schemaæ¥æè¿°ã€‚ä½†æ˜¯æˆ‘ä¸ªäººè€Œè¨€æ˜¯è®¨åŒä¸€å¤§å¨XMLçš„ã€‚</li>
<li>EAVå’ŒSubject-Predicate-Objectæœ¬è´¨æ˜¯ç­‰ä»·çš„</li>
<li>XMLå¯ä»¥è¢«çœ‹æˆå¸¦tagçš„EAVã€‚</li>
<li>æ¯”taggingæ›´åŠ é«˜çº§çš„metadataç©æ³•å°±æ˜¯EAV</li>
<li>object-oriented dbå…¶å®åœ¨å¯¹è±¡å’Œé€»è¾‘ä¸Šéƒ½ä¸å¦‚EAVç›´è§‚ï¼Œæˆ‘è§‰å¾—EAV/CRæ˜¯OOçš„è¶…é›†</li>
<li>EAVçš„ä»£ä»·å°±æ˜¯éå¸¸å¤æ‚å’Œå®¹æ˜“å‡ºé”™çš„metadataå¤„ç†ã€‚èœé¸Ÿç©metadataç©ç€ç©ç€å°±æŠŠè‡ªå·±ç»™metaäº†ã€‚</li>
<li>EAVçš„ç‰¹ç‚¹æ˜¯  <br>
<br>
<ul>
<li>è¶…çµæ´»</li>
<li>ç¨€ç–å±æ€§å­˜å‚¨ç©ºé—´æœ€ä¼˜</li>
<li>EAVçš„æ•°æ®å°±æ˜¯ç®€æ´ç›´è§‚çš„ç‰©ç†factï¼Œè€Œä¸”å¾ˆå¤§ç¨‹åº¦ä¸Šæ˜¯è‡ªæˆ‘æè¿°çš„ã€‚</li>
<li>å¼€æ”¾å¼ç‰©ç†schemaï¼Œæ‰€ä»¥æœ‰çš„æ—¶å€™EAVä¹Ÿè¢«ç§°ä¸ºopen schemaï¼Œè€Œä¸”EAVæ¨¡å‹å°±æ˜¯ç®€åŒ–schemaçš„ä¸»è¦æ‰‹æ®µã€‚</li>
<li>å’Œä¼ ç»Ÿæ•°æ®åº“ä¸åŒï¼ŒEAVçš„é€»è¾‘schemaå’Œç‰©ç†schemaéå¸¸ä¸åŒã€‚EAVçš„é€»è¾‘schemaå¿…é¡»ä¿å­˜ä¸ºmetadataå½¢å¼</li>
<li>è¶³å¤Ÿä¸°å¯Œçš„EAVå¯ä»¥ç”¨æ¥ç›´æ¥æ‰§è¡Œä¸»åŠ¨æ•°æ®æ“ä½œï¼Œç›¸æ¯”è€Œè¨€ä¼ ç»Ÿæ•°æ®åº“åªèƒ½è¢«åŠ¨æè¿°æ•°æ®ã€‚ï¼ˆæˆ‘åˆåœ¨YYè¿™ä¸ªä¼ è¯´ä¸­çš„deductiveç‰¹æ€§äº†ï¼‰</li>
</ul></li>
<li>äº‘è®¡ç®—å‚å•†æçš„æ•°æ®å­˜å‚¨åŸºæœ¬éƒ½æ˜¯EAVã€‚å‰é¢è¯´çš„Googleçš„datastoreï¼Œæ”¯æŒGQLï¼Œæ”¯æŒçš„valueæ•°æ®ç±»å‹ä¹Ÿæ˜¯æœ€ä¸°å¯Œçš„ï¼›Microsoftçš„Windows Azure Table Storageï¼Œåœ¨URLä¸Šè°ƒç”¨LinQ providerï¼›Amazonçš„SimpleDBæ”¯æŒæŸ¥è¯¢è¯­æ³•å’Œæ•°æ®ç±»å‹æœ€å°‘ã€‚</li>
</ul>

<p>å‚è€ƒ</p>

<p>1: <a href="http://ycmi.med.yale.edu/nadkarni/eav_cr_contents.htm">http://ycmi.med.yale.edu/nadkarni/eav_cr_contents.htm</a><br>
2: <a href="http://en.wikipedia.org/wiki/Entity-attribute-value_model">http://en.wikipedia.org/wiki/Entity-attribute-value_model</a></p>

<p>ps ä¸­æ–‡æœç´¢<a href="http://203.208.39.104/search?lr=lang_zh-CN&amp;q=EAV%E6%A8%A1%E5%9E%8B">EAVæ¨¡å‹</a>å…¨æ˜¯å…³äºmagentoçš„ã€‚ã€‚ã€‚æˆ–è®¸ç°å®ä¸­æœ€æ€¥è¿«çš„EAVåº”ç”¨å°±æ˜¯ç”µå­å•†åŠ¡å§ï¼Ÿ</p>

</article>


<div class="comments">
  <h2>Comments</h2>
  <div id="disqus_thread"></div>
  <script type="text/javascript">
    var disqus_shortname = 'estblog';
    var disqus_identifier = 'archives/3904';
    var disqus_url = location.href;
    (function() {
    var dsq = document.createElement('script'); 

    dsq.type = 'text/javascript';
    dsq.defer = true;
    dsq.src = '//estblog.disqus.com/embed.js';
    (document.getElementsByTagName('body')[0] || document.getElementsByTagName('head')[0]).appendChild(dsq);
    })();
  </script>
  <noscript>Please enable JavaScript to view the comments.</noscript>
</div>    </main>
<script src="/theme/js/core.js"></script>

  </body>

</html>