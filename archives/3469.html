<!DOCTYPE html>
<html>
  <head>
    <title>1021字节javascript写成的3D圣诞树 – est の 输入 输出和出入</title>

    <meta charset="utf-8" />
    <meta http-equiv="x-ua-compatible" content="ie=edge">
      <meta http-equiv="Content-Security-Policy" content="frame-ancestors 'self' https://disqus.com https://player.bilibili.com https://www.youtube.com;">
    <link href="https://feeds.feedburner.com/initiative" type="application/rss+xml" rel="alternate" title="est の 输入 输出和出入 RSS Feed" />

    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="1021字节javascript写成的3D圣诞树" />

    <link rel="canonical" href="https://blog.est.im/archives/3469" />
    <meta property="og:url" content="https://blog.est.im/archives/3469">
    <meta property="og:type" content="article">
    <meta property="og:title" content="1021字节javascript写成的3D圣诞树">

    <link rel="stylesheet" href="/theme/css/normalize.min.css" />
    <link rel="stylesheet" href="/theme/css/style.css" />


    <style>
      body {
        background: #ecedef url("/theme/img/ignasi_pattern_s.png") repeat;
      }
    </style>
  </head>
  <body class="single-body">
<nav class="nav-bar side-padding">
  <h1 class="nav-header"><a href="/" class="nav-text">
    est の 输入 输出和出入
  </a></h1>
  <div class="hamburger-menu">
    <button>
      <span></span>
      <span></span>
    </button>
    <ul id="menu" class="hamburger-menu-overlay">
      <li><a href="/" class="hamburger-menu-overlay-link">Home</a></li>
      <li><a href="https://feeds.feedburner.com/initiative" class="hamburger-menu-overlay-link">RSS</a></li>
      <li><a href="/about" class="hamburger-menu-overlay-link">About</a></li>

      <li><a href="/category/archive" class="hamburger-menu-overlay-link active">archive</a></li>
      <li><a href="/category/stderr" class="hamburger-menu-overlay-link">stderr</a></li>
      <li><a href="/category/stdin" class="hamburger-menu-overlay-link">stdin</a></li>
      <li><a href="/category/stdout" class="hamburger-menu-overlay-link">stdout</a></li>

    </ul>
  </div>
</nav>    <main class="content side-text-padding">
<article class="post">
  <header class="post-header">
    <h2 class="post-title">1021字节javascript写成的3D圣诞树</h2>
    <p class="post-date">Posted <time datetime="2010-12-16T07:28:31+08:00">2010-12-16</time> | <span>archive</span></p>
  </header>

  
  <p>demo地址：<a href="http://js1k.com/2010-xmas/demo/856">http://js1k.com/2010-xmas/demo/856</a> （非Chrome浏览器会非常卡）</p>

<p><img src="http://blog.est.im/wp-content/uploads/2010/12/2010-12-16_152657.png" alt=""></p>

<div style="width:100%">

源码如下：
<pre><code>

&lt;!doctype html&gt;
&lt;html&gt;
    &lt;head&gt;
        &lt;title&gt;JS1k, 1k demo submission [856]&lt;/title&gt;
        &lt;meta charset=&quot;utf-8&quot; /&gt;
    &lt;/head&gt;
    &lt;body&gt;
        &lt;canvas id=&quot;c&quot;&gt;&lt;/canvas&gt;
        &lt;script&gt;
            var b = document.body;
            var c = document.getElementsByTagName(&#39;canvas&#39;)[0];
            var a = c.getContext(&#39;2d&#39;);
            document.body.clientWidth; // fix bug in chrome.
        &lt;/script&gt;
        &lt;script&gt;
// start of submission //
M=Math;Q=M.random;J=[];U=16;T=M.sin;E=M.sqrt;for(O=k=0;x=z=j=i=k&lt;200;)with(M[k]=k?c.cloneNode(0):c){width=height=k?32:W=446;with(getContext(&#39;2d&#39;))if(k&gt;10|!k)for(font=&#39;60px Impact&#39;,V=&#39;rgba(&#39;;I=i*U,fillStyle=k?k==13?V+&#39;205,205,215,.15)&#39;:V+(147+I)+&#39;,&#39;+(k%2?128+I:0)+&#39;,&#39;+I+&#39;,.5)&#39;:&#39;%23cca&#39;,i&lt;7;)beginPath(fill(arc(U-i/3,24-i/2,k==13?4-(i++)/2:8-i++,0,M.PI*2,1)));else for(;x=T(i),y=Q()*2-1,D=x*x+y*y,B=E(D-x/.9-1.5*y+1),R=67*(B+1)*(L=k/9+.8)&gt;&gt;1,i++&lt;W;)if(D&lt;1)beginPath(strokeStyle=V+R+&#39;,&#39;+(R+B*L&gt;&gt;0)+&#39;,40,.1)&#39;),moveTo(U+x*8,U+y*8),lineTo(U+x*U,U+y*U),stroke();for(y=H=k+E(k++)*25,R=Q()*W;P=3,j&lt;H;)J[O++]=[x+=T(R)*P+Q()*6-3,y+=Q()*U-8,z+=T(R-11)*P+Q()*6-3,j/H*20+((j+=U)&gt;H&amp;Q()&gt;.8?Q(P=9)*4:0)&gt;&gt;1]}setInterval(function G(m,l){A=T(D-11);if(l)return(m[2]-l[2])*A+(l[0]-m[0])*T(D);a.clearRect(0,0,W,W);J.sort(G);for(i=0;L=J[i++];a.drawImage(M[L[3]+1],207+L[0]*A+L[2]*T(D)&gt;&gt;0,L[1]&gt;&gt;1)){if(i==2e3)a.fillText(&#39;Merry Xmas!&#39;,U,345);if(!(i%7))a.drawImage(M[13],((157*(i*i)+T(D*5+i*i)*5)%W)&gt;&gt;0,((113*i+(D*i)/60)%(290+i/99))&gt;&gt;0);}D+=.02},1)
// end of submission //
        &lt;/script&gt;
    &lt;/body&gt;
&lt;/html&gt;
</code></pre>

</div>

<p>作者技术解释：<br>
<a href="http://www.romancortes.com/blog/how-i-did-the-1kb-christmas-tree/">http://www.romancortes.com/blog/how-i-did-the-1kb-christmas-tree/</a></p>

<p>js1k里的东东让我觉得非常自卑。</p>

<p><a href="http://www.reddit.com/r/javascript/comments/emfzt/christmas_tree_in_1k_of_javascript/">via</a></p>

<p><ins>更新1</ins>： blog.netoearth.com的同学，你好。</p>

<p><ins>更新2</ins>：<a href="http://www.reddit.com/r/programming/comments/eovse/a_christmas_tree_in_1k_of_javascript/">moar</a></p>
</article>

    </main>

  </body>

</html>