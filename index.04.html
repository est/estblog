<!DOCTYPE html>
<html>
  <head>
    <title>est の 输入输出</title>

    <meta charset="utf-8" />
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <link href="https://feeds.feedburner.com/initiative" type="application/rss+xml" rel="alternate" title="est の 输入输出 RSS Feed" />

    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="This blog is rated 🔞, viewer discretion is advised" />

    <meta property="og:url" content="https://blog.est.im">
    <meta property="og:type" content="website">
    <meta property="og:title" content="est の 输入输出">
    <meta property="og:description" content="This blog is rated 🔞, viewer discretion is advised">

    <link rel="stylesheet" href="/theme/css/normalize.min.css" />
    <link rel="stylesheet" href="/theme/css/style.css" />


    <style>
      body {
        background: #ecedef url("/theme/img/ignasi_pattern_s.png") repeat;
      }
    </style>
  </head>
  <body class="list-body">
<nav class="nav-bar side-padding">
  <h1 class="nav-header"><a href="/" class="nav-text">
    est の 输入输出
  </a></h1>
  <div class="hamburger-menu">
    <button onclick="hamburgerMenuPressed.call(this)" aria-haspopup="true" aria-expanded="false" aria-controls="menu" aria-label="Menu">
      <span></span>
      <span></span>
    </button>
    <ul id="menu" class="hamburger-menu-overlay">
      <li><a href="/" class="hamburger-menu-overlay-link">Home</a></li>
      <li><a href="https://feeds.feedburner.com/initiative" class="hamburger-menu-overlay-link">RSS</a></li>
      <li><a href="/about" class="hamburger-menu-overlay-link">About</a></li>

      <li><a href="/category/archive" class="hamburger-menu-overlay-link">archive</a></li>
      <li><a href="/category/stderr" class="hamburger-menu-overlay-link">stderr</a></li>
      <li><a href="/category/stdin" class="hamburger-menu-overlay-link">stdin</a></li>
      <li><a href="/category/stdout" class="hamburger-menu-overlay-link">stdout</a></li>

    </ul>
  </div>
</nav>    <main class="card-container side-gutter">
      <header class="list-header">
        <p class="list-header-subtext">This blog is rated 🔞, viewer discretion is advised</p>
        <!-- <h1 class="list-header-title">est の 输入输出</h1> -->
      </header>


        <!-- new article -->
        <div class="card blog-card">
          <article class="card-body">
            <a href="/2022/stdout-03"  rel="bookmark" >
              <h2 class="card-title">徐州丰县，以及孝文化</h2>
            </a>
            <p class="card-text"><p>先<a href="https://www.bilibili.com/read/cv10613832">抬一张地图</a>出来，</p>
<p><img alt="" src="/images/2022/stdout-03-01.webp" /></p>
<p>鲁苏豫皖四省，如果让你选一个最乱的地，你可能选哪里呢？</p>
<p>说起来，徐州对我的印象，只是《三国演义》上一个模糊的地理概念，第一次稍微立体的感受徐州，还是在《<a href="https://www.bilibili.com/video/BV1uE411C7gj">睡前消息29 · 没有“淮海省”，徐州还是有当“省会”的命？</a>》上看到，徐州是一个距离周边大城市都非常远的人口又比较密集的城市。</p>
<p><img alt="" src="/images/2022/stdout-03-02.jpg" /></p>
<p>后来，从<a href="https://www.dedao.cn/share/course/article?id=92GB1my8okM5VMnZylJWgNnEe4Z73r">罗辑思维·启发俱乐部·第26期：显性力量越大，隐性麻烦越多</a>》上扒到徐州周边刷过的历史人物，就更印象深刻了</p>
<p><img alt="" src="/images/2022/stdout-03-03.jpg" /></p>
<blockquote>
<p>这里是砀山，刘邦拔剑斩蛇起义的地方，它属于安徽省，但它同时被另外三个省包围，北部是山东，东部是江苏，西部是河南。<br />
从这个地方向东北，开车不到一个小时，就能到达江苏省的丰县。刘邦就是丰县人。辅佐刘邦建立汉朝的很多人，像萧何、卢绾、王陵也是丰县人。<br />
丰县的东边是沛县，刘邦集团的樊哙、曹参、周勃都是沛县人。你可能会说，刘邦搞事业，拉着乡亲入伙很正常啊。<br />
从丰县县城向东南出发，一个半小时车程就会到达徐州。在秦代，这里叫彭城，项羽建立西楚，都城就是彭城。奇怪了，为什么项羽的都城离刘邦家这么近呢？<br />
继续向东南驱车一个半小时，会到达今天的宿迁市，在秦代，这里叫下相，项羽的故乡。你看，连项羽家距离刘邦家好像都不是很远。<br />
然后，从项羽的家乡向西出发，开车一个多小时，就会到达安徽省灵璧县，“霸王别姬”、“乌江自刎”的故事就发生在这附近。<br />
踩着油门朝西北走，不到一个小时，我们来到安徽省宿州市。在秦代，这里沼泽遍地，名叫大泽乡。没错，陈涉吴广起义，就发生在这里。<br />
是不是觉得有一个问题已经呼之欲出了？秦朝灭国的可是六国啊。齐楚燕赵魏韩，那么大一片地方啊。但是怎么在秦朝末年找麻烦的就集中在这么一小块地方呢？那么大片的地方不出事，偏偏就这里出事？<br />
对，佐竹靖彦给这一小块地方起了个名字：“泗水系月牙形水乡山泽地带”。<br />
在那个时代，这个地方是一片月牙形地带，泗水河川行而过，地势低、潮湿，形成了大量的水乡山泽。在秦代，这里有个地方叫大野泽。听这个名字，你就能感受到三个特点：水多、荒凉、面积大。后来随着大野泽不断缩小并且位移，到五代的时候，大野泽变成了梁山泊。<br />
一听到梁山泊，你就明白这个地方的意义了。官兵到不了嘛。</p>
</blockquote>
<p>另外，徐州还是汉帝国的掘墓者曹操起家之处，唐帝国覆灭者黄巢朱温老巢，巨盗宋江也就是在<a href="https://zhuanlan.zhihu.com/p/109906127">河北、河南、山东、江苏交接的地方来回变动</a></p>
<p>然后结合时事，为什么这里拐卖人口多？</p>
<p>很多摸鱼群的分析是孝文化，传宗接代的思想在作怪，什么养儿防老，养儿挣钱，但读到2020年这篇Yixi演讲的文章，我就不淡定了</p>
<p><a href="https://www.163.com/dy/article/GRIQSK0P05439A3X.html">吴心越：养老院调查真相，让老人恐惧，问题严重性超出你的想象！</a></p>
<blockquote>
<p>小时候，父母对孩子通常都是很强势的。但是随着年龄增长，你会发现父母对你越来越弱势，其实就是这个原因。养老院里那些无儿无女的老人，其实和学校里面的“孤儿”没有本质的区别，都属于被欺负的对象。在学校，父母是孩子的依靠。在养老院，子女其实就是老人的依靠。<br />
哪怕有些子女很混蛋，很不负责，但他是维权的直接受益人。也许子女没有孝顺的动力，但是却有替父母维权的动力。越是混蛋的子女，战斗力就越强，父母出了问题，他们能把养老院讹到破产！<br />
就拿护工来说，知道你有哮喘，偏要把你安排在通风不好的地方；知道你和谁有矛盾，偏要把你俩安排在一个房间；知道你腿脚不利索，偏要把你安排在楼层较高的房间；故意把你安排给有传染病或者大小便失禁的老人一个房间.....这种情况，尤其是在养老行业，从来就不是个案，而是普遍性的现象。<br />
如果找院方投诉，就相当于把护工得罪死了，只要护工不被开除，如果不换养老院，剩下的日子，老人的日子只会愈来愈难过。<br />
如果老人在外面有子女，起码护工还会有所忌惮，知道他自己做的太过分，会有人来闹，就会有所收敛。<br />
这个时候，老年人有子女的最大意义，就是出了问题，有人帮你喊冤，哪怕他仅仅是为了搞一笔钱。</p>
</blockquote>
<p>所以现在突然明白，为啥乡土中国，熟人社会，有拼命生娃的做法，讲究「孝」道了。这TM的是生存的最低保障，战略威慑能力啊。。。</p>
<p>如果说大型中心省会城市代表秩序和文明，那么徐州周边的几百公里没有大城市的平原村落里，就是社会正义能延生到的末端，这个时候，基层秩序只能由血缘绑定。即便是贩卖人口交换来的亲人。</p></p>
            <div class="card-subtext muted-text">
              <p>Posted <time datetime="2022-02-14T21:31:41+08:00">2022-02-14</time></p>
<p>stdout</p>            </div>
          </article>
        </div>


        <!-- new article -->
        <div class="card blog-card">
          <article class="card-body">
            <a href="/2022/stdin-01"  rel="bookmark" >
              <h2 class="card-title">今日笑点：网友指出cloudflared隧道ssh违反了TOS，被CF CTO亲自下场纠正</h2>
            </a>
            <p class="card-text"><blockquote>
<p>codingpanic 1 hour ago: I'm under the impression that this is against CloudFlare's ToS, otherwise I'd probably be doing it myself.<br />
jgrahamc 56 minutes ago: That's for Cloudflare's CDN/reverse-proxy service. This is the correct one for Cloudflare Tunnel: https://developers.cloudflare.com/cloudflare-one/connections/connect-apps/license<br />
neurostimulant 8 minutes ago: This seems to be the license for cloudflared. But when you use cloudflared to create a tunnel via cloudflare network, aren't you also bound to Cloudflare's ToS because the software itself is useless without using the service provided by Cloudflare?<br />
jgrahamc 6 minutes ago: I am literally Cloudflare's CTO. I'm pretty sure I know that using Cloudflare Tunnel for SSH isn't a violation of our service.</p>
</blockquote>
<p>真希望 <a href="https://news.ycombinator.com/item?id=30283987#30286264">HN</a> 有个给 id 加备注的功能，大神太多了。2333 </p></p>
            <div class="card-subtext muted-text">
              <p>Posted <time datetime="2022-02-10T22:26:32+08:00">2022-02-10</time></p>
<p>stdin</p>            </div>
          </article>
        </div>


        <!-- new article -->
        <div class="card blog-card">
          <article class="card-body">
            <a href="/2022/stdout-02"  rel="bookmark" >
              <h2 class="card-title">笑话了千年刻舟求剑，水面搜救的图案却叫Victor Sierra</h2>
            </a>
            <p class="card-text"><p>今天的第一个收获，Victor Sierra这个搜救图案</p>
<p><img alt="" src="/images/2022/stdout-02-01.jpg" /></p>
<p><img alt="" src="/images/2022/stdout-02-02.jpg" /></p>
<p>来自 <a href="https://www.youtube.com/watch?v=aoXJfuPaFF8">Why This Zig-Zag Coast Guard Search Pattern is Actually Genius - Smarter Every Day 268</a>，是美国 coast guard 标准化的水面搜救路线<strong>之一</strong>。这种图案覆盖的面最大并且效率最高，而且最重要的一点，考虑到水是流动的，能够跟随一起漂流的相对速度去找到 PIW (person in water)</p>
<p>于是我就想起大家都熟悉的成语——「刻舟求剑」。这是2000多年前一个河南贩子吕不韦编的一个讥讽九头鸟的段子，由于这个成语太熟悉了，我甚至开始怀疑课本上是不是掐头去尾没讲完，跟之前那个「<a href="/202004/stdin-001">守株待兔</a>」恶毒的政治隐喻一样，于是去翻了下原文。好家伙，不能说雷同，简直就是一模一样。它出自《<a href="https://ctext.org/lv-shi-chun-qiu/cha-jin/zhs">吕氏春秋·察今</a>》</p>
<p>察今一共三段，第一段说，按着先人制度惯性因循守旧的人都是大沙雕；第二段说，荆州人拿了过期的水文资料强行过河结果沙币了。第三段说，好剑要的是锋利，不必是莫邪的名称；好马要的是能行千里，而不是骥骜的名称。成就功名的人，就是老板的好工具人。然后就抬出来了著名的讽刺湖北佬的段子：</p>
<div style="
    font-family: Baskerville, Georgia, &quot;Liberation Serif&quot;, &quot;Kaiti SC&quot;, STKaiti, &quot;AR PL UKai CN&quot;, &quot;AR PL UKai HK&quot;, &quot;AR PL UKai TW&quot;, &quot;AR PL UKai TW MBE&quot;, &quot;AR PL KaitiM GB&quot;, KaiTi, KaiTi_GB2312, DFKai-SB, &quot;TW\-Kai&quot;, serif;
    writing-mode: vertical-rl;
    width: 100%;
    word-break: break-all;
    white-space: pre;
    text-spacing: ideograph-alpha;
    border-right: 0.2em solid #e00711;
    text-align: justify;
    text-justify: inter-ideograph;
">
楚人有涉江者，其剑自舟中坠于水，遽契其舟，
曰：「是吾剑之所从坠。」舟止，从其所契者入水求之。
舟已行矣，而剑不行，求剑若此，不亦惑乎？

以此故法为其国与此同。
时已徙矣，而法不徙，以此为治，岂不难哉？

有过于江上者，见人方引婴儿而欲投之江中，
婴儿啼，人问其故，曰：「此其父善游。」
其父虽善游，其子岂遽善游哉？
此任物亦必悖矣。荆国之为政，有似于此。
</div>

<p>第二个收获就是，果不其然又是一个阴阳怪气讽刺朝政的段子。看来每一个成语背后都有一个键政的动机哎。</p>
<p>第三个收获，没想到刻舟求剑之后，还有个「其父善游」的更离谱段子卧槽。。。</p>
<p>然后突然就想到了近期第四个收获，<a href="https://www.zhihu.com/question/511590823">王中林院士拓展麦克斯韦方程组</a>，在渣乎上看的一路下来，无论是懂哥，还是路人，几乎全是在喷。但是恰好就<a href="https://news.ycombinator.com/item?id=29977041">在 HN</a> 有人投递了一则如何通过伽利略旋转和洛伦兹旋转认识特种相对论的线串</p>
<p><a href="https://twitter.com/MarkusDeserno/status/1482811504424542211">https://twitter.com/MarkusDeserno/status/1482811504424542211</a></p>
<p><img alt="" src="/images/stdout-02-03.jpg" /></p>
<p>其中从 <code>arctan(m12) = arctan(m1) + arctan(m2)</code> 推到 <code>tan(x+y) = [tan(x) + tan(y)] / [1 – tan(x)·tan(y)]</code></p>
<p>再到 <code>m12 = [m1 + m2] / [1 – m1·m2]</code></p>
<p>好吧，我也假装我看懂了！</p>
<p>最后一个感触，大家都顾着去看2500年前楚国人和当今院士的笑话了，却很少有人正面分析一下问题。</p></p>
            <div class="card-subtext muted-text">
              <p>Posted <time datetime="2022-01-19T23:15:24+08:00">2022-01-19</time></p>
<p>stdout</p>            </div>
          </article>
        </div>


        <!-- new article -->
        <div class="card blog-card">
          <article class="card-body">
            <a href="/2022/stdout-01"  rel="bookmark" >
              <h2 class="card-title">python-phoenixdb 设置读取超时</h2>
            </a>
            <p class="card-text"><p>PhoenixDB 居然是基于 requests + pb2 做的传输层协议。连接的是 queryserver 的 http 接口</p>
<p>看 <a href="https://git-wip-us.apache.org/repos/asf?p=phoenix-queryserver.git;a=blob;f=python-phoenixdb/phoenixdb/avatica/client.py">avatica/client.py 源码</a> 可以得知这玩意默认是不支持设置read timeout的。强行hack一个：</p>
<pre><code>import phoenixdb
import functools
c = phoenixdb.connect('http://localhost:8765/', autocommit=True, auth=&quot;SPNEGO&quot;)
c._client.session.request = functools.partial(c._client.session.request, timeout=2)
</code></pre>
<p><code>partial</code> 这个神奇的魔法可以设置一个默认参数。其它地方传入了别的timeout也可以自行覆盖，无缝兼容。</p></p>
            <div class="card-subtext muted-text">
              <p>Posted <time datetime="2022-01-11T12:00:56+08:00">2022-01-11</time></p>
<p>stdout</p>            </div>
          </article>
        </div>


        <!-- new article -->
        <div class="card blog-card">
          <article class="card-body">
            <a href="/2022/stderr-01"  rel="bookmark" >
              <h2 class="card-title">信息时代 的 娃</h2>
            </a>
            <p class="card-text"><p>家里的娃逐渐长大，TA在车上喜欢听的歌曲就翻来覆去奥特曼的 OP 和 ED。然后想引导TA 们听点别的，QQ音乐又没有买会员，一些好的大部头作品，能搜出来的就是各种翻唱或者自媒体的同标题蹭流量的垃圾作品，很无奈。</p>
<p>想起来自己小时候虽然家庭条件一般，但是也是买了收录机和一些经典磁带，能够把自己喜欢的歌曲反复听个够。反复听歌有个好处，那就是专注力的训练，和重复带来的高准确度记忆。现在的娃听歌，由于点播太方便，经常听一半就切歌，然后上一次点的不一定能recall点出来。还有版权的原因，前一阵加星的歌可能过一阵就听不了了。这样的环境，只能培养出很糟糕的听众和很低的欣赏水平吧。</p>
<p>也恰好从<a href="https://www.bilibili.com/video/BV1Gx411J7Qe">【箭厂视频】消失了20年后，中国黑胶唱片工厂复活</a> 看到一个评论，很是有感触</p>
<blockquote>
<p>ikyokyo 2017-08-18 13:27<br />
作为一个黑胶时代过来，并且家里曾经有过黑胶唱片机的人，我想分享一些当年的旁门左道和玩黑胶奇技yin巧，这些事不是每个听黑胶的人都知道，有些人知道也不会说。<br />
1.黑胶唱片机到后期，已经十分自动化了，按下播放键以后，唱针会自动挪到唱片开始的位置，然后缓缓下降，按下停止键或者放完以后也会自动停止并归位，一切都是由机械实现的。<br />
2.换歌需要手动把唱针抬起来，然后把摇杆掰到对应位置，因为唱片不像CD那样有专门的区域存储时间码，至于怎么判断一首歌在什么位置，用肉眼看就行了，唱片的记录密度很低且都是明文，两首歌中间的空白部分由于没有声音，会有一条深色的印记。<br />
3.同样地，你可以用肉眼看出音乐哪些地方是高潮，哪些地方是低谷，高潮部分因为音量较大，乐器较多，所以花纹刻得较深，安静的部分反之。甚至可以通过整个唱片的花纹判断是摇滚乐还是古典乐。<br />
4.即使不插电你也一样可以听唱片，早年的唱片机就是这样工作的，而且有意思的是，如果你不接喇叭只开唱片机，耳朵凑近唱针那里依然可以听到十分微小的声音。<br />
5.你可以在唱片机出于待机状态时，自己把唱针掰到唱片上，然后用手去转唱片，你将听到十分不均匀的跑调声音，你还可以把唱片倒转，就能听见倒放。还有一种变态玩法，就是把唱片故意歪着放， 这样唱片和唱针会来回摇摆，速度也会忽高忽低，一些老电影里可以看见军方或者坏蛋用这种方法折磨人。<br />
6.唱片永远不会出现CD那种刺耳的磕绊，但唱片一样会卡碟，如果遇上唱片设计不佳，或者唱机故障等原因，唱针在放完一圈后又跃迁回去了，唱机就会在一小段旋律间反复循环，中间会有“嘭”的一声。<br />
7.盗版唱片很难达到正版音质，因为盗版商除非跟唱片厂勾结，否则拿不到母版，所以说数字音乐时代的到来一定程度上是助长了盗版。</p>
</blockquote>
<p>现在想起来，磁带/唱片/CD这个东西是有「灵气」的，是一个很好的交互体验：</p>
<ul>
<li>具体的歌集和磁带的实物是一一对应的，你在数码时代，你无法回忆起那个下雨天把磁带插入收录机的心情。</li>
<li>数码时代没法根据封面检索。孩子们缺乏音乐对 visual 艺术上的关联。</li>
<li>你还可以自由对歌曲进行翻录、对 instrumental/配乐版 进行自我陶醉的二创</li>
<li>订阅制的streaming service，这对我们这一代习惯了 ownership 的人来说很不安。你购买了，不一定你以后能随时播放，你会员失效了或者账号被夹，你就不能听你「买」过的歌了。</li>
<li>最重要的，孩子们对歌词是没有「字面意义」的理解，他们永远想不到我们小时候会为了一首喜爱的歌，在课堂上偷偷手抄歌词。</li>
</ul>
<p>第二个故事，娃在一个玩具，百变魔尺，能自己编一个简单的刀剑、枪的形状玩，但是更复杂的结构就做不出来了。看到卖家秀的各种玩意很是想学会，但是视频动作太快，拍摄角度非常不利于学习。娃由于已经近视，所以对TA看LCD屏幕设备也是比较忌讳，所以只是给他看一会儿。于是我回忆起小时候拿一本折纸书反复琢磨，于是去 yangkeduo 上搜了一下纸质的魔尺教程材料，销量居然只有区区几十，我不明白成百上千的娃是怎么学会魔尺的高级玩法的。都靠自己琢磨吗？还是娃自己从手机/Pad上获得？</p>
<p>所以最近一直被这个问题困扰。信息时代对当代社会来说是怎么样的 impact。家长持有手机和数码设备，对着信息有绝对的掌控权，可以指定什么时候看什么东西，娃和我们小时候比起来，更像是家长和老师附庸，缺乏一个自由探索的条件。虽然网上好东西多，但是在TA们对自由点播和检索的内容有把控能力之前，TA们的资讯获取能力恐怕是及其狭隘和封闭的。加上国内的在线平台质量又参差不齐，容易看「歪」的东西上瘾。更不幸的是，他们这代人又伴随这平庸出版物的极大丰富，比如被很多人喷三观有问题的《米小圈》《姜小牙》，恰好是娃的最爱。对严肃(aka 枯燥)一点的纸质内容，他们又非常不耐受，有典型的数码戒断反应。唉。</p>
<p>这或许是我家娃自己的原因，或者是我作为家长的问题，但愿是我想多了</p></p>
            <div class="card-subtext muted-text">
              <p>Posted <time datetime="2022-01-10T22:13:39+08:00">2022-01-10</time></p>
<p>stderr</p>            </div>
          </article>
        </div>


        <!-- new article -->
        <div class="card blog-card">
          <article class="card-body">
            <a href="/2021/stdin-017"  rel="bookmark" >
              <h2 class="card-title">Zizek 和盗版</h2>
            </a>
            <p class="card-text"><blockquote>
<p>齐泽克先生在2007 年第一次到中国来访问，他在我们这里待了一个星期，他讲了一个故事，是跟中国有关的。他讲了什么呢？就是有一天，他在美国的录像店门口，看到这么一句话：“不要买盗版光碟，买盗版，就等于支持共产主义”。因为，很大一部分盗版光碟都是中国生产的，所以美国人非常恼火这个知识产权的问题。齐泽克跟我说：“一看到这个标语我就非常兴奋，我就偏要买盗版”。这是为什么呢，因为这些左派思想家有个非常重要的观点是，数码时代实际上是私有制真正破产的时代，因为复制太容易了。我们后面讲到鲍德里亚就会讲到文本的消失，就是拟真性是讲什么呢，是讲过去我们有个手稿，一写一个手稿然后很珍贵。现在我们有电脑，就大家在电脑上面写作业的时候有没有想过一个问题：以后我们是一个无档案的时代，因为你没有原始手稿，你最后交给出版社的，如果你没有故意储存，也就是说每修改一次储存一次的话，你修改的痕迹都没有。所以齐泽克在南京，他跟我讲，哪有卖盗版的？我就是要买！</p>
</blockquote>
<p><img alt="" src="/images/2021/stdin-017-1.jpg" /></p>
<p>从 <a href="https://www.zhihu.com/question/494242235/answer/2237418578">如何看待俄虚拟主播因翻唱《喀秋莎》被索要版权费？</a> 看到的 <a href="https://ptext.nju.edu.cn/b9/03/c12209a243971/page.htm">张异宾：《鲍德里亚：欢迎来到真实的荒漠——从电影&lt;骇客帝国&gt;谈起》</a>。后者有从 尼康D800讲到奥迪A6讲到 iPad 非常有趣，值得一读。</p></p>
            <div class="card-subtext muted-text">
              <p>Posted <time datetime="2021-12-30T15:06:03+08:00">2021-12-30</time></p>
<p>stdin</p>            </div>
          </article>
        </div>


        <!-- new article -->
        <div class="card blog-card">
          <article class="card-body">
            <a href="/2021/stdout-028"  rel="bookmark" >
              <h2 class="card-title">Microsoft 官网的 403 错误</h2>
            </a>
            <p class="card-text"><pre><code>$ curl -H &quot;User-Agent: User-Agent: Mozilla/5&quot; -kvs 'http://www.microsoft.com'
*   Trying 118.123.102.107...
* TCP_NODELAY set
* Connected to www.microsoft.com (118.123.102.107) port 80 (#0)
&gt; GET / HTTP/1.1
&gt; Host: www.microsoft.com
&gt; Accept: */*
&gt; User-Agent: User-Agent: Mozilla/5
&gt;
&lt; HTTP/1.1 403 Forbidden
&lt; Server: GHost
&lt; Content-Length: 306
&lt; Content-Type: text/html
&lt; Mime-Version: 1.0
&lt; Expires: Wed, 29 Dec 2021 14:42:28 GMT
&lt; Cache-Control: max-age=0, no-cache
&lt; Pragma: no-cache
&lt; Date: Wed, 29 Dec 2021 14:42:28 GMT
&lt; Connection: keep-alive
&lt;
&lt;HTML&gt;&lt;HEAD&gt;
&lt;TITLE&gt;Access Denied&lt;/TITLE&gt;
&lt;/HEAD&gt;&lt;BODY&gt;
&lt;H1&gt;Access Denied&lt;/H1&gt;

You don't have permission to access &quot;http&amp;#58;&amp;#47;&amp;#47;mscom&amp;#46;errorpage&amp;#46;failover&amp;#46;com&amp;#47;403&amp;#47;403&amp;#46;htm&amp;#63;&quot; on this server.&lt;P&gt;
Reference&amp;#32;&amp;#35;18&amp;#46;1c697b76&amp;#46;1640788948&amp;#46;3b971c1f
&lt;/BODY&gt;
&lt;/HTML&gt;
* Connection #0 to host www.microsoft.com left intact
* Closing connection 0
</code></pre>
<p>不知道为何会指向  <code>http://mscom.errorpage.failover.com</code> 这域名也不是微软的。</p></p>
            <div class="card-subtext muted-text">
              <p>Posted <time datetime="2021-12-29T22:42:14+08:00">2021-12-29</time></p>
<p>stdout</p>            </div>
          </article>
        </div>


        <!-- new article -->
        <div class="card blog-card">
          <article class="card-body">
            <a href="/2021/stdout-027"  rel="bookmark" >
              <h2 class="card-title">Chrome 阉割指南</h2>
            </a>
            <p class="card-text"><p>不折腾不舒服。继之前 <a href="/2021/stdout-020">Edge调教</a> 之后记录一下 Chrome V70怎么阉割。</p>
<p>下载：</p>
<p><a href="https://dl.google.com/edgedl/release2/chrome/ALiXMYM2w8-h_70.0.3538.77/70.0.3538.77_chrome_installer.exe">win 32</a> | <a href="https://dl.google.com/edgedl/release2/chrome/AJ7ozxk4OLvN_70.0.3538.77/70.0.3538.77_chrome_installer.exe">win 64</a> | <a href="https://redirector.gvt1.com/release2/chrome/AIJolai8dEil_70.0.3538.67/GoogleChrome-70.0.3538.67.dmg">Mac</a></p>
<p>上面的链接已经年久失修了，对比了一下获取最新版本的脚本发现 Google 已经不提供老链接了。</p>
<pre><code>curl -vsk 'https://tools.google.com/service/update2' -HContent-Type:text/xml --data-binary &quot;&lt;?xml version='1.0' encoding='UTF-8'?&gt;
&lt;request protocol='3.0' sessionid='{est-blog}' installsource='ondemandcheckforupdate' dedup='cr'&gt;
&lt;os platform='mac' version='66.6.6666.66' arch='x64'/&gt;
&lt;app appid='com.google.Chrome' ap='' version='' nextversion='' lang='' brand='GGLS' client=''&gt;&lt;updatecheck/&gt;&lt;/app&gt;
&lt;/request&gt;&quot;
</code></pre>
<p>安装完毕之后</p>
<pre><code>cd '/Applications/Google Chrome.app/Contents'
touch Frameworks
sudo chown root:wheel Frameworks
sudo chmod 000 Frameworks

cd ~/Library/Google
rm -rf GoogleSoftwareUpdate
touch GoogleSoftwareUpdate
sudo chown root:wheel GoogleSoftwareUpdate
sudo chmod 000 GoogleSoftwareUpdate
</code></pre></p>
            <div class="card-subtext muted-text">
              <p>Posted <time datetime="2021-12-28T23:00:05+08:00">2021-12-28</time></p>
<p>stdout</p>            </div>
          </article>
        </div>


        <!-- new article -->
        <div class="card blog-card">
          <article class="card-body">
            <a href="/2021/stdout-026"  rel="bookmark" >
              <h2 class="card-title">认识「洋节」</h2>
            </a>
            <p class="card-text"><p>都说 xmas eve 是洋节，我们就来数一数到底有哪些洋节</p>
<ol>
<li>元旦1月1日。由北「洋」军阀袁世凯设立。依据是内务部总长朱启钤《定四季节假呈》，把原来农历（夏历）的正月初一的「元旦」挪用到了格里历一月一日。格里历(Gregorian calendar)引入中国是1912，元旦正式生效是1914年。</li>
<li>春节。严格的来说，传统春节是二十四节气中的“立春”，是太阳历。后来被袁世凯直接拍板成农历正月初一。而夏历正月初一一般被认为是最接近立春之朔日（月缺之日）。农历最后一次农历大改版为《授时历》，发生在崇祯二年（1629年）九月，由礼部左侍郎徐光启发起，编撰者：耶稣会的龙华民（西西里人）、罗雅谷（米兰人）、邓玉函（瑞士人）、汤若望（日耳曼人）。</li>
<li>生肖其实不跟农历绑定，而是跟 二十四节气绑定。二十四节气最后一次改版，也是上面那个《时宪历》那帮洋传教士定下来的。有意思的是，春分那一天恰好开始白羊座，其实我最近才知道二十四节气就约等于12星座，也就是黄道十二宫。如果要说农历《时宪历》含洋量太高，那么他之前的《授时历》编撰者是河北人郭守敬，生于元太宗(窝阔台)三年（1231年）于邢州，由他祖父郭荣(金国人)抚养成人，说起来这老兄甚至顺着蒙古人统治下的锡伯利亚去过北极科考，同一位尼泊尔建筑师阿尼哥合作搞过天文台，十分了得。</li>
<li>妇女节，全称为「“三八”国际劳动妇女节」。1857年3月8日，美国纽约的制衣和纺织女工走上街头，抗议恶劣的工作条件和低薪。尽管后来当局出动警察攻击并驱散了抗议人群，但这次抗议活动促成了两年后的3月第一个工会组织的建立。1917年3月8日，在俄罗斯帝国首都彼得格勒，纺织女工举行罢工及游行，遍及整个城市，也导致俄罗斯革命的开始。</li>
<li>清明节，二十四节气之一。太阳到达黄经15°</li>
<li>劳动节，1884年，劳动骑士团 Knights of Labor 倡导「8小时工作制」；10月，行会与工会联盟召开大会确定1886年5月1日为要求八小时工作制成为标准的日期，美国工会准备举行总罢工支援；1886年5月1日，数千名参加罢工和参加全美各地举行的集会的工人唱起了《八小时》（Eight Hour）一歌；接下来发生干草市场屠杀(Haymarket affair)。</li>
<li>端午节，据传是为了纪念<a href="/202006/stderr-008">恨国诗人屈原</a>，来自「蛮夷」楚国</li>
<li>儿童节。1949年11月国际民主妇女联合会在苏联莫斯科所召开的执行委员会议，会上为纪念悼念1942年捷克利迪策村对儿童的屠杀及伤害，以及全世界所有在法西斯侵略战争中死难的儿童，为保障世界各国儿童的生存权、保健权和受教育权及改善儿童的生活，决议以6月1日为国际儿童节。1949年12月23中央人民政府政务院第十二次政务会议于日通过了《全国年节及纪念日放假办法》，其中规定6月1日为儿童节。</li>
<li>建军节，由 契丹苏维埃共和国 (Kitajskaja Sovetskaja Respublika, Кита́йская Сове́тская Респу́блика) 于1933年6月决定，将8月1日定为中国工农红军的建军节。<br />
<img alt="" src="https://upload.wikimedia.org/wikipedia/commons/thumb/3/3a/National_Flag_of_Chinese_Soviet_Republic.svg/400px-National_Flag_of_Chinese_Soviet_Republic.svg.png" /></li>
<li>圣纪节，穆罕默德的诞辰与逝世恰巧都在伊斯兰教历三月十二日，回回三大节之一。<br />
<img alt="" src="http://wx1.sinaimg.cn/large/4b18c48fly4glz8qsahmzj20kw0fmdia.jpg" /></li>
</ol>
<p>再说一下真正被 appropriation 的「洋节」</p>
<ol>
<li>圣诞节。异教徒的节日，四舍五入冬至日，古埃及太阳神 Ra 的节日，被(东)罗马帝国拿来宣传成中东人耶稣的生日。。。摊手。。。比如犹太人就不过圣诞节，但是他们在这一天<a href="https://www.youtube.com/watch?v=Ny3PQOWsUGs">吃中餐</a></li>
<li>母亲节，由12岁女孩安娜·贾维斯(Anna Jarvis)发起，被商家利用，安娜用<a href="https://www.sohu.com/a/313400538_782639">下半辈子反对母亲节</a></li>
<li>父亲节：抄袭母亲节。</li>
</ol></p>
            <div class="card-subtext muted-text">
              <p>Posted <time datetime="2021-12-24T23:59:59+08:00">2021-12-24</time></p>
<p>stdout</p>            </div>
          </article>
        </div>


        <!-- new article -->
        <div class="card blog-card">
          <article class="card-body">
            <a href="/2021/stdout-025"  rel="bookmark" >
              <h2 class="card-title">如何可视化跟踪分析 Python import 耗时</h2>
            </a>
            <p class="card-text"><p>首先在本地安装 <code>pip install tuna</code></p>
<p>然后跑个分，需要 <code>CPython &gt;= 3.7</code>，输入</p>
<p><code>PYTHONPROFILEIMPORTTIME=1 python3 myscript.py 2&gt;1.log</code></p>
<p><img alt="tuna" src="https://camo.githubusercontent.com/d76ac242a42f9c394c1ae66da655173a51d9ed9c09107dd8d42b684c15aa2d05/68747470733a2f2f6e7363686c6f652e6769746875622e696f2f74756e612f666f6f2e706e67" /></p>
<p>然后 <code>tuna 1.log</code> ，会自动打开浏览器围观 <code>import</code> 耗时分布。</p></p>
            <div class="card-subtext muted-text">
              <p>Posted <time datetime="2021-12-22T14:00:28+08:00">2021-12-22</time></p>
<p>stdout</p>            </div>
          </article>
        </div>


        <!-- new article -->
        <div class="card blog-card">
          <article class="card-body">
            <a href="/2021/stdout-024"  rel="bookmark" >
              <h2 class="card-title">4句话自动换win10壁纸</h2>
            </a>
            <p class="card-text"><ol>
<li>获取当前用户 <code>sid</code>。cmd下设变量如此复杂。而且 <code>|</code> 的转义字符居然是 <code>^|</code></li>
<li>读取 LogonUI 的自动壁纸。<code>reg query</code>输出极其不友好。需要 tokens=3</li>
<li>设置为当前桌面。</li>
<li>刷新。这个属于按运气成功。真正刷新的需要调用 dll 。算了</li>
</ol>
<pre><code>for /f %%g in ('wmic useraccount where name^=&quot;%USERNAME%&quot; get sid ^| findstr ^S\-d*') do set USERSID=%%g
For /f &quot;tokens=3&quot; %%k IN ('reg query HKLM\SOFTWARE\Microsoft\Windows\CurrentVersion\Authentication\LogonUI\Creative\%USERSID%  /s /v  landscapeImage /t REG_SZ ^| findstr /ri &quot;REG_SZ&quot;') do set img_path=%%k
reg add &quot;HKEY_CURRENT_USER\Control Panel\Desktop&quot; /v Wallpaper /t REG_SZ /d %img_path% /f
RUNDLL32.EXE user32.dll,UpdatePerUserSystemParameters 
</code></pre>
<p><a href="/202104/stdout-005">之前的方法</a>搞复杂了</p></p>
            <div class="card-subtext muted-text">
              <p>Posted <time datetime="2021-12-08T21:39:36+08:00">2021-12-08</time></p>
<p>stderr</p>            </div>
          </article>
        </div>


        <!-- new article -->
        <div class="card blog-card">
          <article class="card-body">
            <a href="/2021/stdout-023"  rel="bookmark" >
              <h2 class="card-title">FastAPI/Starlette支持静态文件支持SPA</h2>
            </a>
            <p class="card-text"><p>FastAPI 官方支持 <code>from fastapi.staticfiles import StaticFiles</code> 充当一个静态文件服务器</p>
<p>其实实现是 starlette。这玩意可以在 <code>directory</code> 下放一个 <code>404.html</code>，恰好单页应用也需要用 <code>index.html</code> 充当所有 javascript 框架注册的 router</p>
<p>只是有一个毛病，这货返回的 HTTP status code 是 404。用起来没啥大毛病，但是就是浏览器不会记录网址，导致没法匹配浏览历史快速找到之前访问过的页面。</p>
<p>拿来改改继续用</p>
<pre><code>  from starlette.staticfiles import StaticFiles, Scope, Headers, Response, FileResponse

  class StaticFilesWithout404(StaticFiles):
      async def get_response(self, path: str, scope: Scope) -&gt; Response:
          r = await super().get_response(path, scope)
          h = Headers(scope=scope)
          full_path, stat_result = await self.lookup_path('404.html')
          if isinstance(r, FileResponse) and r.path == full_path:
              if 'text/html' in (h.get('accept') or ''):
                  r.status_code = 200
              else:
                  return Response('', status_code=404)
          return r

  app.mount("/frontend", StaticFilesWithout404(directory="frontend", html=True), name="static")
</code></pre>
<p>这段代码大概是起到了类似 <a href="http://nginx.org/en/docs/http/ngx_http_core_module.html#try_files">nginx <code>try_files</code></a> 的作用。默认静态文件映射一个目录，但是如果找不到就按根目录的 index.html 输出。这里还判断了请求的 <code>accept</code> 头，如果是 xhr/Fetch 就会直接返回一个0字节长度无MIME的404。</p>
<p>由此我想到了一个学究式的 leaky abstraction。众所周知，如果一个URL不存在，那么服务器应该返回404</p>
<p>但是现在都是 SPA 单页应用，都是先 200 返回 <code>index.html</code> 的内容，再由 javascript 的 router 去决定是否正常显示还是404 。所以返回 200 但是显示 404 就破坏了这个语义。如果要精确匹配SPA里的router如果不存在由服务器返回404，第一是搞 SSR，把前端那一坨代码跑在服务器端，第二种办法是 npm build 的时候输出一个可路由URL列表，然后部署的时候导入静态文件服务器更新。这个具体实现就留作homework由读者自行解决了。</p></p>
            <div class="card-subtext muted-text">
              <p>Posted <time datetime="2021-12-08T07:38:38+08:00">2021-12-08</time></p>
<p>stdout</p>            </div>
          </article>
        </div>


        <!-- new article -->
        <div class="card blog-card">
          <article class="card-body">
            <a href="/2021/stdout-022"  rel="bookmark" >
              <h2 class="card-title">人工构造Flask session模拟cookie登陆</h2>
            </a>
            <p class="card-text"><p>有没有好奇为什么 Flask 配置必须要求一个 <a href="https://flask.palletsprojects.com/en/latest/config/#SECRET_KEY">SECRET_KEY</a>，然后就可以在浏览器保存一个 session 状态读写数据。</p>
<p>这里记一下它的底层实现，其实需要依赖的包是 <a href="https://itsdangerous.palletsprojects.com/">itsdangerous</a></p>
<pre><code>  import hashlib
  from itsdangerous import URLSafeTimedSerializer
  URLSafeTimedSerializer(
          'YOUR_SECRET_KEY',  # flask SECRET_KEY
          'cookie-session',  # from flask.sessions.SecureCookieSessionInterface.salt
          # serializer=TaggedJSONSerializer(),
          signer_kwargs={'key_derivation': 'hmac', 'digest_method': hashlib.sha1}
  ).dumps({
      "your_key": "your_value"
  })
</code></pre>
<p>别人如果拿到你的 <code>SECRET_KEY</code> 就可以伪造任意 session cookie 了</p></p>
            <div class="card-subtext muted-text">
              <p>Posted <time datetime="2021-12-08T07:15:03+08:00">2021-12-08</time></p>
<p>stdout</p>            </div>
          </article>
        </div>


        <!-- new article -->
        <div class="card blog-card">
          <article class="card-body">
            <a href="/2021/stdin-016"  rel="bookmark" >
              <h2 class="card-title">苏35的UI汉化</h2>
            </a>
            <p class="card-text"><p><a href="https://www.zhihu.com/question/304693612/answer/2250648177">原文</a>禁止转载，那我就转载原文的<a href="https://mil.sina.cn/sd/2016-10-11/detail-ifxwrhpm2928730.d.html">原文</a></p>
<blockquote>
<p>日前，俄罗斯《消息报》采访了俄罗斯无线电电子技术集团（俄罗斯技术集团下属企业）副总经理吉维∙占季加夫，该集团是苏-35几乎所有航电系统的研制生产单位。<br />
占季加夫表示，“根据订购方的国情要求改装机载设备是重要的技术程序之一，一年多来我们都在致力于将驾驶舱内的信息翻译成汉语。但是，不像斯拉夫和拉丁字母，汉语的象形文字“很难”在LCD显示器上阅读。最终，中方要求维持原样，即显示器上保留西里尔字母。中国飞行员已有驾驶俄苏-27战机的飞行经验，该飞机的驾驶舱同样没有为中国进行改装，但飞行员们‘阅读’俄语的机上信息。”<br />
该报称，苏-35显示器上译成汉语的仪表读数说明和指令太过微小和模糊，以致难以阅读。通过扩大显示器的尺寸可以解决该问题，但这样就要彻底改造驾驶舱，研制和试验需要额外的资金和时间，中方伙伴并不希望这样。<br />
报道还指出，提供给中国的苏-35飞机唯一的特殊之处是在机载系统中加入了中国的“北斗”卫星导航系统。</p>
</blockquote>
<p>中文字库还是很大的，渲染也麻烦。</p></p>
            <div class="card-subtext muted-text">
              <p>Posted <time datetime="2021-12-02T07:20:03+08:00">2021-12-02</time></p>
<p>stdin</p>            </div>
          </article>
        </div>


        <!-- new article -->
        <div class="card blog-card">
          <article class="card-body">
            <a href="/2021/stdout-021"  rel="bookmark" >
              <h2 class="card-title">Python 3.X ctypes 和 greenlet size changed 坑三则</h2>
            </a>
            <p class="card-text"><h3>安装 setup.py 的时候 <code>No module named '_ctypes'</code> 报错</h3>
<pre><code>  Traceback (most recent call last):
    File &quot;&lt;string&gt;&quot;, line 1, in &lt;module&gt;
    File &quot;/usr/local/python3/lib/python3.9/site-packages/setuptools/__init__.py&quot;, line 18, in &lt;module&gt;
      from setuptools.dist import Distribution
    File &quot;/usr/local/python3/lib/python3.9/site-packages/setuptools/dist.py&quot;, line 34, in &lt;module&gt;
      from setuptools import windows_support
    File &quot;/usr/local/python3/lib/python3.9/site-packages/setuptools/windows_support.py&quot;, line 2, in &lt;module&gt;
      import ctypes
    File &quot;/usr/local/python3/lib/python3.9/ctypes/__init__.py&quot;, line 8, in &lt;module&gt;
      from _ctypes import Union, Structure, Array
  ModuleNotFoundError: No module named '_ctypes'
</code></pre>
<p>解决办法是不要用 3.9。</p>
<p>如果实在要用，则自己编译前需要加上 <code>yum install libffi-devel</code> 或者 <code>sudo apt-get install libffi-dev</code></p>
<p>来自<a href="https://stackoverflow.com/a/48045929">SO</a></p>
<h3><code>greenlet.greenlet size changed</code> 然后出错</h3>
<pre><code>/usr/local/lib/python3.7/importlib/_bootstrap.py:219: RuntimeWarning: greenlet.greenlet size changed, may indicate binary incompatibility. Expected 144 from C header, got 152 from PyObject
  return f(*args, **kwds)
/usr/local/lib/python3.7/importlib/_bootstrap.py:219: RuntimeWarning: greenlet.greenlet size changed, may indicate binary incompatibility. Expected 144 from C header, got 152 from PyObject
  return f(*args, **kwds)

Segmentation fault (core dumped)
</code></pre>
<p>这个摘自<a href="https://github.com/gevent/gevent/issues/1260">官方 iseue</a></p>
<blockquote>
<p>On Python 3.7 and higher, gevent 20.9.0 is required to use (a standard build of) greenlet 0.4.17.</p>
</blockquote>
<p>解决办法：<code>pip install gevent==20.9.0 pip install greenlet==0.4.17</code></p>
<h3>SQLAlchemy 1.4 大战 greenlet 0.4.17</h3>
<p>见 <a href="https://docs.sqlalchemy.org/en/14/changelog/changelog_14.html#change-12b8eb8e600cc32590b51d0087552191">sqlalchemy changelog</a></p>
<blockquote>
<p>to accommodate for the handling of Python contextvars (introduced in Python 3.7) for greenlet versions greater than 0.4.17. Greenlet version 0.4.17 added automatic handling of contextvars in a backwards-incompatible way; we’ve coordinated with the greenlet authors to add a preferred API for this in versions subsequent to 0.4.17 which is now supported by SQLAlchemy’s greenlet integration. For greenlet versions prior to 0.4.17 no behavioral change is needed, version 0.4.17 itself is blocked from the dependencies.</p>
</blockquote>
<p>然后就直接在 <a href="https://github.com/sqlalchemy/sqlalchemy/blob/703ff387c13f083ed0982071963155d679c862ab/setup.cfg#L42">setup.cfg里</a> 给 <code>greenlet != 0.4.17</code>了。</p>
<p>神仙打架，不听不听，和尚念经，果断 <code>sqlalchemy==1.3.24</code> 降级。</p></p>
            <div class="card-subtext muted-text">
              <p>Posted <time datetime="2021-12-01T17:41:32+08:00">2021-12-01</time></p>
<p>stdout</p>            </div>
          </article>
        </div>


        <!-- new article -->
        <div class="card blog-card">
          <article class="card-body">
            <a href="/2021/stdout-020"  rel="bookmark" >
              <h2 class="card-title">Edge调教指南——如何设置本地PAC代理和首页天气</h2>
            </a>
            <p class="card-text"><p>之前一直用的chrome v70，为什么呢？</p>
<p>第一是这个老版本允许 <code>--proxy-pac-url="file:///Users/me/1.pac</code> 这样设置，但是<a href="https://bugs.chromium.org/p/chromium/issues/detail?id=839566">Chromium项目的大爷们觉得</a>你本地的.pac不够安全，要网上的.pac才安全，所以一刀切给禁了。当然有热心人士觉得这没啥大不了的。不外乎装个插件就可以切PAC。但是chrome插件其实会有一个fingerprint。Extension一启用，隔壁老王都知道你开代理了。</p>
<p>第二，也是最重要的原因，这是最后一个chrome版本支持 <code>about://net-internals</code> 在本地查看浏览器底层网络请求。现在无论是 Edge 还是 Chrome 都必须把 .json 文件从 https://netlog-viewer.appspot.com/ 加载才能看了。很尼玛保护了隐私有没有啊。</p>
<p>但是坚持老版本，也付出了巨大的代价。很多新的 ES 语法不支持，比如说 Grafana 最新版 login 都进不去。这就尴尬了。只能被自愿升级了。</p>
<p>既然升级是必选项，那么就换 Edge 试试。</p>
<p>第一就是得解决这个本地 .pac 问题，其实从上面第二个工具里才能知道，PAC加载失败有个返回 <code>ERR_DISALLOWED_URL_SCHEME</code>。stackoverflow 上找到个奇技淫巧</p>
<p><code>open "/Applications/Microsoft Edge.app" --args --proxy-pac-url='data:application/x-javascript-config;base64,'$(base64 -i /Users/me/2.pac)</code></p>
<p>还能这样玩？双击666。</p>
<p>第二个把该禁用的禁用了，首页只留一个搜索框一个天气。但是这天气就特么定位到坡县了。而且下拉框点不出来啊。F12打开 devtool 一看，我尼玛好家伙 <code>https://www.bing.com/api/v6/Places/AutoSuggest</code> 被 Bing China 的网管给一把梭302到 <code>https://cn.bing.com/api/v6/Places/AutoSuggest</code> 了。然后就特么 CORS 给拦截，js读取不到列表。。。</p>
<p>最后怎么办？点那个天气图标，进入到 <code>https://www.msn.com/en-sg/weather/today/weather-today/we-city</code></p>
<p>然后找那个地图，手动选择自己所在城市，设置为 Home 。等 cookie 写入生效了，打开edge新tab就ok了</p>
<p>这年头上个网真鸡儿累。</p>
<p>btw 设置M$账号同步的时候，发现账号所在国家可以选很多不是国家的地方，但是时区就不能随便选了。F12改了也没用。微软的后台开发做的过滤还挺细致的。</p>
<p>btw2 发现一个很干净的启动页： <code>chrome-search://local-ntp/local-ntp.html</code> 或者直接在 <code>hosts</code> 里把 ntp.msn.com 干掉，有奇效。</p></p>
            <div class="card-subtext muted-text">
              <p>Posted <time datetime="2021-11-30T11:32:33+08:00">2021-11-30</time></p>
<p>stdout</p>            </div>
          </article>
        </div>


        <!-- new article -->
        <div class="card blog-card">
          <article class="card-body">
            <a href="/2021/stdin-015"  rel="bookmark" >
              <h2 class="card-title">烧脑两题：蚂蚁和橡皮筋，30万公里的电路</h2>
            </a>
            <p class="card-text"><p>今天遇到的两道题：</p>
<ol>
<li>一只蚂蚁站在静止不动的一米长的橡皮筋的左边端点开始向右边爬，爬行速度是每秒一厘米。现在固定橡皮筋的左端点，拉伸橡皮筋使之以每秒一厘米的速度伸长，蚂蚁仍然是以之前的速度向右爬，试问蚂蚁能否爬到橡皮筋右端点？假设橡皮筋可以拉无限长，求蚂蚁是否能追上橡皮筋，追不上的话两者差多少？</li>
</ol>
<p>解答没那么容易，见 zhihu 回答<a href="https://www.zhihu.com/question/440130887">1</a>, <a href="https://www.zhihu.com/question/33093421">2</a></p>
<ol start="2">
<li>如果长一光秒，宽1米的长方形电路，忽略导线的电阻，那么打开开关后灯泡要多久才通电？</li>
</ol>
<p><img alt="" src="/images/2021/stdin-015-1.jpg" /></p>
<p>答案来自<a href="https://www.youtube.com/watch?v=bHIhgxav9LY">视频</a>，主要讲了一通 坡印廷矢量 的道理。。。囧</p></p>
            <div class="card-subtext muted-text">
              <p>Posted <time datetime="2021-11-22T22:41:10+08:00">2021-11-22</time></p>
<p>stdin</p>            </div>
          </article>
        </div>


        <!-- new article -->
        <div class="card blog-card">
          <article class="card-body">
            <a href="/2021/stdout-019"  rel="bookmark" >
              <h2 class="card-title">TiDB不支持JSON字段默认值</h2>
            </a>
            <p class="card-text"><p>继前面的<a href="/2021/stdout-011">日期不兼容</a>坑，又发现<a href="https://docs.pingcap.com/tidb/stable/data-type-default-values">一个</a></p>
<blockquote>
<p>The BLOB, TEXT, and JSON columns cannot be assigned a default value.</p>
</blockquote>
<p>虽然 <a href="https://dev.mysql.com/doc/refman/5.7/en/json.html">MySQL 5.7 也是这么说</a>的：</p>
<blockquote>
<p>A JSON column cannot have a non-NULL default value.</p>
</blockquote>
<p>但是 <a href="https://dev.mysql.com/doc/refman/8.0/en/data-type-defaults.html">MySQL 8.0.13 就支持指定默认值</a>了</p>
<blockquote>
<p>Prior to MySQL 8.0.13, a JSON column cannot have a non-NULL default value.<br />
The default value specified in a DEFAULT clause can be a literal constant or an expression. With one exception, enclose expression default values within parentheses to distinguish them from literal constant default values. Examples:</p>
</blockquote>
<p>虽然语法很丑但是很实用啊。</p>
<p>所以这种语句</p>
<pre><code>  ALTER TABLE mytable MODIFY COLUMN my_json JSON DEFAULT (json_object());
</code></pre>
<p>在 TiDB 里就没法支持。这也带来一个问题，就是要 upsert 这个 字段的时候，写起来就很拧巴，以 <code>peewee</code> 这个ORM为例：</p>
<pre><code>  MyTable.update({
      'my_json' = fn.json_set(
          fn.COALESCE(MyTable.my_json, Cast('{}', 'JSON')),
          '%.some_key', 'some_value',
  )})
</code></pre>
<p>必须用 COALESCE 预防默认值为 <code>NULL</code> 的情况。太麻烦了。</p>
<p>btw 玩MySQL/TiDB的 JSON 有个坑的，那就是 json 的 <code>null</code> 是有值的，和 sql 的 <code>NULL</code> 是不同的。</p>
<p>也就是说</p>
<pre><code>  select json_extract('{}', '$.hey') IS NULL;
  select json_extract('{"hey": null}', '$.hey') = Cast('null' as JSON);
</code></pre>
<p>要注意。</p>
<p>btw2 MySQL的JSON数据抽取 <code>-&gt;&gt;</code> 是返回真正的值，等价于TiDB里的 json_unquote(json_extract(t.json_field, '$.key1.key2'))</p></p>
            <div class="card-subtext muted-text">
              <p>Posted <time datetime="2021-11-19T09:14:28+08:00">2021-11-19</time></p>
<p>stdout</p>            </div>
          </article>
        </div>


        <!-- new article -->
        <div class="card blog-card">
          <article class="card-body">
            <a href="/2021/stdin-014"  rel="bookmark" >
              <h2 class="card-title">怕学生会看HTML源码里的答案，Chrome允许网管禁止查看特定网站源码</h2>
            </a>
            <p class="card-text"><p>看到一个<a href="https://bugs.chromium.org/p/chromium/issues/detail?id=895462">奇葩issue</a></p>
<blockquote>
<p>With "view-source" in the URLBlacklist, the view-source:http://[URL] should not be available.  With Schools using Google Forms as a testing platform, students are able to use this shortcut to search through the source of the page, and determine the correct answers.</p>
</blockquote>
<p>然后 Google Chrome 就真的改了。。。</p>
<p>https://chromium-review.googlesource.com/c/chromium/src/+/3260807</p>
<p>Google 是开发人员太富余了。这种问提都要通过升级浏览器解决？</p>
<p>让人想起了前几天的<a href="https://www.theverge.com/2021/10/14/22726866/missouri-governor-department-elementary-secondary-education-ssn-vulnerability-disclosure">密苏里州的查看HTML源码刑事诉讼</a></p>
<blockquote>
<p>一名记者偶然发现，密苏里州官方教师资格证查询网站，存在严重的系统安全漏洞。仅仅通过查看网页HTML源代码，就能获取教师的身份证号码信息。于是，他向政府教育部门报告了这个问题。然而两天后，先于漏洞修复到来的，是州长即将对他发起刑事起诉。“政府不会掉以轻心，”州长Mike Parson在周四的新闻发布会上发言，“本届政府绝不姑息任何试图窃取个人信息并会造成威胁的作恶者。”</p>
</blockquote>
<p><a href="https://news.ycombinator.com/item?id=29170886">via</a></p></p>
            <div class="card-subtext muted-text">
              <p>Posted <time datetime="2021-11-10T13:35:30+08:00">2021-11-10</time></p>
<p>stdin</p>            </div>
          </article>
        </div>


        <!-- new article -->
        <div class="card blog-card">
          <article class="card-body">
            <a href="/2021/stdin-013"  rel="bookmark" >
              <h2 class="card-title">PCR testing site under the fireworks from Disney castle</h2>
            </a>
            <p class="card-text"><p>One of the most astonishing views from end of the year.</p>
<video src="/images/2021/stdin-013-1.mp4" controls preload="metadata"></video>

<p>From the evening of <a href="https://m.weibo.cn/detail/4698502573853047">31th Oct, Shanghai Disneyland</a></p></p>
            <div class="card-subtext muted-text">
              <p>Posted <time datetime="2021-11-08T22:28:06+08:00">2021-11-08</time></p>
<p>stdin</p>            </div>
          </article>
        </div>

    </main>
    <nav class="pagination-nav side-padding">
<a href="/index.03.html" class="pagination-newer">&lt; Newer Posts</a><a href="/index.05.html" class="pagination-older">Older Posts &gt;</a>    </nav>

<script src="/theme/js/core.js"></script>

  </body>
</html>