<!DOCTYPE html>
<html>
  <head>
    <title>Est's Blog</title>

    <meta charset="utf-8" />
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <link href="https://feeds.feedburner.com/initiative" type="application/rss+xml" rel="alternate" title="Est's Blog RSS Feed" />

    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="This blog is rated&nbsp;&nbsp;R⃣ , viewer discretion is advised" />


    <link rel="stylesheet" href="/theme/css/normalize.min.css" />
    <link rel="stylesheet" href="/theme/css/style.css" />


    <style>
      body {
        background: #ecedef url("/theme/img/ignasi_pattern_s.png") repeat;
      }
    </style>
  </head>
  <body class="list-body">
<nav class="nav-bar side-padding">
  <h1 class="nav-header"><a href="/" class="nav-text">
    Est's Blog
  </a></h1>
  <div class="hamburger-menu">
    <button onclick="hamburgerMenuPressed.call(this)" aria-haspopup="true" aria-expanded="false" aria-controls="menu" aria-label="Menu">
      <span></span>
      <span></span>
    </button>
    <ul id="menu" class="hamburger-menu-overlay">
      <li><a href="/" class="hamburger-menu-overlay-link">Home</a></li>

        <li><a href="/category/archive.html" class="hamburger-menu-overlay-link">archive</a></li>
        <li><a href="/category/stderr.html" class="hamburger-menu-overlay-link">stderr</a></li>
        <li><a href="/category/stdin.html" class="hamburger-menu-overlay-link">stdin</a></li>
        <li><a href="/category/stdout.html" class="hamburger-menu-overlay-link">stdout</a></li>

    </ul>
  </div>
</nav>    <main class="card-container side-gutter">
      <header class="list-header">
        <p class="list-header-subtext">This blog is rated&nbsp;&nbsp;R⃣ , viewer discretion is advised</p>
        <!-- <h1 class="list-header-title">Est's Blog</h1> -->
      </header>


        <!-- new article -->
        <div class="card blog-card">
          <article class="card-body">
            <a href="/post/58311721863"  rel="bookmark" >
              <h2 class="card-title">PyPy performance post is very misleading</h2>
            </a>
            <p class="card-text"><blockquote>
<p>PyPy performance post is very misleading. PyPy only has better printf performance than C in the particular case where you print the same expression twice. Specifically, their JIT figures out that it can decode the value only once instead of twice, which C cannot do because libc's printf is all run-time, so PyPy is about twice as fast since decoding is almost all of the work. If you change the test to anything where you're printing different expressions, PyPy is no faster than C. It seems to me that this post was either intentionally misleading or they didn't understand why their compiler was doing so suspiciously well on this benchmark (any time you're handily beating C is cause for suspicion). Moreover, as soon as PyPy has to print to an output stream instead of just creating a string in memory, the performance tanks becoming 7x slower than C.</p>
</blockquote>
<p><a href="https://groups.google.com/d/topic/julia-users/B3ZOUEaGOJY/discussion">via</a></p></p>
            <div class="card-subtext muted-text">
              <p>Posted <time datetime="2013-08-15T02:06:22+08:00">2013-08-15</time></p>
<p>archive</p>            </div>
          </article>
        </div>


        <!-- new article -->
        <div class="card blog-card">
          <article class="card-body">
            <a href="/post/57663601114"  rel="bookmark" >
              <h2 class="card-title">Chromecast的操作系统和硬件是什么</h2>
            </a>
            <p class="card-text"><p>前几天的<a href="http://blog.gtvhacker.com/2013/chromecast-exploiting-the-newest-device-by-google/">chromecast签名绕过破解</a>)</p>
<p>Is it really ChromeOS?</p>
<p>No, it’s not. We had a lot of internal discussion on this, and have concluded that it’s more Android than ChromeOS. To be specific, it’s actually a modified Google TV release, but with all of the Bionic / Dalvik stripped out and replaced with a single binary for Chromecast. Since the Marvell DE3005 SOC running this is a single core variant of the 88DE3100, most of the Google TV code was reused. So, although it’s not going to let you install an APK or anything, its origins: the bootloader, kernel, init scripts, binaries, are all from the Google TV.</p>
<p>简单的说，有Android的内核，没有Bionic / Dalvik。没法装apk。Chromecast的功能是作为一大坨二进制包直接当膏药粘到一个精简版android上的。</p>
<p><a href="http://www.ifixit.com/Teardown/Chromecast+Teardown/16069/1">拆解Chromecast</a>的硬件是：</p>
<ul>
<li>
<p>AzureWave AW-NH387 802.11 b/g/n WLAN, Bluetooth 3.0, and FM combo module </p>
</li>
<li>
<p>Marvell DE3005-A1 System-on-a-Chip。</p>
</li>
<li>
<p>Micron MT29F16G08MAA 16Gb NAND Flash memory </p>
</li>
<li>
<p>512MB of low-voltage Micron D9PXV DDR3L SDRAM</p>
</li>
</ul>
<p>SoC的资料很少，业界猜测是1.2GHz ARMv7双核，从512MB RAM 2G ROM 来看，这35刀的货就是个废品啊。还是我大MTK和Allwinner是业界良心。</p>
<p>另外Chromecast的镜像功能，也是用websocket发明。NIH综合征很严重。</p></p>
            <div class="card-subtext muted-text">
              <p>Posted <time datetime="2013-08-07T21:56:00+08:00">2013-08-07</time></p>
<p>archive</p>            </div>
          </article>
        </div>


        <!-- new article -->
        <div class="card blog-card">
          <article class="card-body">
            <a href="/post/57568901987"  rel="bookmark" >
              <h2 class="card-title">关于BREACH/CRIME的一些思考</h2>
            </a>
            <p class="card-text"><p>最近<a href="https://news.ycombinator.com/item?id=6166292">很火</a>的一个问题就是暴破TLS/SSL的  BREACH 攻击。我觉得有一些解决办法：</p>
<ol>
<li>
<p>hack一种兼容gzip，但是能对内容进行adaptive compression的技术。比如把用户输入不纳入Huffman coding范围，只压缩页面的其他部分。这样无论你在user input 做什么花样也不能影响最终conten length</p>
</li>
<li>
<p>csrf上做文章。由于大多数场景下，web framework是需要保证 csrf 是 per session的。目前基本都是服务器生成什么csrf，客户端下一次就需要传入一模一样的。我们可以发明一种聪明的技术，给客户端的csrf加入一些per request的变长noise，需要通过特定算法，最简单的比如XOR，才能还原csrf。其中这个变长的noise不是随机生成，因为随机生成可能被概率统计出noise level然后过滤掉，而是根据用户输入用一种变长散列生成的。比如用户输入为空，csrf为e0bc6e08a2fda853eef，用户输入为 user@gmail.com，csrf为 b594e902c7fe6b1748d13aefaf63a ，但是实际服务器端的csrf都一直是 04b58236f5 。</p>
</li>
</ol>
<p>目前业界的mitigation我觉得比较搓：</p>
<ol>
<li>禁用gzip。这个没意思了。</li>
<li>给html添加一些随机padding垃圾数据。这个不是等于禁用了gzip么。浪费空间浪费传输</li>
<li>在http头做文章。因为gzip只影响http body。这个缺点是需要js。兼容性不好</li>
<li>禁止频繁请求。这个最直接。哈哈。</li>
</ol></p>
            <div class="card-subtext muted-text">
              <p>Posted <time datetime="2013-08-06T21:19:50+08:00">2013-08-06</time></p>
<p>archive</p>            </div>
          </article>
        </div>


        <!-- new article -->
        <div class="card blog-card">
          <article class="card-body">
            <a href="/post/57017854092"  rel="bookmark" >
              <h2 class="card-title">肉鸡国真的有那么多网络部队天天去黑美帝吗？</h2>
            </a>
            <p class="card-text"><p>NSA笑而不语啊</p>
<p><img alt="" src="/images/tumblr/57017854092_0.png" /></p>
<p>看到<a href="http://www.theguardian.com/world/interactive/2013/jul/31/nsa-xkeyscore-program-full-presentation">XKS</a> 真心吓尿了！PRISM什么的比起来弱爆了。</p>
<p>这一系列事件，最让人感到恐怖的，不是gov的强大能力，而是Snowden这个私人第三方承包商，一个在夏威夷年薪20万美元的网管，也就是乙方，非编制，派遣工，都能接触到这么强大的工具。</p>
<p>其实GFW的运营商，启明星辰，不也是这么屌的么。参考Freebuf的大作：《<a href="http://www.myhack58.com/Article/html/1/4/2013/39619.htm">揭秘黑客界：黑吃黑到底谁吃谁</a>》</p>
<p>全世界的这些工具，被非公众利益滥用，也不远了。美帝当然就是好莱坞和各种版权组织来用NSA一阳指<a href="http://www.reddit.com/r/restorethefourth/comments/1h1hd0/proof_that_lobbyists_wanted_nsalike_spying/">戳死做盗版</a>的，肉鸡国当然就是各种河蟹，其实就是各级通管局用来收黑钱的工具罢了。</p></p>
            <div class="card-subtext muted-text">
              <p>Posted <time datetime="2013-07-31T20:42:00+08:00">2013-07-31</time></p>
<p>archive</p>            </div>
          </article>
        </div>


        <!-- new article -->
        <div class="card blog-card">
          <article class="card-body">
            <a href="/post/56849189733"  rel="bookmark" >
              <h2 class="card-title">MTK三卡三待？</h2>
            </a>
            <p class="card-text"><p>《MTK首推三卡三待》</p>
<p>http://news.mydrivers.com/1/270/270542.htm</p>
<blockquote>
<p>国际厂商LG率先采用了该方案，并且搭载三卡三待方案的LG Optimus L4II已经在巴西上市，真够迅速的。</p>
</blockquote>
<p>MediaTek Intros Triple-SIM Platform for Android Phones</p>
<p>http://www.pcmag.com/article2/0,2817,2422336,00.asp</p>
<blockquote>
<p>LG Electronics utilized MediaTek's <strong>dual-SIM platform</strong> for its Optimus L4II smartphone, currently selling in Brazil.</p>
</blockquote>
<p>http://www.mediatek.com/_en/03_news/01-2_newsDetail.php?sn=1114</p>
<blockquote>
<p>The cutting-edge solution, which comes in response to widespread demand for multi-SIM devices in emerging markets, was recently commercialized in Brazil by Optimus L4II smartphone from LG Electronics.</p>
</blockquote></p>
            <div class="card-subtext muted-text">
              <p>Posted <time datetime="2013-07-30T00:35:00+08:00">2013-07-30</time></p>
<p>archive</p>            </div>
          </article>
        </div>


        <!-- new article -->
        <div class="card blog-card">
          <article class="card-body">
            <a href="/post/56833809714"  rel="bookmark" >
              <h2 class="card-title">alternate-protocol:80:quic</h2>
            </a>
            <p class="card-text"><p>今天发现youtube 的视频cache服务器支持UDP 上的 QUIC SPDY了。</p>
<p>accept-ranges:bytes<br />
alternate-protocol:80:quic<br />
cache-control:private, max-age=24288<br />
content-type:video/mp4</p>
<p>好玩的是youtube的URL有：<br />
fallback_host:tc.v11.cache6.c.youtube.com</p></p>
            <div class="card-subtext muted-text">
              <p>Posted <time datetime="2013-07-29T21:30:21+08:00">2013-07-29</time></p>
<p>archive</p>            </div>
          </article>
        </div>


        <!-- new article -->
        <div class="card blog-card">
          <article class="card-body">
            <a href="/post/56693166618"  rel="bookmark" >
              <h2 class="card-title">Google的代码质量</h2>
            </a>
            <p class="card-text"><p><img alt="" src="/images/tumblr/56693166618_0.png" /></p>
<p>世界上的代码就没有不是面条形状的。</p>
<p><a href="http://talks.golang.org/2013/oscon-dl.slide#21">via</a></p></p>
            <div class="card-subtext muted-text">
              <p>Posted <time datetime="2013-07-28T11:00:28+08:00">2013-07-28</time></p>
<p>archive</p>            </div>
          </article>
        </div>


        <!-- new article -->
        <div class="card blog-card">
          <article class="card-body">
            <a href="/post/56475148693"  rel="bookmark" >
              <h2 class="card-title">为什么很多机器不能升级Android 4.3 (4.0/4.x/ICS/JB)</h2>
            </a>
            <p class="card-text"><p>Android 4.3发布了。最好用的功能不是媒体报道的那些，而是可以<a href="http://www.reddit.com/r/Android/comments/1j10zq/app_ops_android_43s_hidden_app_permission_manager/">对每个app进行单独的权限设置</a></p>
<p>今天在<a href="http://www.reddit.com/r/Android/comments/1j13xd/how_oems_havent_announced_43_updates_for_the/">reddit上看到一个帖子</a>，解释了为啥很多Android机器不提供ICS和JB升级，我蛋痛，所以就来翻译下：</p>
<ul>
<li>OEM不直接从Google得到Android的源码</li>
<li>做SoC芯片的厂商可以从Google得到源码，然后开发BSP(Board Support Package)。里边包含了驱动和优化</li>
<li>BSP就交付给OEM厂商，厂商就可以给设备发布Android升级包。</li>
</ul>
<p>所以。现在的手机厂商都在等SoC厂商发布Android 4.3 BSP</p>
<p>例如，高通(Qualcomm)前不久宣布对Snapdragon S3芯片放弃Android 4.2.2的BSP开发。所以HTC就不得不宣布 One S 不再有升级。骚尼(Sony)的Xperia S, SL, Acro S 和 ION 同理。因为都是基于 S3 SoC</p>
<p>如果大家还记得的话，Thunderbolt 和 Sensation (包括LTE版本) 都用的是 Scorpion MSM8655，高通宣布不继续支持，所以用这个芯片的OEM也没得玩了。（译者注：狗日的海信EG900，原来我错怪你不能升级JB了）</p>
<p>但是三爽(Samsung)是个例外。他们本身是SoC提供商(Exynos系列)，自身本身也是OEM厂商。所以自家的嫡系真是碉堡了。不过Galaxy S II 的 LTE 版本用了高通的Scorpion SoC，也就不再更新了</p>
<p>虽然这个系统不完美，但是这就是业界的现状。</p>
<p>译者补充：为什么G家亲儿子可以升级，因为G家牛逼，可以跟SoC谈判，保证超长时间的芯片支持周期。</p>
<p>tl;dr 一句话：艹你娘的蛋的高通。</p></p>
            <div class="card-subtext muted-text">
              <p>Posted <time datetime="2013-07-25T21:34:00+08:00">2013-07-25</time></p>
<p>archive</p>            </div>
          </article>
        </div>


        <!-- new article -->
        <div class="card blog-card">
          <article class="card-body">
            <a href="/post/56422892861"  rel="bookmark" >
              <h2 class="card-title">Google ChromeCast的问题</h2>
            </a>
            <p class="card-text"><p>目前我觉得的问题：</p>
<ol>
<li>授权问题：</li>
</ol>
<blockquote>
<p>You may not publicly distribute or ship your Google Cast application without written permission from Google, per the terms of service described below</p>
</blockquote>
<ol start="2">
<li>无论是pad/phone通过wifi，还是红外遥控，延迟是否巨大？</li>
<li>是否支持外挂字幕？.ass 特效字幕？</li>
<li>是否支持音频输出？</li>
<li>是否支持HDMI passing through</li>
</ol>
<p>同时，我越来越觉得Google像Microsoft了。很多 NIH 综合症。Airplay不支持也就算了，现有的Miracast，DLNA都被华丽的无视了。非得自己搞个专有的websocket协议。</p></p>
            <div class="card-subtext muted-text">
              <p>Posted <time datetime="2013-07-25T09:17:50+08:00">2013-07-25</time></p>
<p>archive</p>            </div>
          </article>
        </div>


        <!-- new article -->
        <div class="card blog-card">
          <article class="card-body">
            <a href="/post/55847613758"  rel="bookmark" >
              <h2 class="card-title">菊花塞个涡喷发动机 + 滑雪</h2>
            </a>
            <p class="card-text"><iframe width="640" height="360" src="http://www.youtube.com/embed/icUCcDucII8?feature=player_detailpage" frameborder="0" allowfullscreen></iframe>

<p>开挂的老外</p>
<p><a href="http://www.reddit.com/r/videos/comments/1il8zi/snow_ski_jet_pack_awesome/">via</a></p></p>
            <div class="card-subtext muted-text">
              <p>Posted <time datetime="2013-07-19T01:23:23+08:00">2013-07-19</time></p>
<p>archive</p>            </div>
          </article>
        </div>


        <!-- new article -->
        <div class="card blog-card">
          <article class="card-body">
            <a href="/post/55421780172"  rel="bookmark" >
              <h2 class="card-title">Sally-Anne test</h2>
            </a>
            <p class="card-text"><p>好吧，看了这么久acfun居然<a href="http://www.acfun.tv/v/ac644991">学到了姿势</a></p>
<p>这是一个心理学和认知学的实验。Sally-Anne test</p>
<p>Sally和Anne在同一个房间</p>
<p>Sally有一个<strong>盒子</strong></p>
<p>Anne有一个<strong>篮子</strong></p>
<p>这两个容器都是有盖不透明的。</p>
<p>现在Sally把一块饼干放在<strong>盒子</strong>里，然后出门离开了</p>
<p>Anne 随后，把饼干从 <strong>盒子</strong> 取出来，放到自己的<strong>篮子</strong>里，盖好。</p>
<p>一会儿，Sally回到房间。这个时候她去寻找自己的饼干，请问Sally会去 盒子 还是 篮子 寻找？</p>
<p>心智不成熟，小于四岁的孩子会回答：篮子。</p>
<p>其他参考：</p>
<p>译言： http://article.yeeyan.org/compare/322659</p>
<p>http://www.huanqiukexue.com/html/newgc/2012/1031/22806.html</p></p>
            <div class="card-subtext muted-text">
              <p>Posted <time datetime="2013-07-14T09:34:42+08:00">2013-07-14</time></p>
<p>archive</p>            </div>
          </article>
        </div>


        <!-- new article -->
        <div class="card blog-card">
          <article class="card-body">
            <a href="/post/55311741840"  rel="bookmark" >
              <h2 class="card-title">android cid</h2>
            </a>
            <p class="card-text"><p>this pdf</p>
<p>http://events.ccc.de/congress/2010/Fahrplan/attachments/1781_27c3-android-geolocation.pdf</p>
<p>注意看截图：</p>
<p><img alt="" src="/images/tumblr/55311741840_0.png" /></p>
<p>20801，其中MCC=208，MNC=01<br />
LAC=0403 <br />
CID=61E00</p>
<p>有这个信息之后，我们打开国产CID定位工具：</p>
<p>http://www.minigps.net/map.html</p>
<p><img alt="" src="/images/tumblr/55311741840_1.png" /></p>
<p>就得到了基站位置。</p>
<p>在自己手机上也可以直接通过下边命令来即时刷新：</p>
<pre><code># logcat -b radio RILJ:D | grep SM | grep REGISTRATION_STATE
# logcat -b radio RILJ:D | grep SM | grep OPERA
</code></pre>
<p>当然，这些信息可以通过Android的 <em>#</em>#INFO#<em>#</em>直接看到。</p></p>
            <div class="card-subtext muted-text">
              <p>Posted <time datetime="2013-07-12T23:30:03+08:00">2013-07-12</time></p>
<p>archive</p>            </div>
          </article>
        </div>


        <!-- new article -->
        <div class="card blog-card">
          <article class="card-body">
            <a href="/post/55170346033"  rel="bookmark" >
              <h2 class="card-title">《以理服己》里边的逻辑bug</h2>
            </a>
            <p class="card-text"><p>想去瞅瞅看看 李笑来 的 bitcoin 讲座，结果发现尼玛1200大洋收费的。屌丝就默默逆了。但是看到他其他讲座，有个叫《以理服己》，于是看了会儿。其中第二课第二页，出自：</p>
<p>http://www.duobei.com/room/course/1057408405</p>
<p><img alt="" src="/images/tumblr/55170346033_0.png" /></p>
<p>大概就是说，生男生女全靠男性。跟女性无关吧。</p>
<p>原因是男性染色体是 XY，女性是 XX，所以全靠男方决定。</p>
<p>这个说法是错误的，逻辑有bug的。</p>
<p>原因很简单，男性不是只提供一个X，或者一个Y，而是一次性一大批好几亿个。一个精子在皮质反应(Cortical reaction)之前，活性和前进速度是受到环境影响的。这个环境是否或者对X，或者对Y有选择性偏见呢？这个不能完全否定吧？</p>
<p>一个结果（result） 是由提供者（provider）和选择者（filter）共同决定的。</p>
<p>input -&gt; process -&gt; output</p>
<p>第二个不算bug的bug，</p>
<p>the Flat Earth Society，这个不是个普通社团，而是一种类似 trolling is a art 的搞笑的人。你去跟他们争就输了。</p></p>
            <div class="card-subtext muted-text">
              <p>Posted <time datetime="2013-07-11T09:16:00+08:00">2013-07-11</time></p>
<p>archive</p>            </div>
          </article>
        </div>


        <!-- new article -->
        <div class="card blog-card">
          <article class="card-body">
            <a href="/post/54984382053"  rel="bookmark" >
              <h2 class="card-title">Bret Victor的Tangle不是最牛的</h2>
            </a>
            <p class="card-text"><p>微博上<a href="https://weibo.cn/comment/zFbGGsu0B">一群人</a> 村刚通网把 tangle 这个坟挖出来了</p>
<iframe src="http://player.vimeo.com/video/36579366" width="400" height="300" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>

<p>神作13:20秒！</p>
<p><a href="https://news.ycombinator.com/item?id=6007187">via</a></p></p>
            <div class="card-subtext muted-text">
              <p>Posted <time datetime="2013-07-09T03:01:00+08:00">2013-07-09</time></p>
<p>archive</p>            </div>
          </article>
        </div>


        <!-- new article -->
        <div class="card blog-card">
          <article class="card-body">
            <a href="/post/54663265757"  rel="bookmark" >
              <h2 class="card-title">RSS · Next</h2>
            </a>
            <p class="card-text"><p>YY一下下一代RSS应该提供怎么样的技术：</p>
<ul>
<li>share aggregation。跨平台跨服务的分布式分享聚合，用于分析和排名</li>
<li>inline comments in readers，RSS里提供一个特殊的字段，用来标记Disquz/G+/Twitter的嵌入评论框的id。阅读器可以选择提供一个UI按钮嵌入或者弹出评论窗口。Wordpress这样的生成平台也应该提供一个评论交互API</li>
<li>支持HTML5 Push和浏览器notification。</li>
<li>RSS over APNS/GCM/MPNS</li>
<li>或许应该有一个统一的JSON feeds标准？</li>
</ul></p>
            <div class="card-subtext muted-text">
              <p>Posted <time datetime="2013-07-05T05:44:31+08:00">2013-07-05</time></p>
<p>archive</p>            </div>
          </article>
        </div>


        <!-- new article -->
        <div class="card blog-card">
          <article class="card-body">
            <a href="/post/53995049770"  rel="bookmark" >
              <h2 class="card-title">[zz]百度地图的研发们</h2>
            </a>
            <p class="card-text"><p>http://www.douban.com/note/284760511/   </p>
<p>三鲜 <br />
主页 广播 相册 喜欢 活动 发豆邮 <br />
去年我开始有抬头纹 <br />
2013-06-27 01:11:37 <br />
今天发现，百度地图的研发们都玩起新浪微博，互相 at 得不亦乐乎，看样子是经常齐刷刷地去登山、长跑。在我心中他们都是同一类的人，龙叔也如是说。   </p>
<p>这种感觉很奇怪，我离开快一年了，他们看上去变得更凝聚温馨。以前我高嗓门的架构讲座、开会时候对项目代码的怒斥，突然感觉就像只是破坏团队氛围的东西。记得我写的那个树状脑图，讲模块劣化的现象、原因、改进措施，21寸显示器两屏才显示得完，经理看了一个劲的笑，其他同事充满不理解不赞同，有人还公然拥护全局变量，我操。   </p>
<p>去年我一个人重构搜索后端，披星戴月，脑浆迸裂。说是重构实际上就是重写。除非当时内部的人，很少人愿意相信地图搜索引擎的代码的所有函数都只传一个参数，而这个参数就是传说中的全局变量，每个服务模块这个全局结构体的成员变量大概四五百个吧，是的真的就是这样。你可以说出这种代码的弊端有啥吗？函数完全无法复用？函数功能不明确？函数涉及的变量不明确？函数相互依赖导致少调用一个就coredump？操，你完全错了，这些都不是重点，这样搞法会导致代码压根就没有函数的概念，每个「函数」都上千行，逻辑完全混乱、bug 横飞，没任何人知道程序真正做了什么，没人敢碰别人的全局变量，同样的数据只敢在刚接收到 request 的时候 copy 一个过来用，最终这个全局结构体就有了这样的变量：query, query1, query2, queryword, word, QueryWord, origin_query, search_query 等不甚枚举，各有各的归一化，各有各的分词，各有各加载的资源。   </p>
<p>写到这里，发现沦为吐槽，其实我不喜欢在豆瓣写槽文。算了继续。   </p>
<p>牛逼的是，对于这样一个还没引入用户行为调权的复杂系统，它竟然不是幂等的。也就是说，对于同样的请求，它结果是随机的。为啥随机？因为各种没初始化、各种变量混用。你说为啥现在线上百度地图的搜索是稳定的？你让那帮家伙把 cache 关了试试。其他不随机的 bug 就更不用说，那套 ranking 过程中全是整型溢出、double 被误转成 bool，鸡飞狗跳。   </p>
<p>更牛逼的是，我重构的时候把那些扯鸡巴蛋的 bug 都修了，系统不再随机了，但是搜索质量下降了，PM 不让上线。这个现象倒是符合逻辑的，因为一旦系统在某个时期有 bug，之后的策略优化就会对这个 bug 有倾向性。当时项目排期很紧，其他几个人的项目都等着我重构完才能开搞，结果跟同事讨论之后决定让我去主动仿造原来那些 bug（是不是很厉害？是不是闻所未闻？），我一顿狂改之后搜索质量有所回升，但仍然达不到原来的效果。这时候唯一的出路大概只能加策略优化 ranking，但如果再经历几次立项、审批、测试沟通、写MRD/TDD，这次重构就彻底无法善终。万般无奈下我给偷偷调整了一堆参数，尼玛，搜索效果终于持平。   </p>
<p>这时候又面临一个牛逼的事情。前俩月其他同事加的代码要 merge 到我的项目里来，diff 一下有上千行，我得看明白他们的逻辑才能穿插到新版来。又一轮闷头搞，途中又发现各种 bug，其中有个同事的函数让我很欣慰，因为它真的比其他人短，才十几行，不幸的是，他忘记写 return 了，于是又鸡巴是个随机的东西。   </p>
<p>最终上线之前还被 OP 们摆了一道。OP 分为 searching 和 indexing 两堆人，我们需要更多的 searching 机器，还得约 OP 出来磨嘴皮子。这头 searching 机器申请还没个着落，那头 indexing 的 OP 又频繁找我谈，扯逼淡的是，我不知道他们想跟我谈什么，我敞开问那哥们就傻笑。后来才搞明白他们是想让我劣化 indexing 程序的性能，以降低机器闲置率，提高他们的 KPI。明白之后就再没理他们。   </p>
<p>这个项目总共做了三个多月，比预期延了一个月。快结束的时候我经理离职了，结束之后测这个项目的 QA 也离职了。这坨新的东西不见得有多好，但可以称之为「可维护的」系统，代码量只有原来的 1/3，搜索性能提高50倍。   </p>
<p>在某些部门，所谓优化搜索策略变成了研发人员乱搞的游戏，乱想一个法子，在代码堆里胡写那么几行，让 PM 评估个几百个随机 query，发现效果似乎提升了那么零点几个百分点，我操，立马上线！立马有 KPI！立马可以申请专利！   </p>
<p>话虽如此，那帮同事都是纯朴善良的人，只是那个地方严重挫伤了我对技术的情感，所以后来选择离开。临走前又推了一次 code review 和 unit test，失败告终。在我看来写代码是工程师的基石，这个不达标其他都是扯逼蛋，代码写得有板有眼了，才有资格给我谈做项目、做事情、做人。工程师最终要的能力是「抽象」和「拆解」，这个百度很多人都听过，但是首先应该从代码上实践出来。百度人还喜欢谈「知行合一」，这个就是抽自己嘴巴的话。   </p>
<p>本来想些的不是这些，先这么着，算是留个记录。   </p>
<p>添加到豆列 分享到    推荐 98人 51人 喜欢  喜欢</p></p>
            <div class="card-subtext muted-text">
              <p>Posted <time datetime="2013-06-27T01:48:00+08:00">2013-06-27</time></p>
<p>archive</p>            </div>
          </article>
        </div>


        <!-- new article -->
        <div class="card blog-card">
          <article class="card-body">
            <a href="/post/53994273786"  rel="bookmark" >
              <h2 class="card-title">GNURadio, AirProbe, libosmocore for OS X 10.8 Mountain Lion</h2>
            </a>
            <p class="card-text"><p>First you need to <a href="http://mxcl.github.io/homebrew/">install Homebrew</a></p>
<p>Then you need to <a href="http://stackoverflow.com/a/9329325/41948">install GCC from XCode "command line tools"</a></p>
<p><img alt="" src="http://i.stack.imgur.com/SMQvZ.jpg" /></p>
<pre><code>$ brew install gfortran umfpack swig
$ sudo pip install  numpy Cheetah lxml scipy matplotlib
$ brew tap ksnieck/homebrew-gnuradio
$ cd /usr/local/Library/Taps/
$ mv ksnieck-gnuradio/ titanous/homebrew-gnuradio
$ brew install gnuradio
$ brew install rtlsdr gr-osmosdr gr-baz --HEAD
</code></pre>
<p>There's like a shitton of dependency for GNURadio, you'll possibly need a fast Internet connection or wait.</p></p>
            <div class="card-subtext muted-text">
              <p>Posted <time datetime="2013-06-27T01:35:04+08:00">2013-06-27</time></p>
<p>archive</p>            </div>
          </article>
        </div>


        <!-- new article -->
        <div class="card blog-card">
          <article class="card-body">
            <a href="/post/53646144010"  rel="bookmark" >
              <h2 class="card-title">银行系统bug了？</h2>
            </a>
            <p class="card-text"><p>@老赵<br />
打了招行和支付宝两边的客服，确认了：招行这边扣款已经发生，支付宝交易也已经提交，但是因为从昨晚开始招行这边系统出错，支付宝已经堆积了大量从招行这边没拿过来的款项，已经收到大量客户电话，但需要到周一两边交易核对成功之后再处理。假如我着急还款的话，需要我再换一次，但千万不要使用招行。<br />
(1)| 转发(5) | 评论(4) 6月22日 16:18来自新浪微博</p>
<p>@ACE1997：RT @Arctosia RT @jiezitui: 上海工商银行网络现全面崩溃，ATM等全面停止服务，工行内部系统一级抢修中……</p>
<p><img alt="" src="/images/tumblr/53646144010_0.png" /></p>
<p><img alt="" src="http://wp2.sina.cn/woriginal/7a0fab34gw1e5xvtkk63cj20gj0n0n05.jpg" /></p></p>
            <div class="card-subtext muted-text">
              <p>Posted <time datetime="2013-06-22T23:47:44+08:00">2013-06-22</time></p>
<p>archive</p>            </div>
          </article>
        </div>


        <!-- new article -->
        <div class="card blog-card">
          <article class="card-body">
            <a href="/post/53501558487"  rel="bookmark" >
              <h2 class="card-title">2013-06-20 发生了啥事</h2>
            </a>
            <p class="card-text"><p>【银行大闹钱荒 宏观信号拒绝“放水” 】没见过隔夜上30%的交易员，人生是不圆满的。6月20日，疯狂的一天，足以载入中国银行间市场史册。当日银行间隔夜回购利率最高达到史无前例的30%，7天回购利率最高达28%。近年这两项利率往往不到3%</p>
<p><img alt="" src="http://ww1.sinaimg.cn/large/6438e10ejw1e5vq1wsjnnj20c81mm7el.jpg" /></p>
<p>《央行择机推存款保险制度若破产每账户或赔50万》</p>
<p><img alt="" src="http://ww4.sinaimg.cn/large/633151d5jw1e5v2sa1vxfj20c811o452.jpg" /></p>
<p><img alt="" src="http://ww2.sinaimg.cn/large/626ece26jw1e5uw41m3znj20lg0b8myo.jpg" /></p>
<p>第二件事：</p>
<p>http://www.solidot.org/story?sid=35250</p>
<blockquote>
<p>今天(2013/06/20)下午三点左右，中国大陆的用户访问境外使用StartSSL、Thawte等提供的免费SSL证书作为HTTP加密访问方式的IP地址疑似被中国国家网络防火墙屏蔽。   </p>
<p>陈少举(1916)  Neutral 发表于2013年06月21日 11时22分 星期五 <br />
今天（2013/06/21）上午１０点左右，有推友报告开始陆续解封。<br />
我自己的也在11:15分左右解封。    </p>
<p>感觉这次是一个技术警告（或称为技术示威），告诉大家墙目前具备了什么样的能力。    </p>
<p>买证书去。    </p>
</blockquote>
<p>我补充一下这个情况：</p>
<ol>
<li>
<p>墙可以伪造TTL返回让人traceroute/mtr感觉是国内省级骨干网，或者是出国最后一跳出了故障。这个因为Unix和Windows的初始默认TTL值样本太显著了。</p>
</li>
<li>
<p>IP屏蔽是单向的。</p>
</li>
</ol></p>
            <div class="card-subtext muted-text">
              <p>Posted <time datetime="2013-06-21T02:57:00+08:00">2013-06-21</time></p>
<p>archive</p>            </div>
          </article>
        </div>


        <!-- new article -->
        <div class="card blog-card">
          <article class="card-body">
            <a href="/post/52423722389"  rel="bookmark" >
              <h2 class="card-title">首都机场，推迟起飞，费城交响乐团，</h2>
            </a>
            <p class="card-text"><p>A musical surprise! </p>
<p>Antonin Dvorak - String Quartet no. 12 in F major "American": IV. Finale: Vivace ma non troppo</p>
<iframe width="640" height="360" src="http://www.youtube.com/embed/dFhYPsgroMk?feature=player_detailpage" frameborder="0" allowfullscreen></iframe>

<p>麻痹的接电话的，非得在那个时候接么！！！！</p>
<p><a href="http://www.reddit.com/r/China/comments/1fvhod/">via</a></p></p>
            <div class="card-subtext muted-text">
              <p>Posted <time datetime="2013-06-07T21:30:00+08:00">2013-06-07</time></p>
<p>archive</p>            </div>
          </article>
        </div>

    </main>
    <nav class="pagination-nav side-padding">
<a href="/index.10.html" class="pagination-newer">&lt; Newer Posts</a><a href="/index.12.html" class="pagination-older">Older Posts &gt;</a>    </nav>

<script src="/theme/js/core.js"></script>

  </body>
</html>